/*! For license information please see 2.d0ebc572.chunk.js.LICENSE.txt */
(this.webpackJsonpwolverineflicks=this.webpackJsonpwolverineflicks||[]).push([[2],[function(e,t,n){e.exports=n(41)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function u(e){r(o,i,a,u,s,"next",e)}function s(e){r(o,i,a,u,s,"throw",e)}u(void 0)}))}}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(21);function i(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Object(r.a)(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,u=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(u)throw a}}}}},function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return D})),n.d(t,"c",(function(){return C})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return U})),n.d(t,"g",(function(){return R})),n.d(t,"h",(function(){return j})),n.d(t,"i",(function(){return M})),n.d(t,"j",(function(){return P})),n.d(t,"k",(function(){return v})),n.d(t,"l",(function(){return S})),n.d(t,"m",(function(){return E})),n.d(t,"n",(function(){return B})),n.d(t,"o",(function(){return y})),n.d(t,"p",(function(){return g})),n.d(t,"q",(function(){return b})),n.d(t,"r",(function(){return w})),n.d(t,"s",(function(){return m})),n.d(t,"t",(function(){return k})),n.d(t,"u",(function(){return x}));var i=n(4),a=(n(12),n(20)),o=n(8),u=n(9),s=n(34),c=n(1),l=n(2),f=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},h={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(f(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},d=function(e){return function(e){var t=f(e);return h.encodeByteArray(t,!0)}(e).replace(/\./g,"")},p=function(e){try{return h.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function v(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=v(e[n],t[n]));return e}function y(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function m(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return!1}}function g(){return"object"===typeof self&&self.self===self}function b(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function k(){return!m()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function w(){try{return"object"===typeof indexedDB}catch(e){return!1}}function x(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}}))}function O(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}var _=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof e)return e;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},T=function(){try{return _()||function(){if("undefined"!==typeof r){var e=Object({NODE_ENV:"production",PUBLIC_URL:"/wolverineflicks",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&p(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},E=function(e){var t=function(e){var t,n;return null===(n=null===(t=T())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]}(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},S=function(){var e;return null===(e=T())||void 0===e?void 0:e.config},I=function(){function e(){var t=this;Object(c.a)(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Object(l.a)(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function j(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[d(JSON.stringify({alg:"none",type:"JWT"})),d(JSON.stringify(a)),""].join(".")}var C=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e,r,i){var o;return Object(c.a)(this,n),(o=t.call(this,r)).code=e,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(Object(a.a)(o),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Object(a.a)(o),D.prototype.create),o}return n}(Object(s.a)(Error)),D=function(){function e(t,n,r){Object(c.a)(this,e),this.service=t,this.serviceName=n,this.errors=r}return Object(l.a)(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?A(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new C(n,a,t);return o}}]),e}();function A(e,t){return e.replace(N,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var N=/\{\$([^}]+)}/g;function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function P(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(L(u)&&L(s)){if(!P(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function L(e){return null!==e&&"object"===typeof e}function M(e,t){var n=new F(e,t);return n.subscribe.bind(n)}var F=function(){function e(t,n){var r=this;Object(c.a)(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Object(l.a)(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,a=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Object(i.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a in e&&"function"===typeof e[a])return!0}}catch(o){r.e(o)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{a.finalError?r.error(a.finalError):r.complete()}catch(e){}})),this.observers.push(r),o}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function V(){}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function B(e){return e&&e._delegate?e._delegate:e}}).call(this,n(30),n(31))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return Nf})),n.d(t,"b",(function(){return Cl})),n.d(t,"c",(function(){return yl})),n.d(t,"d",(function(){return Lc})),n.d(t,"e",(function(){return Mf})),n.d(t,"f",(function(){return Dl})),n.d(t,"g",(function(){return L})),n.d(t,"h",(function(){return Nl})),n.d(t,"i",(function(){return Ff})),n.d(t,"j",(function(){return Vf})),n.d(t,"k",(function(){return X})),n.d(t,"l",(function(){return ih})),n.d(t,"m",(function(){return De})),n.d(t,"n",(function(){return re})),n.d(t,"o",(function(){return ne})),n.d(t,"p",(function(){return Cc})),n.d(t,"q",(function(){return N})),n.d(t,"r",(function(){return Fe})),n.d(t,"s",(function(){return j})),n.d(t,"t",(function(){return Ec})),n.d(t,"u",(function(){return Jf})),n.d(t,"v",(function(){return fh})),n.d(t,"w",(function(){return lh})),n.d(t,"x",(function(){return Ol})),n.d(t,"y",(function(){return Vc})),n.d(t,"z",(function(){return Uc})),n.d(t,"A",(function(){return Pc})),n.d(t,"B",(function(){return Xf})),n.d(t,"C",(function(){return sh})),n.d(t,"D",(function(){return El})),n.d(t,"E",(function(){return Bc})),n.d(t,"F",(function(){return kl})),n.d(t,"G",(function(){return wl})),n.d(t,"H",(function(){return Tl})),n.d(t,"I",(function(){return Sf})),n.d(t,"J",(function(){return Ef})),n.d(t,"K",(function(){return gl})),n.d(t,"L",(function(){return th})),n.d(t,"M",(function(){return qf})),n.d(t,"N",(function(){return Kf})),n.d(t,"O",(function(){return Gf})),n.d(t,"P",(function(){return Hf})),n.d(t,"Q",(function(){return Qf})),n.d(t,"R",(function(){return Wf})),n.d(t,"S",(function(){return hh})),n.d(t,"T",(function(){return kf})),n.d(t,"U",(function(){return wf})),n.d(t,"V",(function(){return Sl})),n.d(t,"W",(function(){return Il})),n.d(t,"X",(function(){return Zf})),n.d(t,"Y",(function(){return eh})),n.d(t,"Z",(function(){return gf})),n.d(t,"ab",(function(){return df})),n.d(t,"bb",(function(){return zc})),n.d(t,"cb",(function(){return qc})),n.d(t,"db",(function(){return uh})),n.d(t,"eb",(function(){return ch})),n.d(t,"fb",(function(){return Yf})),n.d(t,"gb",(function(){return E})),n.d(t,"hb",(function(){return Bf})),n.d(t,"ib",(function(){return _f})),n.d(t,"jb",(function(){return Of})),n.d(t,"kb",(function(){return $f})),n.d(t,"lb",(function(){return _l})),n.d(t,"mb",(function(){return vf}));var r=n(23),i=n(18),a=n(15),o=n(12),u=n(4),s=n(0),c=n.n(s),l=n(3),f=n(8),h=n(9),d=n(13),p=n(1),v=n(2),y=n(10),m=n(14),g=n(16),b=n(5),k=n(17),w="@firebase/firestore",x=function(){function e(t){Object(p.a)(this,e),this.uid=t}return Object(v.a)(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();x.UNAUTHENTICATED=new x(null),x.GOOGLE_CREDENTIALS=new x("google-credentials-uid"),x.FIRST_PARTY=new x("first-party-uid"),x.MOCK_USER=new x("mock-user");var O="9.15.0",_=new g.b("@firebase/firestore");function T(){return _.logLevel}function E(e){_.setLogLevel(e)}function S(e){if(_.logLevel<=g.a.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(C);_.debug.apply(_,["Firestore (".concat(O,"): ").concat(e)].concat(Object(d.a)(i)))}}function I(e){if(_.logLevel<=g.a.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(C);_.error.apply(_,["Firestore (".concat(O,"): ").concat(e)].concat(Object(d.a)(i)))}}function j(e){if(_.logLevel<=g.a.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(C);_.warn.apply(_,["Firestore (".concat(O,"): ").concat(e)].concat(Object(d.a)(i)))}}function C(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(O,") INTERNAL ASSERTION FAILED: ")+e;throw I(t),new Error(t)}function A(e,t){e||D()}function N(e,t){e||D()}function R(e,t){return e}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return n}(b.c),M=function e(){var t=this;Object(p.a)(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},F=function e(t,n){Object(p.a)(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))},V=function(){function e(){Object(p.a)(this,e)}return Object(v.a)(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(x.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),U=function(){function e(t){Object(p.a)(this,e),this.token=t,this.changeListener=null}return Object(v.a)(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),B=function(){function e(t){Object(p.a)(this,e),this.t=t,this.currentUser=x.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Object(v.a)(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new M;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new M,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){S("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(S("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new M)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(S("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(A("string"==typeof n.accessToken),new F(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return A(null===e||"string"==typeof e),new x(e)}}]),e}(),q=function(){function e(t,n,r,i){Object(p.a)(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=x.FIRST_PARTY,this.p=new Map}return Object(v.a)(e,[{key:"I",value:function(){return this.g?this.g():(A(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),z=function(){function e(t,n,r,i){Object(p.a)(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return Object(v.a)(e,[{key:"getToken",value:function(){return Promise.resolve(new q(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(x.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),K=function e(t){Object(p.a)(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)},G=function(){function e(t){Object(p.a)(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return Object(v.a)(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&S("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,S("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){S("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):S("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(A("string"==typeof t.token),e.A=t.token,new K(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function H(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Q=function(){function e(){Object(p.a)(this,e)}return Object(v.a)(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=H(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function W(e,t){return e<t?-1:e>t?1:0}function Y(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function $(e){return e+"\0"}var X=function(){function e(t,n){if(Object(p.a)(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new L(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new L(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new L(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Object(v.a)(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?W(this.nanoseconds,e.nanoseconds):W(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),J=function(){function e(t){Object(p.a)(this,e),this.timestamp=t}return Object(v.a)(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new X(0,0))}},{key:"max",value:function(){return new e(new X(253402300799,999999999))}}]),e}(),Z=function(){function e(t,n,r){Object(p.a)(this,e),void 0===n?n=0:n>t.length&&D(),void 0===r?r=t.length-n:r>t.length-n&&D(),this.segments=t,this.offset=n,this.len=r}return Object(v.a)(e,[{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}},{key:"length",get:function(){return this.len}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),ee=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new L(P.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Object(d.a)(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Z),te=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ne=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return te.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new L(P.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new L(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new L(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new L(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Z),re=function(){function e(t){Object(p.a)(this,e),this.path=t}return Object(v.a)(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===ee.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}},{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}}],[{key:"fromPath",value:function(t){return new e(ee.fromString(t))}},{key:"fromName",value:function(t){return new e(ee.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(ee.emptyPath())}},{key:"comparator",value:function(e,t){return ee.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new ee(t.slice()))}}]),e}(),ie=function e(t,n,r,i){Object(p.a)(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i};function ae(e){return e.fields.find((function(e){return 2===e.kind}))}function oe(e){return e.fields.filter((function(e){return 2!==e.kind}))}ie.UNKNOWN_ID=-1;var ue=function e(t,n){Object(p.a)(this,e),this.fieldPath=t,this.kind=n};var se=function(){function e(t,n){Object(p.a)(this,e),this.sequenceNumber=t,this.offset=n}return Object(v.a)(e,null,[{key:"empty",value:function(){return new e(0,fe.min())}}]),e}();function ce(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=J.fromTimestamp(1e9===r?new X(n+1,0):new X(n,r));return new fe(i,re.empty(),t)}function le(e){return new fe(e.readTime,e.key,-1)}var fe=function(){function e(t,n,r){Object(p.a)(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Object(v.a)(e,null,[{key:"min",value:function(){return new e(J.min(),re.empty(),-1)}},{key:"max",value:function(){return new e(J.max(),re.empty(),-1)}}]),e}();function he(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=re.comparator(e.documentKey,t.documentKey))?n:W(e.largestBatchId,t.largestBatchId)}var de="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",pe=function(){function e(){Object(p.a)(this,e),this.onCommittedListeners=[]}return Object(v.a)(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function ve(e){return ye.apply(this,arguments)}function ye(){return(ye=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===P.FAILED_PRECONDITION&&t.message===de){e.next=2;break}throw t;case 2:S("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var me=function(){function e(t){var n=this;Object(p.a)(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Object(v.a)(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&D(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Object(u.a)(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),ge=function(){function e(t,n){var r=this;Object(p.a)(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new M,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new we(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=Ee(e.target.error);r.P.reject(new we(t,n))}}return Object(v.a)(e,[{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(S("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Oe(t)}},{key:"v",get:function(){return this.P.promise}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new we(n,t)}}}]),e}(),be=function(){function t(e,n,r){Object(p.a)(this,t),this.name=e,this.version=n,this.S=r,12.2===t.D(Object(b.o)())&&I("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Object(v.a)(t,[{key:"F",value:function(){var e=Object(l.a)(c.a.mark((function e(t){var n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return S("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new we(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new L(P.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new L(P.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new we(t,n))},i.onupgradeneeded=function(e){S("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){S("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Object(l.a)(c.a.mark((function e(t,n,r,i){var a,o,u,s,l,f=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(c.a.mark((function e(){var n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.F(t);case 2:return f.db=e.sent,n=ge.open(f.db,t,a?"readonly":"readwrite",r),(o=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),me.reject(e)})).toPromise()).catch((function(){})),e.next=7,n.v;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,l="FirebaseError"!==s.name&&o<3,S("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),this.close(),l){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return S("SimpleDb","Removing database:",e),_e(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!Object(b.r)())return!1;if(t.N())return!0;var e=Object(b.o)(),n=t.D(e),r=0<n&&n<10,i=t.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var t;return"undefined"!=typeof e&&"YES"===(null===(t=Object({NODE_ENV:"production",PUBLIC_URL:"/wolverineflicks",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}))||void 0===t?void 0:t.O)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),t}(),ke=function(){function e(t){Object(p.a)(this,e),this.q=t,this.U=!1,this.K=null}return Object(v.a)(e,[{key:"done",value:function(){this.U=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return _e(this.q.delete())}},{key:"isDone",get:function(){return this.U}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.q=e}}]),e}(),we=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this,P.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return n}(L);function xe(e){return"IndexedDbTransactionError"===e.name}var Oe=function(){function e(t){Object(p.a)(this,e),this.store=t}return Object(v.a)(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(S("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(S("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),_e(n)}},{key:"add",value:function(e){return S("SimpleDb","ADD",this.store.name,e,e),_e(this.store.add(e))}},{key:"get",value:function(e){var t=this;return _e(this.store.get(e)).next((function(n){return void 0===n&&(n=null),S("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return S("SimpleDb","DELETE",this.store.name,e),_e(this.store.delete(e))}},{key:"count",value:function(){return S("SimpleDb","COUNT",this.store.name),_e(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new me((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new me((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){S("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new me((function(n,r){t.onerror=function(e){var t=Ee(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new me((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new ke(i),o=t(i.primaryKey,i.value,a);if(o instanceof me){var u=o.catch((function(e){return a.done(),me.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return me.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function _e(e){return new me((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Ee(e.target.error);n(t)}}))}var Te=!1;function Ee(e){var t=be.D(Object(b.o)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new L("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Te||(Te=!0,setTimeout((function(){throw r}),0)),r}}return e}var Se=function(){function e(t,n){Object(p.a)(this,e),this.asyncQueue=t,this.et=n,this.task=null}return Object(v.a)(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"nt",value:function(e){var t=this;S("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=S,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!xe(e.t4)){e.next=17;break}S("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,ve(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}},{key:"started",get:function(){return null!==this.task}}]),e}(),Ie=function(){function e(t,n){Object(p.a)(this,e),this.localStore=t,this.persistence=n}return Object(v.a)(e,[{key:"st",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,n=this,r=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return me.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return S("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return S("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=le(t);he(r,n)>0&&(n=r)})),new fe(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),je=function(){function e(t,n){var r=this;Object(p.a)(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return Object(v.a)(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();je.at=-1;var Ce=function e(t,n,r,i,a,o,u,s){Object(p.a)(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s},De=function(){function e(t,n){Object(p.a)(this,e),this.projectId=t,this.database=n||"(default)"}return Object(v.a)(e,[{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}},{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Ae(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ne(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Re(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Pe(e){return null==e}function Le(e){return 0===e&&1/e==-1/0}function Me(e){return"number"==typeof e&&Number.isInteger(e)&&!Le(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Fe(){return"undefined"!=typeof atob}var Ve=function(){function e(t){Object(p.a)(this,e),this.binaryString=t}return Object(v.a)(e,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return W(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(atob(t))}},{key:"fromUint8Array",value:function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}}]),e}();Ve.EMPTY_BYTE_STRING=new Ve("");var Ue=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Be(e){if(A(!!e),"string"==typeof e){var t=0,n=Ue.exec(e);if(A(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:qe(e.seconds),nanos:qe(e.nanos)}}function qe(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ze(e){return"string"==typeof e?Ve.fromBase64String(e):Ve.fromUint8Array(e)}function Ke(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ge(e){var t=Be(e.mapValue.fields.__local_write_time__.timestampValue);return new X(t.seconds,t.nanos)}var He={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Qe={nullValue:"NULL_VALUE"};function We(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ke(e)?4:ut(e)?9007199254740991:10:D()}function Ye(e,t){if(e===t)return!0;var n=We(e);if(n!==We(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ge(e).isEqual(Ge(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Be(e.timestampValue),r=Be(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ze(e.bytesValue).isEqual(ze(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return qe(e.geoPointValue.latitude)===qe(t.geoPointValue.latitude)&&qe(e.geoPointValue.longitude)===qe(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return qe(e.integerValue)===qe(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=qe(e.doubleValue),r=qe(t.doubleValue);return n===r?Le(n)===Le(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Y(e.arrayValue.values||[],t.arrayValue.values||[],Ye);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ae(n)!==Ae(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ye(n[i],r[i])))return!1;return!0}(e,t);default:return D()}}function $e(e,t){return void 0!==(e.values||[]).find((function(e){return Ye(e,t)}))}function Xe(e,t){if(e===t)return 0;var n=We(e),r=We(t);if(n!==r)return W(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return W(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=qe(e.integerValue||e.doubleValue),r=qe(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Je(e.timestampValue,t.timestampValue);case 4:return Je(Ge(e),Ge(t));case 5:return W(e.stringValue,t.stringValue);case 6:return function(e,t){var n=ze(e),r=ze(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=W(n[i],r[i]);if(0!==a)return a}return W(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=W(qe(e.latitude),qe(t.latitude));return 0!==n?n:W(qe(e.longitude),qe(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Xe(n[i],r[i]);if(a)return a}return W(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===He.mapValue&&t===He.mapValue)return 0;if(e===He.mapValue)return 1;if(t===He.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=W(r[o],a[o]);if(0!==u)return u;var s=Xe(n[r[o]],i[a[o]]);if(0!==s)return s}return W(r.length,a.length)}(e.mapValue,t.mapValue);default:throw D()}}function Je(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return W(e,t);var n=Be(e),r=Be(t),i=W(n.seconds,r.seconds);return 0!==i?i:W(n.nanos,r.nanos)}function Ze(e){return function e(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){var t=Be(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ze(t.bytesValue).toBase64():"referenceValue"in t?(r=t.referenceValue,re.fromName(r).toString()):"geoPointValue"in t?"geo(".concat((n=t.geoPointValue).latitude,",").concat(n.longitude,")"):"arrayValue"in t?function(t){var n,r="[",i=!0,a=Object(u.a)(t.values||[]);try{for(a.s();!(n=a.n()).done;){var o=n.value;i?i=!1:r+=",",r+=e(o)}}catch(s){a.e(s)}finally{a.f()}return r+"]"}(t.arrayValue):"mapValue"in t?function(t){var n,r=Object.keys(t.fields||{}).sort(),i="{",a=!0,o=Object(u.a)(r);try{for(o.s();!(n=o.n()).done;){var s=n.value;a?a=!1:i+=",",i+="".concat(s,":").concat(e(t.fields[s]))}}catch(c){o.e(c)}finally{o.f()}return i+"}"}(t.mapValue):D();var n,r}(e)}function et(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function tt(e){return!!e&&"integerValue"in e}function nt(e){return!!e&&"arrayValue"in e}function rt(e){return!!e&&"nullValue"in e}function it(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function at(e){return!!e&&"mapValue"in e}function ot(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Ne(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=ot(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ot(e.arrayValue.values[r]);return n}return Object.assign({},e)}function ut(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function st(e){return"nullValue"in e?Qe:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?et(De.empty(),re.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:D()}function ct(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?et(De.empty(),re.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?He:D()}function lt(e,t){var n=Xe(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function ft(e,t){var n=Xe(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var ht=function e(t,n){Object(p.a)(this,e),this.position=t,this.inclusive=n};function dt(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?re.comparator(re.fromName(o.referenceValue),n.key):Xe(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function pt(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ye(e.position[n],t.position[n]))return!1;return!0}var vt=function e(){Object(p.a)(this,e)},yt=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r,i){var a;return Object(p.a)(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Object(v.a)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Xe(t,this.value)):null!==t&&We(this.value)===We(t)&&this.matchesComparison(Xe(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return D()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Tt(e,t,r):"array-contains"===t?new jt(e,r):"in"===t?new Ct(e,r):"not-in"===t?new Dt(e,r):"array-contains-any"===t?new At(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Et(e,n):new St(e,n)}}]),n}(vt),mt=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return Object(v.a)(n,[{key:"matches",value:function(e){return gt(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=Object(u.a)(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(vt);function gt(e){return"and"===e.op}function bt(e){return"or"===e.op}function kt(e){return wt(e)&&gt(e)}function wt(e){var t,n=Object(u.a)(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof mt)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function xt(e,t){return e instanceof yt?function(e,t){return t instanceof yt&&e.op===t.op&&e.field.isEqual(t.field)&&Ye(e.value,t.value)}(e,t):e instanceof mt?function(e,t){return t instanceof mt&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&xt(n,t.filters[r])}),!0)}(e,t):void D()}function Ot(e,t){var n=e.filters.concat(t);return mt.create(n,e.op)}function _t(e){return e instanceof yt?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ze(e.value))}(e):e instanceof mt?function(e){return e.op.toString()+" {"+e.getFilters().map(_t).join(" ,")+"}"}(e):"Filter"}var Tt=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r,i){var a;return Object(p.a)(this,n),(a=t.call(this,e,r,i)).key=re.fromName(i.referenceValue),a}return Object(v.a)(n,[{key:"matches",value:function(e){var t=re.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(yt),Et=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this,e,"in",r)).keys=It("in",r),i}return Object(v.a)(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(yt),St=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this,e,"not-in",r)).keys=It("not-in",r),i}return Object(v.a)(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(yt);function It(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return re.fromName(e.referenceValue)}))}var jt=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r){return Object(p.a)(this,n),t.call(this,e,"array-contains",r)}return Object(v.a)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return nt(t)&&$e(t.arrayValue,this.value)}}]),n}(yt),Ct=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r){return Object(p.a)(this,n),t.call(this,e,"in",r)}return Object(v.a)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&$e(this.value.arrayValue,t)}}]),n}(yt),Dt=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r){return Object(p.a)(this,n),t.call(this,e,"not-in",r)}return Object(v.a)(n,[{key:"matches",value:function(e){if($e(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!$e(this.value.arrayValue,t)}}]),n}(yt),At=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r){return Object(p.a)(this,n),t.call(this,e,"array-contains-any",r)}return Object(v.a)(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!nt(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return $e(t.value.arrayValue,e)}))}}]),n}(yt),Nt=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Object(p.a)(this,e),this.field=t,this.dir=n};function Rt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Pt=function(){function e(t,n){Object(p.a)(this,e),this.comparator=t,this.root=n||Mt.EMPTY}return Object(v.a)(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Mt.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Mt.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Lt(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Lt(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Lt(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Lt(this.root,e,this.comparator,!0)}},{key:"size",get:function(){return this.root.size}}]),e}(),Lt=function(){function e(t,n,r,i){Object(p.a)(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Object(v.a)(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Mt=function(){function e(t,n,r,i,a){Object(p.a)(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Object(v.a)(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw D();if(this.right.isRed())throw D();var e=this.left.check();if(e!==this.right.check())throw D();return e+(this.isRed()?0:1)}}]),e}();Mt.EMPTY=null,Mt.RED=!0,Mt.BLACK=!1,Mt.EMPTY=new(function(){function e(){Object(p.a)(this,e),this.size=0}return Object(v.a)(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Mt(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}},{key:"key",get:function(){throw D()}},{key:"value",get:function(){throw D()}},{key:"color",get:function(){throw D()}},{key:"left",get:function(){throw D()}},{key:"right",get:function(){throw D()}}]),e}());var Ft=function(){function e(t){Object(p.a)(this,e),this.comparator=t,this.data=new Pt(this.comparator)}return Object(v.a)(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Vt(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Vt(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}},{key:"size",get:function(){return this.data.size}}]),e}(),Vt=function(){function e(t){Object(p.a)(this,e),this.iter=t}return Object(v.a)(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Ut(e){return e.hasNext()?e.getNext():void 0}var Bt=function(){function e(t){Object(p.a)(this,e),this.fields=t,t.sort(ne.comparator)}return Object(v.a)(e,[{key:"unionWith",value:function(t){var n,r=new Ft(ne.comparator),i=Object(u.a)(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(l){i.e(l)}finally{i.f()}var o,s=Object(u.a)(t);try{for(s.s();!(o=s.n()).done;){var c=o.value;r=r.add(c)}}catch(l){s.e(l)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Object(u.a)(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Y(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),qt=function(){function e(t){Object(p.a)(this,e),this.value=t}return Object(v.a)(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!at(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ot(t)}},{key:"setAll",value:function(e){var t=this,n=ne.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=ot(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());at(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Ye(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];at(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Ne(t,(function(t,n){return e[t]=n}));var r,i=Object(u.a)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(ot(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function zt(e){var t=[];return Ne(e.fields,(function(e,n){var r=new ne([e]);if(at(n)){var i=zt(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Object(u.a)(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(c){o.e(c)}finally{o.f()}}}else t.push(r)})),new Bt(t)}var Kt=function(){function e(t,n,r,i,a,o,u){Object(p.a)(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return Object(v.a)(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(J.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=J.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,J.min(),J.min(),J.min(),qt.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,J.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,J.min(),J.min(),qt.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,J.min(),J.min(),qt.empty(),2)}}]),e}(),Gt=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Object(p.a)(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null};function Ht(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Gt(e,t,n,r,i,a,o)}function Qt(e){var t=R(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function e(t){if(t instanceof yt)return t.field.canonicalString()+t.op.toString()+Ze(t.value);var n=t.filters.map((function(t){return e(t)})).join(",");return"".concat(t.op,"(").concat(n,")")}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Pe(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Ze(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Ze(e)})).join(",")),t.ft=n}return t.ft}function Wt(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Rt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!xt(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!pt(e.startAt,t.startAt)&&pt(e.endAt,t.endAt)}function Yt(e){return re.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function $t(e,t){return e.filters.filter((function(e){return e instanceof yt&&e.field.isEqual(t)}))}function Xt(e,t,n){var r,i=Qe,a=!0,o=Object(u.a)($t(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,c=Qe,l=!0;switch(s.op){case"<":case"<=":c=st(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,l=!1;break;case"!=":case"not-in":c=Qe}lt({value:i,inclusive:a},{value:c,inclusive:l})<0&&(i=c,a=l)}}catch(d){o.e(d)}finally{o.f()}if(null!==n)for(var f=0;f<e.orderBy.length;++f)if(e.orderBy[f].field.isEqual(t)){var h=n.position[f];lt({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function Jt(e,t,n){var r,i=He,a=!0,o=Object(u.a)($t(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,c=He,l=!0;switch(s.op){case">=":case">":c=ct(s.value),l=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,l=!1;break;case"!=":case"not-in":c=He}ft({value:i,inclusive:a},{value:c,inclusive:l})>0&&(i=c,a=l)}}catch(d){o.e(d)}finally{o.f()}if(null!==n)for(var f=0;f<e.orderBy.length;++f)if(e.orderBy[f].field.isEqual(t)){var h=n.position[f];ft({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var Zt=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Object(p.a)(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this._t=null,this.startAt,this.endAt};function en(e,t,n,r,i,a,o,u){return new Zt(e,t,n,r,i,a,o,u)}function tn(e){return new Zt(e)}function nn(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function rn(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function an(e){var t,n=Object(u.a)(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function on(e){return null!==e.collectionGroup}function un(e){var t=R(e);if(null===t.dt){t.dt=[];var n=an(t),r=rn(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new Nt(n)),t.dt.push(new Nt(ne.keyField(),"asc"));else{var i,a=!1,o=Object(u.a)(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.dt.push(s),s.field.isKeyField()&&(a=!0)}}catch(l){o.e(l)}finally{o.f()}if(!a){var c=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new Nt(ne.keyField(),c))}}}return t.dt}function sn(e){var t=R(e);if(!t._t)if("F"===t.limitType)t._t=Ht(t.path,t.collectionGroup,un(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Object(u.a)(un(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Nt(a.field,o))}}catch(l){i.e(l)}finally{i.f()}var s=t.endAt?new ht(t.endAt.position,t.endAt.inclusive):null,c=t.startAt?new ht(t.startAt.position,t.startAt.inclusive):null;t._t=Ht(t.path,t.collectionGroup,r,t.filters,t.limit,s,c)}return t._t}function cn(e,t){t.getFirstInequalityField(),an(e);var n=e.filters.concat([t]);return new Zt(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ln(e,t,n){return new Zt(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function fn(e,t){return Wt(sn(e),sn(t))&&e.limitType===t.limitType}function hn(e){return"".concat(Qt(sn(e)),"|lt:").concat(e.limitType)}function dn(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return _t(e)})).join(", "),"]")),Pe(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Ze(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Ze(e)})).join(",")),"Target(".concat(t,")")}(sn(e)),"; limitType=").concat(e.limitType,")")}function pn(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):re.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Object(u.a)(un(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Object(u.a)(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=dt(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,un(e),t))&&!(e.endAt&&!function(e,t,n){var r=dt(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,un(e),t))}(e,t)}function vn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function yn(e){return function(t,n){var r,i=!1,a=Object(u.a)(un(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=mn(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(c){a.e(c)}finally{a.f()}return 0}}function mn(e,t,n){var r=e.field.isKeyField()?re.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Xe(r,i):D()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return D()}}function gn(e,t){if(e.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Le(t)?"-0":t}}function bn(e){return{integerValue:""+e}}function kn(e,t){return Me(t)?bn(t):gn(e,t)}var wn=function e(){Object(p.a)(this,e),this._=void 0};function xn(e,t,n){return e instanceof Tn?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof En?Sn(e,t):e instanceof In?jn(e,t):function(e,t){var n=_n(e,t),r=Dn(n)+Dn(e.gt);return tt(n)&&tt(e.gt)?bn(r):gn(e.yt,r)}(e,t)}function On(e,t,n){return e instanceof En?Sn(e,t):e instanceof In?jn(e,t):n}function _n(e,t){return e instanceof Cn?tt(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Tn=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return n}(wn),En=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).elements=e,r}return n}(wn);function Sn(e,t){var n,r=An(t),i=Object(u.a)(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Ye(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var In=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).elements=e,r}return n}(wn);function jn(e,t){var n,r=An(t),i=Object(u.a)(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Ye(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Cn=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this)).yt=e,i.gt=r,i}return n}(wn);function Dn(e){return qe(e.integerValue||e.doubleValue)}function An(e){return nt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Nn=function e(t,n){Object(p.a)(this,e),this.field=t,this.transform=n};var Rn=function e(t,n){Object(p.a)(this,e),this.version=t,this.transformResults=n},Pn=function(){function e(t,n){Object(p.a)(this,e),this.updateTime=t,this.exists=n}return Object(v.a)(e,[{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}},{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Ln(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Mn=function e(){Object(p.a)(this,e)};function Fn(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new $n(e.key,Pn.none()):new zn(e.key,e.data,Pn.none());var n,r=e.data,i=qt.empty(),a=new Ft(ne.comparator),o=Object(u.a)(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var c=r.field(s);null===c&&s.length>1&&(s=s.popLast(),c=r.field(s)),null===c?i.delete(s):i.set(s,c),a=a.add(s)}}}catch(l){o.e(l)}finally{o.f()}return new Kn(e.key,i,new Bt(a.toArray()),Pn.none())}function Vn(e,t,n){e instanceof zn?function(e,t,n){var r=e.value.clone(),i=Hn(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Kn?function(e,t,n){if(Ln(e.precondition,t)){var r=Hn(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Gn(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Un(e,t,n,r){return e instanceof zn?function(e,t,n,r){if(!Ln(e.precondition,t))return n;var i=e.value.clone(),a=Qn(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Kn?function(e,t,n,r){if(!Ln(e.precondition,t))return n;var i=Qn(e.fieldTransforms,r,t),a=t.data;return a.setAll(Gn(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Ln(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Bn(e,t){var n,r=null,i=Object(u.a)(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=_n(a.transform,o||null);null!=s&&(null===r&&(r=qt.empty()),r.set(a.field,s))}}catch(c){i.e(c)}finally{i.f()}return r||null}function qn(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Y(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof En&&t instanceof En||e instanceof In&&t instanceof In?Y(e.elements,t.elements,Ye):e instanceof Cn&&t instanceof Cn?Ye(e.gt,t.gt):e instanceof Tn&&t instanceof Tn}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var zn=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Object(p.a)(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Object(v.a)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Mn),Kn=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Object(p.a)(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Object(v.a)(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Mn);function Gn(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Hn(e,t,n){var r=new Map;A(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,On(o,u,n[i]))}return r}function Qn(e,t,n){var r,i=new Map,a=Object(u.a)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,c=n.data.field(o.field);i.set(o.field,xn(s,c,t))}}catch(l){a.e(l)}finally{a.f()}return i}var Wn,Yn,$n=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Object(v.a)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Mn),Xn=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Object(v.a)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Mn),Jn=function e(t){Object(p.a)(this,e),this.count=t};function Zn(e){switch(e){default:return D();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function er(e){if(void 0===e)return I("GRPC error has no .code"),P.UNKNOWN;switch(e){case Wn.OK:return P.OK;case Wn.CANCELLED:return P.CANCELLED;case Wn.UNKNOWN:return P.UNKNOWN;case Wn.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case Wn.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case Wn.INTERNAL:return P.INTERNAL;case Wn.UNAVAILABLE:return P.UNAVAILABLE;case Wn.UNAUTHENTICATED:return P.UNAUTHENTICATED;case Wn.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case Wn.NOT_FOUND:return P.NOT_FOUND;case Wn.ALREADY_EXISTS:return P.ALREADY_EXISTS;case Wn.PERMISSION_DENIED:return P.PERMISSION_DENIED;case Wn.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case Wn.ABORTED:return P.ABORTED;case Wn.OUT_OF_RANGE:return P.OUT_OF_RANGE;case Wn.UNIMPLEMENTED:return P.UNIMPLEMENTED;case Wn.DATA_LOSS:return P.DATA_LOSS;default:return D()}}(Yn=Wn||(Wn={}))[Yn.OK=0]="OK",Yn[Yn.CANCELLED=1]="CANCELLED",Yn[Yn.UNKNOWN=2]="UNKNOWN",Yn[Yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yn[Yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yn[Yn.NOT_FOUND=5]="NOT_FOUND",Yn[Yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yn[Yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yn[Yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yn[Yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yn[Yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yn[Yn.ABORTED=10]="ABORTED",Yn[Yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yn[Yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yn[Yn.INTERNAL=13]="INTERNAL",Yn[Yn.UNAVAILABLE=14]="UNAVAILABLE",Yn[Yn.DATA_LOSS=15]="DATA_LOSS";var tr=function(){function e(t,n){Object(p.a)(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Object(v.a)(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Object(u.a)(n);try{for(i.s();!(r=i.n()).done;){var a=Object(o.a)(r.value,2),s=a[0],c=a[1];if(this.equalsFn(s,e))return c}}catch(l){i.e(l)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Ne(this.inner,(function(t,n){var r,i=Object(u.a)(n);try{for(i.s();!(r=i.n()).done;){var a=Object(o.a)(r.value,2),s=a[0],c=a[1];e(s,c)}}catch(l){i.e(l)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Re(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),nr=new Pt(re.comparator);function rr(){return nr}var ir=new Pt(re.comparator);function ar(){for(var e=ir,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function or(e){var t=ir;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function ur(){return cr()}function sr(){return cr()}function cr(){return new tr((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var lr=new Pt(re.comparator),fr=new Ft(re.comparator);function hr(){for(var e=fr,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var dr=new Ft(W);function pr(){return dr}var vr=function(){function e(t,n,r,i,a){Object(p.a)(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Object(v.a)(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,yr.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(J.min(),i,pr(),rr(),hr())}}]),e}(),yr=function(){function e(t,n,r,i,a){Object(p.a)(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Object(v.a)(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,hr(),hr(),hr())}}]),e}(),mr=function e(t,n,r,i){Object(p.a)(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i},gr=function e(t,n){Object(p.a)(this,e),this.targetId=t,this.Et=n},br=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ve.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(p.a)(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i},kr=function(){function e(){Object(p.a)(this,e),this.At=0,this.Rt=Or(),this.bt=Ve.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}return Object(v.a)(e,[{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}},{key:"Ct",value:function(){var e=hr(),t=hr(),n=hr();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:D()}})),new yr(this.bt,this.Pt,e,t,n)}},{key:"xt",value:function(){this.vt=!1,this.Rt=Or()}},{key:"Nt",value:function(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.vt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"Mt",value:function(){this.At-=1}},{key:"Ft",value:function(){this.vt=!0,this.Pt=!0}},{key:"current",get:function(){return this.Pt}},{key:"resumeToken",get:function(){return this.bt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.vt}}]),e}(),wr=function(){function e(t){Object(p.a)(this,e),this.$t=t,this.Bt=new Map,this.Lt=rr(),this.qt=xr(),this.Ut=new Ft(W)}return Object(v.a)(e,[{key:"Kt",value:function(e){var t,n=Object(u.a)(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(s){n.e(s)}finally{n.f()}var i,a=Object(u.a)(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(s){a.e(s)}finally{a.f()}}},{key:"jt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Wt(n);switch(e.state){case 0:t.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||t.removeTarget(n);break;case 3:t.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:t.zt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:D()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.zt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t=e.targetId,n=e.Et.count,r=this.Yt(t);if(r){var i=r.target;if(Yt(i))if(0===n){var a=new re(i.path);this.Qt(t,a,Kt.newNoDocument(a,J.min()))}else A(1===n);else this.Xt(t)!==n&&(this.Ht(t),this.Ut=this.Ut.add(t))}}},{key:"Zt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&Yt(a.target)){var o=new re(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,Kt.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=hr();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new vr(e,n,this.Ut,this.Lt,r);return this.Lt=rr(),this.qt=xr(),this.Ut=new Ft(W),i}},{key:"Gt",value:function(e,t){if(this.zt(e)){var n=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.zt(e)){var r=this.Wt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Xt",value:function(e){var t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.Wt(e).Ot()}},{key:"Wt",value:function(e){var t=this.Bt.get(e);return t||(t=new kr,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new Ft(W),this.qt=this.qt.insert(e,t)),t}},{key:"zt",value:function(e){var t=null!==this.Yt(e);return t||S("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new kr),this.$t.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}]),e}();function xr(){return new Pt(re.comparator)}function Or(){return new Pt(re.comparator)}var _r={asc:"ASCENDING",desc:"DESCENDING"},Tr={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Er={and:"AND",or:"OR"},Sr=function e(t,n){Object(p.a)(this,e),this.databaseId=t,this.wt=n};function Ir(e,t){return e.wt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function jr(e,t){return e.wt?t.toBase64():t.toUint8Array()}function Cr(e,t){return Ir(e,t.toTimestamp())}function Dr(e){return A(!!e),J.fromTimestamp(function(e){var t=Be(e);return new X(t.seconds,t.nanos)}(e))}function Ar(e,t){return function(e){return new ee(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Nr(e){var t=ee.fromString(e);return A(ei(t)),t}function Rr(e,t){return Ar(e.databaseId,t.path)}function Pr(e,t){var n=Nr(t);if(n.get(1)!==e.databaseId.projectId)throw new L(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new L(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new re(Vr(n))}function Lr(e,t){return Ar(e.databaseId,t)}function Mr(e){var t=Nr(e);return 4===t.length?ee.emptyPath():Vr(t)}function Fr(e){return new ee(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Vr(e){return A(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ur(e,t,n){return{name:Rr(e,t),fields:n.value.mapValue.fields}}function Br(e,t,n){var r=Pr(e,t.name),i=Dr(t.updateTime),a=t.createTime?Dr(t.createTime):J.min(),o=new qt({mapValue:{fields:t.fields}}),u=Kt.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function qr(e,t){return"found"in t?function(e,t){A(!!t.found),t.found.name,t.found.updateTime;var n=Pr(e,t.found.name),r=Dr(t.found.updateTime),i=t.found.createTime?Dr(t.found.createTime):J.min(),a=new qt({mapValue:{fields:t.found.fields}});return Kt.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){A(!!t.missing),A(!!t.readTime);var n=Pr(e,t.missing),r=Dr(t.readTime);return Kt.newNoDocument(n,r)}(e,t):D()}function zr(e,t){var n;if(t instanceof zn)n={update:Ur(e,t.key,t.value)};else if(t instanceof $n)n={delete:Rr(e,t.key)};else if(t instanceof Kn)n={update:Ur(e,t.key,t.data),updateMask:Zr(t.fieldMask)};else{if(!(t instanceof Xn))return D();n={verify:Rr(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Tn)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof En)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof In)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Cn)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw D()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Cr(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:D()}(e,t.precondition)),n}function Kr(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Pn.updateTime(Dr(e.updateTime)):void 0!==e.exists?Pn.exists(e.exists):Pn.none()}(t.currentDocument):Pn.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)A("REQUEST_TIME"===t.setToServerValue),n=new Tn;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new En(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new In(i)}else"increment"in t?n=new Cn(e,t.increment):D();var a=ne.fromServerFormat(t.fieldPath);return new Nn(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Pr(e,t.update.name),a=new qt({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Bt(t.map((function(e){return ne.fromServerFormat(e)})))}(t.updateMask);return new Kn(i,a,o,n,r)}return new zn(i,a,n,r)}if(t.delete){var u=Pr(e,t.delete);return new $n(u,n)}if(t.verify){var s=Pr(e,t.verify);return new Xn(s,n)}return D()}function Gr(e,t){return{documents:[Lr(e,t.path)]}}function Hr(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Lr(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Lr(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return function e(t){return t instanceof yt?function(e){if("=="===e.op){if(it(e.value))return{unaryFilter:{field:Xr(e.field),op:"IS_NAN"}};if(rt(e.value))return{unaryFilter:{field:Xr(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(it(e.value))return{unaryFilter:{field:Xr(e.field),op:"IS_NOT_NAN"}};if(rt(e.value))return{unaryFilter:{field:Xr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xr(e.field),op:Yr(e.op),value:e.value}}}(t):t instanceof mt?function(t){var n=t.getFilters().map((function(t){return e(t)}));return 1===n.length?n[0]:{compositeFilter:{op:$r(t.op),filters:n}}}(t):D()}(mt.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Xr(e.field),direction:Wr(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.wt||Pe(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Qr(e){var t=Mr(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){A(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=function e(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Jr(e.unaryFilter.field);return yt.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Jr(e.unaryFilter.field);return yt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Jr(e.unaryFilter.field);return yt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Jr(e.unaryFilter.field);return yt.create(i,"!=",{nullValue:"NULL_VALUE"});default:return D()}}(t):void 0!==t.fieldFilter?function(e){return yt.create(Jr(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return D()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return mt.create(t.compositeFilter.filters.map((function(t){return e(t)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return D()}}(t.compositeFilter.op))}(t):D()}(e);return t instanceof mt&&kt(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Nt(Jr(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Pe(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new ht(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new ht(n,t)}(n.endAt)),en(t,i,u,o,s,"F",c,l)}function Wr(e){return _r[e]}function Yr(e){return Tr[e]}function $r(e){return Er[e]}function Xr(e){return{fieldPath:e.canonicalString()}}function Jr(e){return ne.fromServerFormat(e.fieldPath)}function Zr(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function ei(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function ti(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=ri(t)),t=ni(e.get(n),t);return ri(t)}function ni(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function ri(e){return e+"\x01\x01"}function ii(e){var t=e.length;if(A(t>=2),2===t)return A("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ee.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&D(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:D()}a=o+2}return new ee(r)}var ai=["userId","batchId"];function oi(e,t){return[e,ti(t)]}function ui(e,t,n){return[e,ti(t),n]}var si={},ci=["prefixPath","collectionGroup","readTime","documentId"],li=["prefixPath","collectionGroup","documentId"],fi=["collectionGroup","readTime","prefixPath","documentId"],hi=["canonicalId","targetId"],di=["targetId","path"],pi=["path","targetId"],vi=["collectionId","parent"],yi=["indexId","uid"],mi=["uid","sequenceNumber"],gi=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bi=["indexId","uid","orderedDocumentKey"],ki=["userId","collectionPath","documentId"],wi=["userId","collectionPath","largestBatchId"],xi=["userId","collectionGroup","largestBatchId"],Oi=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),_i=[].concat(Object(d.a)(Oi),["documentOverlays"]),Ti=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ei=Ti,Si=[].concat(Ei,["indexConfiguration","indexState","indexEntries"]),Ii=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this)).se=e,i.currentSequenceNumber=r,i}return n}(pe);function ji(e,t){var n=R(e);return be.M(n.se,t)}var Ci=function(){function e(t,n,r,i){Object(p.a)(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Object(v.a)(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Vn(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Object(u.a)(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Un(i,e,t,this.localWriteTime))}}catch(c){r.e(c)}finally{r.f()}var a,o=Object(u.a)(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=Un(s,e,t,this.localWriteTime))}}catch(c){o.e(c)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=sr();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Fn(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(J.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),hr())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Y(this.mutations,e.mutations,(function(e,t){return qn(e,t)}))&&Y(this.baseMutations,e.baseMutations,(function(e,t){return qn(e,t)}))}}]),e}(),Di=function(){function e(t,n,r,i){Object(p.a)(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Object(v.a)(e,null,[{key:"from",value:function(t,n,r){A(t.mutations.length===r.length);for(var i=lr,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Ai=function(){function e(t,n){Object(p.a)(this,e),this.largestBatchId=t,this.mutation=n}return Object(v.a)(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Ni=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:J.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:J.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ve.EMPTY_BYTE_STRING;Object(p.a)(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Object(v.a)(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Ri=function e(t){Object(p.a)(this,e),this.ie=t};function Pi(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Li(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Rr(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Ir(e,t.version.toTimestamp()),createTime:Ir(e,t.createTime.toTimestamp())}}(e.ie,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Mi(t.version)};else{if(!t.isUnknownDocument())return D();r.unknownDocument={path:n.path.toArray(),version:Mi(t.version)}}return r}function Li(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Mi(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Fi(e){var t=new X(e.seconds,e.nanoseconds);return J.fromTimestamp(t)}function Vi(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Kr(e.ie,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Kr(e.ie,t)})),u=X.fromMillis(t.localWriteTimeMs);return new Ci(t.batchId,u,n,o)}function Ui(e){var t,n,r=Fi(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Fi(e.lastLimboFreeSnapshotVersion):J.min();return void 0!==e.query.documents?(A(1===(n=e.query).documents.length),t=sn(tn(Mr(n.documents[0])))):t=function(e){return sn(Qr(e))}(e.query),new Ni(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Ve.fromBase64String(e.resumeToken))}function Bi(e,t){var n,r=Mi(t.snapshotVersion),i=Mi(t.lastLimboFreeSnapshotVersion);n=Yt(t.target)?Gr(e.ie,t.target):Hr(e.ie,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Qt(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function qi(e){var t=Qr({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ln(t,t.limit,"L"):t}function zi(e,t){return new Ai(t.largestBatchId,Kr(e.ie,t.overlayMutation))}function Ki(e,t){var n=t.path.lastSegment();return[e,ti(t.path.popLast()),n]}function Gi(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Mi(r.readTime),documentKey:ti(r.documentKey.path),largestBatchId:r.largestBatchId}}var Hi=function(){function e(){Object(p.a)(this,e)}return Object(v.a)(e,[{key:"getBundleMetadata",value:function(e,t){return Qi(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Fi(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Qi(e).put({bundleId:(n=t).id,createTime:Mi(Dr(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Wi(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:qi(t.bundledQuery),readTime:Fi(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Wi(e).put(function(e){return{name:e.name,readTime:Mi(Dr(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Qi(e){return ji(e,"bundles")}function Wi(e){return ji(e,"namedQueries")}var Yi=function(){function e(t,n){Object(p.a)(this,e),this.yt=t,this.userId=n}return Object(v.a)(e,[{key:"getOverlay",value:function(e,t){var n=this;return $i(e).get(Ki(this.userId,t)).next((function(e){return e?zi(n.yt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=ur();return me.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Ai(t,a);i.push(r.oe(e,o))})),me.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(ti(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push($i(e).Y("collectionPathOverlayIndex",i))})),me.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=ur(),a=ti(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return $i(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=Object(u.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=zi(r.yt,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=ur(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $i(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=zi(a.yt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"oe",value:function(e,t){return $i(e).put(function(e,t,n){var r=Ki(t,n.mutation.key),i=Object(o.a)(r,3);i[0];return{userId:t,collectionPath:i[1],documentId:i[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:zr(e.ie,n.mutation)}}(this.yt,this.userId,t))}}],[{key:"re",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function $i(e){return ji(e,"documentOverlays")}var Xi=function(){function e(){Object(p.a)(this,e)}return Object(v.a)(e,[{key:"ue",value:function(e,t){this.ce(e,t),t.ae()}},{key:"ce",value:function(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(qe(e.integerValue));else if("doubleValue"in e){var n=qe(e.doubleValue);isNaN(n)?this.he(t,13):(this.he(t,15),Le(n)?t.le(0):t.le(n))}else if("timestampValue"in e){var r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe("".concat(r.seconds||"")),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(ze(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.he(t,45),t.le(i.latitude||0),t.le(i.longitude||0)}else"mapValue"in e?ut(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):D()}},{key:"de",value:function(e,t){this.he(t,25),this.pe(e,t)}},{key:"pe",value:function(e,t){t.fe(e)}},{key:"ge",value:function(e,t){var n=e.fields||{};this.he(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.de(a,t),this.ce(n[a],t)}}},{key:"ye",value:function(e,t){var n=e.values||[];this.he(t,50);var r,i=Object(u.a)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ce(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"me",value:function(e,t){var n=this;this.he(t,37),re.fromName(e).path.forEach((function(e){n.he(t,60),n.pe(e,t)}))}},{key:"he",value:function(e,t){e.le(t)}},{key:"_e",value:function(e){e.le(2)}}]),e}();function Ji(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Zi(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Ji(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Xi.Ie=new Xi;var ea=function(){function e(){Object(p.a)(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Object(v.a)(e,[{key:"Te",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ee(n.value),n=t.next();this.Ae()}},{key:"Re",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.be(n.value),n=t.next();this.Pe()}},{key:"ve",value:function(e){var t,n=Object(u.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ee(i);else if(i<2048)this.Ee(960|i>>>6),this.Ee(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ee(480|i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i);else{var a=r.codePointAt(0);this.Ee(240|a>>>18),this.Ee(128|63&a>>>12),this.Ee(128|63&a>>>6),this.Ee(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ae()}},{key:"Ve",value:function(e){var t,n=Object(u.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{var a=r.codePointAt(0);this.be(240|a>>>18),this.be(128|63&a>>>12),this.be(128|63&a>>>6),this.be(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Pe()}},{key:"Se",value:function(e){var t=this.De(e),n=Zi(t);this.Ce(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"xe",value:function(e){var t=this.De(e),n=Zi(t);this.Ce(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"Oe",value:function(){this.Me(255),this.Me(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Fe",value:function(){return this.buffer.slice(0,this.position)}},{key:"De",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ee",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}},{key:"be",value:function(e){var t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}},{key:"Ae",value:function(){this.ke(0),this.ke(1)}},{key:"Pe",value:function(){this.Me(0),this.Me(1)}},{key:"ke",value:function(e){this.Ce(1),this.buffer[this.position++]=e}},{key:"Me",value:function(e){this.Ce(1),this.buffer[this.position++]=~e}},{key:"Ce",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),ta=function(){function e(t){Object(p.a)(this,e),this.$e=t}return Object(v.a)(e,[{key:"we",value:function(e){this.$e.Te(e)}},{key:"fe",value:function(e){this.$e.ve(e)}},{key:"le",value:function(e){this.$e.Se(e)}},{key:"ae",value:function(){this.$e.Ne()}}]),e}(),na=function(){function e(t){Object(p.a)(this,e),this.$e=t}return Object(v.a)(e,[{key:"we",value:function(e){this.$e.Re(e)}},{key:"fe",value:function(e){this.$e.Ve(e)}},{key:"le",value:function(e){this.$e.xe(e)}},{key:"ae",value:function(){this.$e.Oe()}}]),e}(),ra=function(){function e(){Object(p.a)(this,e),this.$e=new ea,this.Be=new ta(this.$e),this.Le=new na(this.$e)}return Object(v.a)(e,[{key:"seed",value:function(e){this.$e.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Be:this.Le}},{key:"Fe",value:function(){return this.$e.Fe()}},{key:"reset",value:function(){this.$e.reset()}}]),e}(),ia=function(){function e(t,n,r,i){Object(p.a)(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Object(v.a)(e,[{key:"Ue",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function aa(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=oa(e.arrayValue,t.arrayValue))?n:0!==(n=oa(e.directionalValue,t.directionalValue))?n:re.comparator(e.documentKey,t.documentKey)}function oa(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var ua=function(){function e(t){Object(p.a)(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ke=t.orderBy,this.Ge=[];var n,r=Object(u.a)(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Qe=i:this.Ge.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Object(v.a)(e,[{key:"je",value:function(e){A(e.collectionGroup===this.collectionId);var t=ae(e);if(void 0!==t&&!this.We(t))return!1;for(var n=oe(e),r=0,i=0;r<n.length&&this.We(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Qe){var a=n[r];if(!this.ze(this.Qe,a)||!this.He(this.Ke[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ke.length||!this.He(this.Ke[i++],o))return!1}return!0}},{key:"We",value:function(e){var t,n=Object(u.a)(this.Ge);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.ze(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"ze",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"He",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function sa(e){if(0===e.getFilters().length)return[];var t=function e(t){if(A(t instanceof yt||t instanceof mt),t instanceof yt)return t;if(1===t.filters.length)return e(t.filters[0]);var n=t.filters.map((function(t){return e(t)})),r=mt.create(n,t.op);return fa(r=pa(r))?r:(A(r instanceof mt),A(gt(r)),A(r.filters.length>1),r.filters.reduce((function(e,t){return ha(e,t)})))}(function e(t){var n,r;if(A(t instanceof yt||t instanceof mt),t instanceof yt){if(t instanceof Ct){var i=(null===(r=null===(n=t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((function(e){return yt.create(t.field,"==",e)})))||[];return mt.create(i,"or")}return t}var a=t.filters.map((function(t){return e(t)}));return mt.create(a,t.op)}(e));return A(fa(t)),ca(t)||la(t)?[t]:t.getFilters()}function ca(e){return e instanceof yt}function la(e){return e instanceof mt&&kt(e)}function fa(e){return ca(e)||la(e)||function(e){if(e instanceof mt&&bt(e)){var t,n=Object(u.a)(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!ca(r)&&!la(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function ha(e,t){return A(e instanceof yt||e instanceof mt),A(t instanceof yt||t instanceof mt),pa(e instanceof yt?t instanceof yt?function(e,t){return mt.create([e,t],"and")}(e,t):da(e,t):t instanceof yt?da(t,e):function(e,t){if(A(e.filters.length>0&&t.filters.length>0),gt(e)&&gt(t))return Ot(e,t.getFilters());var n=bt(e)?e:t,r=bt(e)?t:e,i=n.filters.map((function(e){return ha(e,r)}));return mt.create(i,"or")}(e,t))}function da(e,t){if(gt(t))return Ot(t,e.getFilters());var n=t.filters.map((function(t){return ha(e,t)}));return mt.create(n,"or")}function pa(e){if(A(e instanceof yt||e instanceof mt),e instanceof yt)return e;var t=e.getFilters();if(1===t.length)return pa(t[0]);if(wt(e))return e;var n=t.map((function(e){return pa(e)})),r=[];return n.forEach((function(t){t instanceof yt?r.push(t):t instanceof mt&&(t.op===e.op?r.push.apply(r,Object(d.a)(t.filters)):r.push(t))})),1===r.length?r[0]:mt.create(r,e.op)}var va=function(){function e(){Object(p.a)(this,e),this.Je=new ya}return Object(v.a)(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Je.add(t),me.resolve()}},{key:"getCollectionParents",value:function(e,t){return me.resolve(this.Je.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return me.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return me.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return me.resolve(null)}},{key:"getIndexType",value:function(e,t){return me.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return me.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return me.resolve(null)}},{key:"getMinOffset",value:function(e,t){return me.resolve(fe.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return me.resolve(fe.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return me.resolve()}},{key:"updateIndexEntries",value:function(e,t){return me.resolve()}}]),e}(),ya=function(){function e(){Object(p.a)(this,e),this.index={}}return Object(v.a)(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ft(ee.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Ft(ee.comparator)).toArray()}}]),e}(),ma=new Uint8Array(0),ga=function(){function e(t,n){Object(p.a)(this,e),this.user=t,this.databaseId=n,this.Ye=new ya,this.Xe=new tr((function(e){return Qt(e)}),(function(e,t){return Wt(e,t)})),this.uid=t.uid||""}return Object(v.a)(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ye.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ye.add(t)}));var a={collectionId:r,parent:ti(i)};return ba(e).put(a)}return me.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[$(t),""],!1,!0);return ba(e).W(r).next((function(e){var r,i=Object(u.a)(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(ii(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=wa(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=xa(e);return a.next((function(e){o.put(Gi(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=wa(e),r=xa(e),i=ka(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=ka(e),i=!0,a=new Map;return me.forEach(this.Ze(t),(function(t){return n.tn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=hr(),o=[];return me.forEach(a,(function(i,a){var s;S("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Qt(t)));var c=function(e,t){var n=ae(t);if(void 0===n)return null;var r,i=Object(u.a)($t(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=new Map,i=Object(u.a)(oe(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=Object(u.a)($t(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var c=a.value;switch(c.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),c.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),c.value),Array.from(r.values())}}}catch(l){s.e(l)}finally{s.f()}}}catch(l){i.e(l)}finally{i.f()}return null}(a,i),f=function(e,t){var n,r=[],i=!0,a=Object(u.a)(oe(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?Xt(e,o.fieldPath,e.startAt):Jt(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(c){a.e(c)}finally{a.f()}return new ht(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=Object(u.a)(oe(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?Jt(e,o.fieldPath,e.endAt):Xt(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(c){a.e(c)}finally{a.f()}return new ht(r,i)}(a,i),d=n.en(i,a,f),p=n.en(i,a,h),v=n.nn(i,a,l),y=n.sn(i.indexId,c,d,f.inclusive,p,h.inclusive,v);return me.forEach(y,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=re.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return me.resolve(null)}))}},{key:"Ze",value:function(e){var t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:sa(mt.create(e.filters,"and")).map((function(t){return Ht(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.Xe.set(e,t),t)}},{key:"sn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.rn(t[s/c]):ma,h=u.on(e,f,n[s%c],r),p=u.un(e,f,i[s%c],a),v=o.map((function(t){return u.on(e,f,t,!0)}));l.push.apply(l,Object(d.a)(u.createRange(h,p,v)))},h=0;h<s;++h)f(h);return l}},{key:"on",value:function(e,t,n,r){var i=new ia(e,re.empty(),t,n);return r?i:i.Ue()}},{key:"un",value:function(e,t,n,r){var i=new ia(e,re.empty(),t,n);return r?i.Ue():i}},{key:"tn",value:function(e,t){var n=new ua(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Object(u.a)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.je(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.Ze(t);return me.forEach(i,(function(t){return n.tn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Ft(ne.comparator),r=!1,i=Object(u.a)(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=t.value,s=Object(u.a)(o.getFlattenedFilters());try{for(s.s();!(a=s.n()).done;){var c=a.value;c.field.isKeyField()||("array-contains"===c.op||"array-contains-any"===c.op?r=!0:n=n.add(c.field))}}catch(d){s.e(d)}finally{s.f()}}}catch(d){i.e(d)}finally{i.f()}var l,f=Object(u.a)(e.orderBy);try{for(f.s();!(l=f.n()).done;){var h=l.value;h.field.isKeyField()||(n=n.add(h.field))}}catch(d){f.e(d)}finally{f.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"cn",value:function(e,t){var n,r=new ra,i=Object(u.a)(oe(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.qe(a.kind);Xi.Ie.ue(o,s)}}catch(c){i.e(c)}finally{i.f()}return r.Fe()}},{key:"rn",value:function(e){var t=new ra;return Xi.Ie.ue(e,t.qe(0)),t.Fe()}},{key:"an",value:function(e,t){var n=new ra;return Xi.Ie.ue(et(this.databaseId,t),n.qe(function(e){var t=oe(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Fe()}},{key:"nn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new ra);var i,a=0,o=Object(u.a)(oe(e));try{for(o.s();!(i=o.n()).done;){var s,c=i.value,l=n[a++],f=Object(u.a)(r);try{for(f.s();!(s=f.n()).done;){var h=s.value;if(this.hn(t,c.fieldPath)&&nt(l))r=this.ln(r,c,l);else{var d=h.qe(c.kind);Xi.Ie.ue(l,d)}}}catch(p){f.e(p)}finally{f.f()}}}catch(p){o.e(p)}finally{o.f()}return this.fn(r)}},{key:"en",value:function(e,t,n){return this.nn(e,t,n.position)}},{key:"fn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Fe();return t}},{key:"ln",value:function(e,t,n){var r,i=Object(d.a)(e),a=[],o=Object(u.a)(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,c=r.value,l=Object(u.a)(i);try{for(l.s();!(s=l.n()).done;){var f=s.value,h=new ra;h.seed(f.Fe()),Xi.Ie.ue(c,h.qe(t.kind)),a.push(h)}}catch(p){l.e(p)}finally{l.f()}}}catch(p){o.e(p)}finally{o.f()}return a}},{key:"hn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof yt&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=wa(e),i=xa(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return me.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new se(t.sequenceNumber,new fe(Fi(t.readTime),new re(ii(t.documentKey)),t.largestBatchId)):se.empty(),r=e.fields.map((function(e){var t=Object(o.a)(e,2),n=t[0],r=t[1];return new ue(ne.fromServerFormat(n),r)}));return new ie(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:W(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=wa(e),a=xa(e);return this.dn(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return me.forEach(t,(function(t){return a.put(Gi(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return me.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?me.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),me.forEach(a,(function(r){return n._n(e,t,r).next((function(t){var a=n.wn(i,r);return t.isEqual(a)?me.resolve():n.mn(e,i,r,t,a)}))}))}))}))}},{key:"gn",value:function(e,t,n,r){return ka(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.an(n,t.key),documentKey:t.key.path.toArray()})}},{key:"yn",value:function(e,t,n,r){return ka(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.an(n,t.key),t.key.path.toArray()])}},{key:"_n",value:function(e,t,n){var r=ka(e),i=new Ft(aa);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.an(n,t)])},(function(e,r){i=i.add(new ia(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"wn",value:function(e,t){var n=new Ft(aa),r=this.cn(t,e);if(null==r)return n;var i=ae(t);if(null!=i){var a=e.data.field(i.fieldPath);if(nt(a)){var o,s=Object(u.a)(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var c=o.value;n=n.add(new ia(t.indexId,e.key,this.rn(c),r))}}catch(l){s.e(l)}finally{s.f()}}}else n=n.add(new ia(t.indexId,e.key,ma,r));return n}},{key:"mn",value:function(e,t,n,r,i){var a=this;S("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Ut(a),s=Ut(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Ut(o)):l?(i(u),u=Ut(a)):(u=Ut(a),s=Ut(o))}}(r,i,aa,(function(r){o.push(a.gn(e,t,n,r))}),(function(r){o.push(a.yn(e,t,n,r))})),me.waitFor(o)}},{key:"dn",value:function(e){var t=1;return xa(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return aa(e,t)})).filter((function(e,t,n){return!t||0!==aa(e,n[t-1])}));var r=[];r.push(e);var i,a=Object(u.a)(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=aa(o,e),c=aa(o,t);if(0===s)r[0]=e.Ue();else if(s>0&&c<0)r.push(o),r.push(o.Ue());else if(c>0)break}}catch(p){a.e(p)}finally{a.f()}r.push(t);for(var l=[],f=0;f<r.length;f+=2){if(this.pn(r[f],r[f+1]))return[];var h=[r[f].indexId,this.uid,r[f].arrayValue,r[f].directionalValue,ma,[]],d=[r[f+1].indexId,this.uid,r[f+1].arrayValue,r[f+1].directionalValue,ma,[]];l.push(IDBKeyRange.bound(h,d))}return l}},{key:"pn",value:function(e,t){return aa(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Oa)}},{key:"getMinOffset",value:function(e,t){var n=this;return me.mapArray(this.Ze(t),(function(t){return n.tn(e,t).next((function(e){return e||D()}))})).next(Oa)}}]),e}();function ba(e){return ji(e,"collectionParents")}function ka(e){return ji(e,"indexEntries")}function wa(e){return ji(e,"indexConfiguration")}function xa(e){return ji(e,"indexState")}function Oa(e){A(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;he(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new fe(t.readTime,t.documentKey,n)}var _a={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ta=function(){function e(t,n,r){Object(p.a)(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Object(v.a)(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Ea(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,c=r.Z({range:o},(function(e,t,n){return s++,n.delete()}));a.push(c.next((function(){A(1===s)})));var l,f=[],h=Object(u.a)(n.mutations);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=ui(t,d.key.path,n.batchId);a.push(i.delete(p)),f.push(d.key)}}catch(v){h.e(v)}finally{h.f()}return me.waitFor(a).next((function(){return f}))}function Sa(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw D();t=e.noDocument}return JSON.stringify(t).length}Ta.DEFAULT_COLLECTION_PERCENTILE=10,Ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ta.DEFAULT=new Ta(41943040,Ta.DEFAULT_COLLECTION_PERCENTILE,Ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ta.DISABLED=new Ta(-1,0,0);var Ia=function(){function e(t,n,r,i){Object(p.a)(this,e),this.userId=t,this.yt=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return Object(v.a)(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ca(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Da(e),o=Ca(e);return o.add({}).next((function(s){A("number"==typeof s);var c,l=new Ci(s,t,n,r),f=function(e,t,n){var r=n.baseMutations.map((function(t){return zr(e.ie,t)})),i=n.mutations.map((function(t){return zr(e.ie,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.yt,i.userId,l),h=[],d=new Ft((function(e,t){return W(e.canonicalString(),t.canonicalString())})),p=Object(u.a)(r);try{for(p.s();!(c=p.n()).done;){var v=c.value,y=ui(i.userId,v.key.path,s);d=d.add(v.key.path.popLast()),h.push(o.put(f)),h.push(a.put(y,si))}}catch(m){p.e(m)}finally{p.f()}return d.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[s]=l.keys()})),me.waitFor(h).next((function(){return l}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Ca(e).get(t).next((function(e){return e?(A(e.userId===n.userId),Vi(n.yt,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?me.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Ca(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(A(t.batchId>=r),a=Vi(n.yt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ca(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ca(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return Vi(t.yt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=oi(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Da(e).Z({range:i},(function(r,i,u){var s=Object(o.a)(r,3),c=s[0],l=s[1],f=s[2],h=ii(l);if(c===n.userId&&t.path.isEqual(h))return Ca(e).get(f).next((function(e){if(!e)throw D();A(e.userId===n.userId),a.push(Vi(n.yt,e))}));u.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Ft(W),i=[];return t.forEach((function(t){var a=oi(n.userId,t.path),u=IDBKeyRange.lowerBound(a),s=Da(e).Z({range:u},(function(e,i,a){var u=Object(o.a)(e,3),s=u[0],c=u[1],l=u[2],f=ii(c);s===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(s)})),me.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=oi(this.userId,r),u=IDBKeyRange.lowerBound(a),s=new Ft(W);return Da(e).Z({range:u},(function(e,t,a){var u=Object(o.a)(e,3),c=u[0],l=u[1],f=u[2],h=ii(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):a.done()})).next((function(){return n.En(e,s)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Ca(e).get(t).next((function(e){if(null===e)throw D();A(e.userId===n.userId),r.push(Vi(n.yt,e))})))})),me.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Ea(e.se,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),me.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return me.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Da(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=ii(e[1]);i.push(a)}else r.done()})).next((function(){A(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return ja(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return Aa(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"re",value:function(t,n,r,i){return A(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function ja(e,t,n){var r=oi(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),u=!1;return Da(e).Z({range:a,X:!0},(function(e,n,r){var a=Object(o.a)(e,3),s=a[0],c=a[1];a[2];s===t&&c===i&&(u=!0),r.done()})).next((function(){return u}))}function Ca(e){return ji(e,"mutations")}function Da(e){return ji(e,"documentMutations")}function Aa(e){return ji(e,"mutationQueues")}var Na=function(){function e(t){Object(p.a)(this,e),this.bn=t}return Object(v.a)(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),Ra=function(){function e(t,n){Object(p.a)(this,e),this.referenceDelegate=t,this.yt=n}return Object(v.a)(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new Na(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return J.fromTimestamp(new X(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Pa(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return A(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Pa(e).Z((function(o,u){var s=Ui(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return me.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Pa(e).Z((function(e,n){var r=Ui(n);t(r)}))}},{key:"Vn",value:function(e){return La(e).get("targetGlobalKey").next((function(e){return A(null!==e),e}))}},{key:"Sn",value:function(e,t){return La(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return Pa(e).put(Bi(this.yt,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Qt(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Pa(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Ui(n);Wt(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Ma(e);return t.forEach((function(t){var o=ti(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),me.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Ma(e);return me.forEach(t,(function(t){var a=ti(t.path);return me.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Ma(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Ma(e),i=hr();return r.Z({range:n,X:!0},(function(e,t,n){var r=ii(e[1]),a=new re(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=ti(t.path),r=IDBKeyRange.bound([n],[$(n)],!1,!0),i=0;return Ma(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=Object(o.a)(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ne",value:function(e,t){return Pa(e).get(t).next((function(e){return e?Ui(e):null}))}}]),e}();function Pa(e){return ji(e,"targets")}function La(e){return ji(e,"targetGlobal")}function Ma(e){return ji(e,"targetDocuments")}function Fa(e,t){var n=Object(o.a)(e,2),r=n[0],i=n[1],a=Object(o.a)(t,2),u=a[0],s=a[1],c=W(r,u);return 0===c?W(i,s):c}var Va=function(){function e(t){Object(p.a)(this,e),this.xn=t,this.buffer=new Ft(Fa),this.Nn=0}return Object(v.a)(e,[{key:"kn",value:function(){return++this.Nn}},{key:"On",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Fa(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Ua=function(){function e(t,n,r){Object(p.a)(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Mn=null}return Object(v.a)(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}},{key:"Fn",value:function(e){var t=this;S("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Mn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!xe(e.t0)){e.next=12;break}S("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,ve(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}},{key:"started",get:function(){return null!==this.Mn}}]),e}(),Ba=function(){function e(t,n){Object(p.a)(this,e),this.$n=t,this.params=n}return Object(v.a)(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return me.resolve(je.at);var r=new Va(t);return this.$n.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(S("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(_a)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(S("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),_a):n.qn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"qn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(S("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),T()<=g.a.DEBUG&&S("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),me.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),qa=function(){function e(t,n){Object(p.a)(this,e),this.db=t,this.garbageCollector=function(e,t){return new Ba(e,t)}(this,n)}return Object(v.a)(e,[{key:"Bn",value:function(e){var t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Un",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return za(e,n)}},{key:"removeReference",value:function(e,t,n){return za(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return za(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return Aa(e).tt((function(r){return ja(e,r,t).next((function(e){return e&&(n=!0),me.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,(function(o,u){if(u<=t){var s=n.Gn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,J.min()),Ma(e).delete([0,ti(o.path)])}))}));i.push(s)}})).next((function(){return me.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return za(e,t)}},{key:"Kn",value:function(e,t){var n,r=Ma(e),i=je.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=Object(o.a)(e,2),u=a[0],s=(a[1],r.path),c=r.sequenceNumber;0===u?(i!==je.at&&t(new re(ii(n)),i),i=c,n=s):i=je.at})).next((function(){i!==je.at&&t(new re(ii(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function za(e,t){return Ma(e).put(function(e,t){return{targetId:0,path:ti(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Ka=function(){function e(){Object(p.a)(this,e),this.changes=new tr((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Object(v.a)(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?me.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Ga=function(){function e(t){Object(p.a)(this,e),this.yt=t}return Object(v.a)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Ya(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Ya(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Li(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Kt.newInvalidDocument(t);return Ya(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only($a(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:Kt.newInvalidDocument(t)};return Ya(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only($a(t))},(function(e,i){r={document:n.jn(t,i),size:Sa(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=rr();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=rr(),i=new Pt(re.comparator);return this.zn(e,t,(function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,Sa(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return me.resolve();var r=new Ft(Ja);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound($a(r.first()),$a(r.last())),a=r.getIterator(),o=a.getNext();return Ya(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=re.fromSegments([].concat(Object(d.a)(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Ja(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j($a(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Li(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ya(e).W(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=rr(),i=Object(u.a)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.jn(re.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(s){i.e(s)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=rr(),o=Xa(t,n),u=Xa(t,fe.max());return Ya(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.jn(re.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Qa(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Wa(e).get("remoteDocumentGlobalKey").next((function(e){return A(!!e),e}))}},{key:"Qn",value:function(e,t){return Wa(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Br(e.ie,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=re.fromSegments(t.noDocument.path),i=Fi(t.noDocument.readTime);n=Kt.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return D();var a=re.fromSegments(t.unknownDocument.path),o=Fi(t.unknownDocument.version);n=Kt.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new X(e[0],e[1]);return J.fromTimestamp(t)}(t.readTime)),n}(this.yt,t);if(!n.isNoDocument()||!n.version.isEqual(J.min()))return n}return Kt.newInvalidDocument(e)}}]),e}();function Ha(e){return new Ga(e)}var Qa=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new tr((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Object(v.a)(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Ft((function(e,t){return W(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Pi(t.Yn.yt,o);i=i.add(a.path.popLast());var c=Sa(s);r+=c-u.size,n.push(t.Yn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Pi(t.Yn.yt,o.convertToNoDocument(J.min()));n.push(t.Yn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),me.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Ka);function Wa(e){return ji(e,"remoteDocumentGlobal")}function Ya(e){return ji(e,"remoteDocumentsV14")}function $a(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Xa(e,t){var n=t.documentKey.path.toArray();return[e,Li(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ja(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=W(n[a],r[a]))return i;return(i=W(n.length,r.length))||((i=W(n[n.length-2],r[r.length-2]))||W(n[n.length-1],r[r.length-1]))}var Za=function e(t,n){Object(p.a)(this,e),this.overlayedDocument=t,this.mutatedFields=n},eo=function(){function e(t,n,r,i){Object(p.a)(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return Object(v.a)(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Un(r.mutation,e,Bt.empty(),X.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,hr()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hr(),i=ur();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=ar();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=ur();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,hr())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=rr(),a=cr(),o=cr();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Kn)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),Un(o.mutation,t,o.mutation.getFieldMask(),X.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Za(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=cr(),i=new Pt((function(e,t){return e-t})),a=hr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Object(u.a)(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Bt.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||hr()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=sr();c.forEach((function(e){if(!a.has(e)){var n=Fn(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return me.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return re.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):on(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):me.resolve(ur()),u=-1,s=a;return o.next((function(t){return me.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?me.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,hr())})).next((function(e){return{batchId:u,changes:or(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new re(t)).next((function(e){var t=ar();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=ar();return this.indexManager.getCollectionParents(e,i).next((function(o){return me.forEach(o,(function(o){var u=function(e,t){return new Zt(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,Kt.newInvalidDocument(n)))}));var n=ar();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&Un(a.mutation,i,Bt.empty(),X.now()),pn(t,i)&&(n=n.insert(r,i))})),n}))}}]),e}(),to=function(){function e(t){Object(p.a)(this,e),this.yt=t,this.Zn=new Map,this.ts=new Map}return Object(v.a)(e,[{key:"getBundleMetadata",value:function(e,t){return me.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:Dr(n.createTime)}),me.resolve()}},{key:"getNamedQuery",value:function(e,t){return me.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:qi(e.bundledQuery),readTime:Dr(e.readTime)}}(t)),me.resolve()}}]),e}(),no=function(){function e(){Object(p.a)(this,e),this.overlays=new Pt(re.comparator),this.es=new Map}return Object(v.a)(e,[{key:"getOverlay",value:function(e,t){return me.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=ur();return me.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.oe(e,t,i)})),me.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),me.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=ur(),i=t.length+1,a=new re(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return me.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Pt((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=ur(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=ur(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return me.resolve(s)}},{key:"oe",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Ai(t,n));var a=this.es.get(t);void 0===a&&(a=hr(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),ro=function(){function e(){Object(p.a)(this,e),this.ns=new Ft(io.ss),this.rs=new Ft(io.os)}return Object(v.a)(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new io(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new io(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new re(new ee([])),r=new io(n,e),i=new io(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new re(new ee([])),n=new io(t,e),r=new io(t,e+1),i=hr();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new io(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),io=function(){function e(t,n){Object(p.a)(this,e),this.key=t,this._s=n}return Object(v.a)(e,null,[{key:"ss",value:function(e,t){return re.comparator(e.key,t.key)||W(e._s,t._s)}},{key:"os",value:function(e,t){return W(e._s,t._s)||re.comparator(e.key,t.key)}}]),e}(),ao=function(){function e(t,n){Object(p.a)(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Ft(io.ss)}return Object(v.a)(e,[{key:"checkEmpty",value:function(e){return me.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Ci(i,t,n,r);this.mutationQueue.push(a);var o,s=Object(u.a)(r);try{for(s.s();!(o=s.n()).done;){var c=o.value;this.gs=this.gs.add(new io(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast())}}catch(l){s.e(l)}finally{s.f()}return me.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return me.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return me.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return me.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return me.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new io(t,0),i=new io(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),me.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Ft(W);return t.forEach((function(e){var t=new io(e,0),i=new io(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),me.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;re.isDocumentKey(i)||(i=i.child(""));var a=new io(new re(i),0),o=new Ft(W);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),me.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;A(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return me.forEach(t.mutations,(function(i){var a=new io(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new io(t,0),r=this.gs.firstAfterOrEqual(n);return me.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,me.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),oo=function(){function e(t){Object(p.a)(this,e),this.Es=t,this.docs=new Pt(re.comparator),this.size=0}return Object(v.a)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return me.resolve(n?n.document.mutableCopy():Kt.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=rr();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Kt.newInvalidDocument(e))})),me.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=rr(),i=new re(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||he(le(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return me.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){D()}},{key:"As",value:function(e,t){return me.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new uo(this)}},{key:"getSize",value:function(e){return me.resolve(this.size)}}]),e}(),uo=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).Yn=e,r}return Object(v.a)(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),me.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(Ka),so=function(){function e(t){Object(p.a)(this,e),this.persistence=t,this.Rs=new tr((function(e){return Qt(e)}),Wt),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.bs=0,this.Ps=new ro,this.targetCount=0,this.vs=Na.Pn()}return Object(v.a)(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),me.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return me.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return me.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),me.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),me.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new Na(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,me.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),me.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,me.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),me.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return me.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return me.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),me.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),me.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),me.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return me.resolve(n)}},{key:"containsKey",value:function(e,t){return me.resolve(this.Ps.containsKey(t))}}]),e}(),co=function(){function e(t,n){var r=this;Object(p.a)(this,e),this.Vs={},this.overlays={},this.Ss=new je(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new so(this),this.indexManager=new va,this.remoteDocumentCache=new oo((function(e){return r.referenceDelegate.xs(e)})),this.yt=new Ri(n),this.Ns=new to(this.yt)}return Object(v.a)(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new no,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new ao(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;S("MemoryPersistence","Starting transaction:",e);var i=new lo(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return me.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}},{key:"started",get:function(){return this.Ds}}]),e}(),lo=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return n}(pe),fo=function(){function e(t){Object(p.a)(this,e),this.persistence=t,this.Fs=new ro,this.$s=null}return Object(v.a)(e,[{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),me.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),me.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),me.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Ls,(function(r){var i=re.fromPath(r);return t.qs(e,i).next((function(e){e||n.removeEntry(i,J.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.qs(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"qs",value:function(e,t){var n=this;return me.or([function(){return me.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}},{key:"Ls",get:function(){if(this.$s)return this.$s;throw D()}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),ho=function(){function e(t){Object(p.a)(this,e),this.yt=t}return Object(v.a)(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new ge("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ai,{unique:!0}),e.createObjectStore("documentMutations")}(e),po(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=me.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),po(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:J.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ai,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return me.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Us(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Gs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.js(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:ki});t.createIndex("collectionPathOverlayIndex",wi,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",xi,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:ci});t.createIndex("documentKeyIndex",li),t.createIndex("collectionGroupIndex",fi)}(e)})).next((function(){return i.Ws(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.zs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:yi}).createIndex("sequenceNumberIndex",mi,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:gi}).createIndex("documentKeyIndex",bi,{unique:!1})}(e)}))),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=Sa(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Us",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return me.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return me.forEach(r,(function(r){A(r.userId===n.userId);var i=Vi(t.yt,r);return Ea(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new ee(n),o=function(e){return[0,ti(e)]}(a);r.push(t.get(o).next((function(n){return n?me.resolve():function(n){return t.put({targetId:0,path:ti(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return me.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:vi});var n=t.store("collectionParents"),r=new ya,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:ti(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new ee(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=Object(o.a)(e,3),r=(n[0],n[1]),a=(n[2],ii(r));return i(a.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=Ui(r),a=Bi(t.yt,i);return n.put(a)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new re(ee.fromString(i.document.name).popFirst(5)):i.noDocument?re.fromSegments(i.noDocument.path):i.unknownDocument?re.fromSegments(i.unknownDocument.path):D()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return me.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=Ha(this.yt),a=new co(fo.Bs,this.yt.ie);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:hr();Vi(n.yt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),me.forEach(r,(function(e,r){var o=new x(r),u=Yi.re(n.yt,o),s=a.getIndexManager(o),c=Ia.re(o,n.yt,s,a.referenceDelegate);return new eo(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Ii(t,je.at),e).next()}))}))}}]),e}();function po(e){e.createObjectStore("targetDocuments",{keyPath:di}).createIndex("documentTargetsIndex",pi,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hi,{unique:!0}),e.createObjectStore("targetGlobal")}var vo="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",yo=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(Object(p.a)(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=u,this.Js=c,this.Ys=l,this.Xs=f,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new L(P.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qa(this,i),this.ii=n+"main",this.yt=new Ri(s),this.ri=new be(this.ii,this.Xs,new ho(this.yt)),this.Cs=new Ra(this.referenceDelegate,this.yt),this.remoteDocumentCache=Ha(this.yt),this.Ns=new Hi,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&I("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Object(v.a)(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new L(P.FAILED_PRECONDITION,vo);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new je(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=Object(l.a)(c.a.mark((function n(r){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=Object(l.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return go(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(xe(t))return S("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return S("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return mo(e).get("owner").next((function(e){return me.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return go(e).delete(this.clientId)}},{key:"yi",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,n,r,i,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=ji(e,"clientMetadata");return t.W().next((function(e){var n=a.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return me.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=Object(u.a)(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?me.resolve(!0):mo(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new L(P.FAILED_PRECONDITION,vo);return!1}}return!(!t.networkEnabled||!t.inForeground)||go(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&S("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Ii(e,je.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return go(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"getMutationQueue",value:function(e,t){return Ia.re(e,this.yt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new ga(e,this.yt.ie.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Yi.re(this.yt,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;S("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Xs)?Si:14===i?Ei:13===i?Ti:12===i?_i:11===i?Oi:void D();return this.ri.runTransaction(e,o,u,(function(i){return a=new Ii(i,r.Ss?r.Ss.next():je.at),"readwrite-primary"===t?r.fi(a).next((function(e){return!!e||r.di(a)})).next((function(t){if(!t)throw I("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new L(P.FAILED_PRECONDITION,de);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Vi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return mo(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new L(P.FAILED_PRECONDITION,vo)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return mo(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=mo(e);return n.get("owner").next((function(e){return t.mi(e)?(S("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):me.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(I("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),Object(b.t)()&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return S("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return I("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){I("Failed to set zombie client id.",e)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}},{key:"started",get:function(){return this.Ds}}],[{key:"C",value:function(){return be.C()}}]),e}();function mo(e){return ji(e,"owner")}function go(e){return ji(e,"clientMetadata")}function bo(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var ko=function(){function e(t,n,r,i){Object(p.a)(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return Object(v.a)(e,null,[{key:"Ci",value:function(t,n){var r,i=hr(),a=hr(),o=Object(u.a)(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(c){o.e(c)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),wo=function(){function e(){Object(p.a)(this,e),this.xi=!1}return Object(v.a)(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(nn(t))return me.resolve(null);var r=sn(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=ln(t,null,"F"),r=sn(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=hr.apply(void 0,Object(d.a)(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,ln(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return nn(t)||r.isEqual(J.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(T()<=g.a.DEBUG&&S("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),dn(t)),i.Bi(e,o,t,ce(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new Ft(yn(e));return t.forEach((function(t,r){pn(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return T()<=g.a.DEBUG&&S("QueryEngine","Using full collection scan to execute query:",dn(t)),this.Ni.getDocumentsMatchingQuery(e,t,fe.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),xo=function(){function e(t,n,r,i){Object(p.a)(this,e),this.persistence=t,this.Li=n,this.yt=i,this.qi=new Pt(W),this.Ui=new tr((function(e){return Qt(e)}),Wt),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return Object(v.a)(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eo(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qi)}))}}]),e}();function Oo(e,t,n,r){return new xo(e,t,n,r)}function _o(e,t){return To.apply(this,arguments)}function To(){return(To=Object(l.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=R(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=hr(),c=Object(u.a)(t);try{for(c.s();!(i=c.n()).done;){var l=i.value;a.push(l.batchId);var f,h=Object(u.a)(l.mutations);try{for(h.s();!(f=h.n()).done;){var d=f.value;s=s.add(d.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){c.e(k)}finally{c.f()}var p,v=Object(u.a)(n);try{for(v.s();!(p=v.n()).done;){var y=p.value;o.push(y.batchId);var m,g=Object(u.a)(y.mutations);try{for(g.s();!(m=g.n()).done;){var b=m.value;s=s.add(b.key)}}catch(k){g.e(k)}finally{g.f()}}}catch(k){v.e(k)}finally{v.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Eo(e,t){var n=R(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=me.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);A(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=hr(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function So(e){var t=R(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function Io(e,t){var n=R(e),r=t.snapshotVersion,i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Ve.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var u=rr(),s=hr();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(jo(e,a,t.documentUpdates).next((function(e){u=e.Wi,s=e.zi}))),!r.isEqual(J.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return me.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.qi=i,e}))}function jo(e,t,n){var r=hr(),i=hr();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=rr();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(J.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):S("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function Co(e,t){var n=R(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Do(e,t){var n=R(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,me.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new Ni(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qi=n.qi.insert(e.targetId,e),n.Ui.set(t,e.targetId)),e}))}function Ao(e,t,n){return No.apply(this,arguments)}function No(){return(No=Object(l.a)(c.a.mark((function e(t,n,r){var i,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=R(t),a=i.qi.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),xe(e.t1)){e.next=12;break}throw e.t1;case 12:S("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qi=i.qi.remove(n),i.Ui.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function Ro(e,t,n){var r=R(e),i=J.min(),a=hr();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=R(e),i=r.Ui.get(n);return void 0!==i?me.resolve(r.qi.get(i)):r.Cs.getTargetData(t,n)}(r,e,sn(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:J.min(),n?a:hr())})).next((function(e){return Mo(r,vn(t),e),{documents:e,Hi:a}}))}))}function Po(e,t){var n=R(e),r=R(n.Cs),i=n.qi.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ne(e,t).next((function(e){return e?e.target:null}))}))}function Lo(e,t){var n=R(e),r=n.Ki.get(t)||J.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,ce(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Mo(n,t,e),e}))}function Mo(e,t,n){var r=e.Ki.get(t)||J.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function Fo(e,t,n,r){return Vo.apply(this,arguments)}function Vo(){return(Vo=Object(l.a)(c.a.mark((function e(t,n,r,i){var a,o,s,l,f,h,d,p,v,y;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=R(t),o=hr(),s=rr(),l=Object(u.a)(r);try{for(l.s();!(f=l.n()).done;)h=f.value,d=n.Ji(h.metadata.name),h.document&&(o=o.add(d)),(p=n.Yi(h)).setReadTime(n.Xi(h.metadata.readTime)),s=s.insert(d,p)}catch(c){l.e(c)}finally{l.f()}return v=a.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,Do(a,function(e){return sn(tn(ee.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return y=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return jo(e,v,s).next((function(t){return v.apply(e),t})).next((function(t){return a.Cs.removeMatchingKeysForTargetId(e,y.targetId).next((function(){return a.Cs.addMatchingKeys(e,o,y.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uo(e,t){return Bo.apply(this,arguments)}function Bo(){return(Bo=Object(l.a)(c.a.mark((function e(t,n){var r,i,a,o=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:hr(),e.next=3,Do(t,sn(qi(n.bundledQuery)));case 3:return i=e.sent,a=R(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Dr(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ns.saveNamedQuery(e,n);var o=i.withResumeToken(Ve.EMPTY_BYTE_STRING,t);return a.qi=a.qi.insert(o.targetId,o),a.Cs.updateTargetData(e,o).next((function(){return a.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qo(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function zo(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Ko(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Go=function(){function e(t,n,r,i){Object(p.a)(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Object(v.a)(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new L(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(I("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Ho=function(){function e(t,n,r){Object(p.a)(this,e),this.targetId=t,this.state=n,this.error=r}return Object(v.a)(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new L(i.error.code,i.error.message))),a?new e(t,i.state,r):(I("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Qo=function(){function e(t,n){Object(p.a)(this,e),this.clientId=t,this.activeTargetIds=n}return Object(v.a)(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=pr(),o=0;i&&o<r.activeTargetIds.length;++o)i=Me(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(I("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Wo=function(){function e(t,n){Object(p.a)(this,e),this.clientId=t,this.onlineState=n}return Object(v.a)(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(I("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Yo=function(){function e(){Object(p.a)(this,e),this.activeTargetIds=pr()}return Object(v.a)(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),$o=function(){function e(t,n,r,i,a){Object(p.a)(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Pt(W),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=qo(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new Yo),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return Object(v.a)(e,[{key:"start",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,n,r,i,a,o,s,l,f,h,d,p=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=Object(u.a)(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(qo(this.persistenceKey,i)))&&(o=Qo.Zi(i,a))&&(this.ur=this.ur.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(s=this.storage.getItem(this.wr))&&(l=this.yr(s))&&this.pr(l),f=Object(u.a)(this.cr);try{for(f.s();!(h=f.n()).done;)d=h.value,this.rr(d)}catch(c){f.e(c)}finally{f.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return p.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Ko(this.persistenceKey,e));if(n){var r=Ho.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Ko(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return S("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){S("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){S("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(S("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void I("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(Object(l.a)(c.a.mark((function e(){var r,i,a,o,u,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(a));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(u));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}(s=function(e){var t=je.at;if(null!=e)try{var n=JSON.parse(e);A("number"==typeof n),t=n}catch(e){I("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==je.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return l=t.Or(n.newValue),e.next=41,Promise.all(l.map((function(e){return t.syncEngine.Mr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new Go(this.currentUser,e,t,n),i=zo(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=zo(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=Ko(this.persistenceKey,e),i=new Ho(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return Qo.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Go.Zi(new x(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return Ho.Zi(r,t)}},{key:"yr",value:function(e){return Wo.Zi(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:S("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Br(o,u).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=pr();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}},{key:"Ar",get:function(){return this.ur.get(this.sr)}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Xo=function(){function e(){Object(p.a)(this,e),this.Lr=new Yo,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Object(v.a)(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new Yo,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Jo=function(){function e(){Object(p.a)(this,e)}return Object(v.a)(e,[{key:"Ur",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Zo=function(){function e(){var t=this;Object(p.a)(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return Object(v.a)(e,[{key:"Ur",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){S("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Object(u.a)(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){S("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Object(u.a)(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),eu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},tu=function(){function e(t){Object(p.a)(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return Object(v.a)(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),nu=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Object(v.a)(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new k.g;o.setWithCredentials(!0),o.listenOnce(k.c.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case k.a.NO_ERROR:var t=o.getResponseJson();S("Connection","XHR received:",JSON.stringify(t)),i(t);break;case k.a.TIMEOUT:S("Connection",'RPC "'+e+'" timed out'),a(new L(P.DEADLINE_EXCEEDED,"Request time out"));break;case k.a.HTTP_ERROR:var n=o.getStatus();if(S("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(t)>=0?t:P.UNKNOWN}(u.status);a(new L(s,u.message))}else a(new L(P.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new L(P.UNAVAILABLE,"Connection failed."));break;default:D()}}finally{S("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Object(k.h)(),a=Object(k.i)(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new k.d({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var u=r.join("");S("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new tu({Hr:function(e){l?S("Connection","Not sending because WebChannel is closed:",e):(c||(S("Connection","Opening WebChannel transport."),s.open(),c=!0),S("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,k.f.EventType.OPEN,(function(){l||S("Connection","WebChannel transport opened.")})),h(s,k.f.EventType.CLOSE,(function(){l||(l=!0,S("Connection","WebChannel transport closed"),f.io())})),h(s,k.f.EventType.ERROR,(function(e){l||(l=!0,j("Connection","WebChannel transport errored:",e),f.io(new L(P.UNAVAILABLE,"The operation could not be completed")))})),h(s,k.f.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];A(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){S("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Wn[e];if(void 0!==t)return er(t)}(a),u=i.message;void 0===o&&(o=P.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.io(new L(o,u)),s.close()}else S("Connection","WebChannel received:",n),f.ro(n)}})),h(a,k.b.STAT_EVENT,(function(e){e.stat===k.e.PROXY?S("Connection","Detected buffering proxy"):e.stat===k.e.NOPROXY&&S("Connection","Detected no buffering proxy")})),setTimeout((function(){f.so()}),0),f}}]),n}(function(){function e(t){Object(p.a)(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Object(v.a)(e,[{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);S("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return S("RestConnection","Received: ",e),e}),(function(t){throw j("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+O,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=eu[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}},{key:"co",get:function(){return!1}}]),e}());function ru(){return"undefined"!=typeof window?window:null}function iu(){return"undefined"!=typeof document?document:null}function au(e){return new Sr(e,!0)}var ou=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Object(p.a)(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return Object(v.a)(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&S("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),uu=function(){function e(t,n,r,i,a,o,u,s){Object(p.a)(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new ou(t,n)}return Object(v.a)(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"qo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=Object(l.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.qo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===P.RESOURCE_EXHAUSTED?(I(n.toString()),I("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===P.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Uo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=Object(o.a)(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new L(P.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro(Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return S("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(S("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),su=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r,i,a,o,u){var s;return Object(p.a)(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).yt=o,s}return Object(v.a)(n,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:D()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.wt?(A(void 0===t||"string"==typeof t),Ve.fromBase64String(t||"")):(A(void 0===t||t instanceof Uint8Array),Ve.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?P.UNKNOWN:er(e.code);return new L(t,e.message||"")}(o);n=new br(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Pr(e,s.document.name),l=Dr(s.document.updateTime),f=s.document.createTime?Dr(s.document.createTime):J.min(),h=new qt({mapValue:{fields:s.document.fields}}),d=Kt.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new mr(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=Pr(e,y.document),g=y.readTime?Dr(y.readTime):J.min(),b=Kt.newNoDocument(m,g),k=y.removedTargetIds||[];n=new mr([],k,b.key,b)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=Pr(e,w.document),O=w.removedTargetIds||[];n=new mr([],O,x,null)}else{if(!("filter"in t))return D();t.filter;var _=t.filter;_.targetId;var T=_.count||0,E=new Jn(T),S=_.targetId;n=new gr(S,E)}return n}(this.yt,e),n=function(e){if(!("targetChange"in e))return J.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?J.min():t.readTime?Dr(t.readTime):J.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=Fr(this.yt),t.addTarget=function(e,t){var n,r=t.target;return(n=Yt(r)?{documents:Gr(e,r)}:{query:Hr(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=jr(e,t.resumeToken):t.snapshotVersion.compareTo(J.min())>0&&(n.readTime=Ir(e,t.snapshotVersion.toTimestamp())),n}(this.yt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return D()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.yt,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=Fr(this.yt),t.removeTarget=e,this.Bo(t)}}]),n}(uu),cu=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r,i,a,o,u){var s;return Object(p.a)(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).yt=o,s.Jo=!1,s}return Object(v.a)(n,[{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,Object(i.a)(Object(a.a)(n.prototype),"start",this).call(this)}},{key:"Uo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(A(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(A(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Dr(e.updateTime):Dr(t);return n.isEqual(J.min())&&(n=Dr(t)),new Rn(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Dr(e.commitTime);return this.listener.Zo(n,t)}return A(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=Fr(this.yt),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return zr(t.yt,e)}))};this.Bo(n)}},{key:"Yo",get:function(){return this.Jo}}]),n}(uu),lu=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r,i,a){var o;return Object(p.a)(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.yt=a,o.nu=!1,o}return Object(v.a)(n,[{key:"su",value:function(){if(this.nu)throw new L(P.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=Object(o.a)(i,2),u=a[0],s=a[1];return r.connection.ao(e,t,n,u,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===P.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new L(P.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var u=Object(o.a)(a,2),s=u[0],c=u[1];return i.connection._o(e,t,n,s,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===P.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new L(P.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return function e(){Object(p.a)(this,e)}}());var fu=function(){function e(t,n){Object(p.a)(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return Object(v.a)(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(I(t),this.ou=!1):S("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),hu=function e(t,n,r,i,a){var o=this;Object(p.a)(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur((function(e){r.enqueueAndForget(Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Ou(o),!e.t0){e.next=5;break}return S("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Object(l.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=R(t))._u.add(4),e.next=4,vu(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,du(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new fu(r,i)};function du(e){return pu.apply(this,arguments)}function pu(){return(pu=Object(l.a)(c.a.mark((function e(t){var n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ou(t)){e.next=18;break}n=Object(u.a)(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function vu(e){return yu.apply(this,arguments)}function yu(){return(yu=Object(l.a)(c.a.mark((function e(t){var n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(u.a)(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function mu(e,t){var n=R(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),xu(n)?wu(n):Ju(n).ko()&&bu(n,t))}function gu(e,t){var n=R(e),r=Ju(n);n.du.delete(t),r.ko()&&ku(n,t),0===n.du.size&&(r.ko()?r.Fo():Ou(n)&&n.gu.set("Unknown"))}function bu(e,t){e.yu.Ot(t.targetId),Ju(e).zo(t)}function ku(e,t){e.yu.Ot(t),Ju(e).Ho(t)}function wu(e){e.yu=new wr({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.du.get(t)||null}}),Ju(e).start(),e.gu.uu()}function xu(e){return Ou(e)&&!Ju(e).No()&&e.du.size>0}function Ou(e){return 0===R(e)._u.size}function _u(e){e.yu=void 0}function Tu(e){return Eu.apply(this,arguments)}function Eu(){return(Eu=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){bu(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Su(e,t){return Iu.apply(this,arguments)}function Iu(){return(Iu=Object(l.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_u(t),xu(t)?(t.gu.hu(n),wu(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ju(e,t,n){return Cu.apply(this,arguments)}function Cu(){return(Cu=Object(l.a)(c.a.mark((function e(t,n,r){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof br&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Object(l.a)(c.a.mark((function e(t,n){var r,i,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Object(u.a)(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),S("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Du(t,e.t0);case 11:e.next=29;break;case 13:if(n instanceof mr?t.yu.Kt(n):n instanceof gr?t.yu.Jt(n):t.yu.jt(n),r.isEqual(J.min())){e.next=29;break}return e.prev=14,e.next=17,So(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.Zt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(Ve.EMPTY_BYTE_STRING,n.snapshotVersion)),ku(e,t);var r=new Ni(n.target,t,1,n.sequenceNumber);bu(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 22:e.next=29;break;case 24:return e.prev=24,e.t2=e.catch(14),S("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Du(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])})))).apply(this,arguments)}function Du(e,t,n){return Au.apply(this,arguments)}function Au(){return(Au=Object(l.a)(c.a.mark((function e(t,n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xe(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,vu(t);case 5:t.gu.set("Offline"),r||(r=function(){return So(t.localStore)}),t.asyncQueue.enqueueRetryable(Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,du(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nu(e,t){return t().catch((function(n){return Du(e,n,t)}))}function Ru(e){return Pu.apply(this,arguments)}function Pu(){return(Pu=Object(l.a)(c.a.mark((function e(t){var n,r,i,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=R(t),r=Zu(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!Lu(n)){e.next=19;break}return e.prev=3,e.next=6,Co(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,Mu(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Du(n,e.t0);case 17:e.next=2;break;case 19:Fu(n)&&Vu(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function Lu(e){return Ou(e)&&e.fu.length<10}function Mu(e,t){e.fu.push(t);var n=Zu(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function Fu(e){return Ou(e)&&!Zu(e).No()&&e.fu.length>0}function Vu(e){Zu(e).start()}function Uu(e){return Bu.apply(this,arguments)}function Bu(){return(Bu=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Zu(t).eu();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qu(e){return zu.apply(this,arguments)}function zu(){return(zu=Object(l.a)(c.a.mark((function e(t){var n,r,i,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Zu(t),r=Object(u.a)(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ku(e,t,n){return Gu.apply(this,arguments)}function Gu(){return(Gu=Object(l.a)(c.a.mark((function e(t,n,r){var i,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=Di.from(i,n,r),e.next=3,Nu(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Ru(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hu(e,t){return Qu.apply(this,arguments)}function Qu(){return(Qu=Object(l.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Zu(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Object(l.a)(c.a.mark((function e(t,n){var r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Zn(i=n.code)||i===P.ABORTED){e.next=7;break}return r=t.fu.shift(),Zu(t).Mo(),e.next=5,Nu(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Ru(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Fu(t)&&Vu(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wu(e,t){return Yu.apply(this,arguments)}function Yu(){return(Yu=Object(l.a)(c.a.mark((function e(t,n){var r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=R(t)).asyncQueue.verifyOperationInProgress(),S("RemoteStore","RemoteStore received new credentials"),i=Ou(r),r._u.add(3),e.next=6,vu(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,du(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $u(e,t){return Xu.apply(this,arguments)}function Xu(){return(Xu=Object(l.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=R(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,du(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,vu(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ju(e){return e.pu||(e.pu=function(e,t,n){var r=R(e);return r.su(),new su(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:Tu.bind(null,e),Zr:Su.bind(null,e),Wo:ju.bind(null,e)}),e.wu.push(function(){var t=Object(l.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),xu(e)?wu(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:_u(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function Zu(e){return e.Iu||(e.Iu=function(e,t,n){var r=R(e);return r.su(),new cu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:Uu.bind(null,e),Zr:Hu.bind(null,e),tu:qu.bind(null,e),Zo:Ku.bind(null,e)}),e.wu.push(function(){var t=Object(l.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Mo(),t.next=4,Ru(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(S("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var es=function(){function e(t,n,r,i,a){Object(p.a)(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new M,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Object(v.a)(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new L(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function ts(e,t){if(I("AsyncQueue","".concat(t,": ").concat(e)),xe(e))return new L(P.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var ns=function(){function e(t){Object(p.a)(this,e),this.comparator=t?function(e,n){return t(e,n)||re.comparator(e.key,n.key)}:function(e,t){return re.comparator(e.key,t.key)},this.keyedMap=ar(),this.sortedSet=new Pt(this.comparator)}return Object(v.a)(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},{key:"size",get:function(){return this.sortedSet.size}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),rs=function(){function e(){Object(p.a)(this,e),this.Tu=new Pt(re.comparator)}return Object(v.a)(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):D():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),is=function(){function e(t,n,r,i,a,o,u,s,c){Object(p.a)(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return Object(v.a)(e,[{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}},{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,ns.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),as=function e(){Object(p.a)(this,e),this.Au=void 0,this.listeners=[]},os=function e(){Object(p.a)(this,e),this.queries=new tr((function(e){return hn(e)}),fn),this.onlineState="Unknown",this.Ru=new Set};function us(e,t){return ss.apply(this,arguments)}function ss(){return(ss=Object(l.a)(c.a.mark((function e(t,n){var r,i,a,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=R(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new as),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=ts(e.t0,"Initialization of query '".concat(dn(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&ds(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function cs(e,t){return ls.apply(this,arguments)}function ls(){return(ls=Object(l.a)(c.a.mark((function e(t,n){var r,i,a,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=R(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fs(e,t){var n,r=R(e),i=!1,a=Object(u.a)(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,c=r.queries.get(s);if(c){var l,f=Object(u.a)(c.listeners);try{for(f.s();!(l=f.n()).done;){l.value.Pu(o)&&(i=!0)}}catch(h){f.e(h)}finally{f.f()}c.Au=o}}}catch(h){a.e(h)}finally{a.f()}i&&ds(r)}function hs(e,t,n){var r=R(e),i=r.queries.get(t);if(i){var a,o=Object(u.a)(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function ds(e){e.Ru.forEach((function(e){e.next()}))}var ps=function(){function e(t,n,r){Object(p.a)(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return Object(v.a)(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Object(u.a)(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new is(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=is.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}(),vs=function(){function e(t,n){Object(p.a)(this,e),this.ku=t,this.byteLength=n}return Object(v.a)(e,[{key:"Ou",value:function(){return"metadata"in this.ku}}]),e}(),ys=function(){function e(t){Object(p.a)(this,e),this.yt=t}return Object(v.a)(e,[{key:"Ji",value:function(e){return Pr(this.yt,e)}},{key:"Yi",value:function(e){return e.metadata.exists?Br(this.yt,e.document,!1):Kt.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return Dr(e)}}]),e}(),ms=function(){function e(t,n,r){Object(p.a)(this,e),this.Mu=t,this.localStore=n,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gs(t)}return Object(v.a)(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;var n=ee.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new ys(this.yt),i=Object(u.a)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.Ji(a.metadata.name),c=Object(u.a)(a.metadata.queries);try{for(c.s();!(o=c.n()).done;){var l=o.value,f=(n.get(l)||hr()).add(s);n.set(l,f)}}catch(h){c.e(h)}finally{c.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,n,r,i,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fo(this.localStore,new ys(this.yt),this.documents,this.Mu.id);case 2:t=e.sent,n=this.$u(this.documents),r=Object(u.a)(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Uo(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function gs(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var bs=function e(t){Object(p.a)(this,e),this.key=t},ks=function e(t){Object(p.a)(this,e),this.key=t},ws=function(){function e(t,n){Object(p.a)(this,e),this.query=t,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=hr(),this.mutatedKeys=hr(),this.Gu=yn(t),this.Qu=new ns(this.Gu)}return Object(v.a)(e,[{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new rs,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=pn(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return D()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.Uu;return this.Uu=u,0!==a.length||s?{snapshot:new is(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new rs,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.qu=t.qu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.qu=t.qu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=hr(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new ks(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new bs(e))})),n}},{key:"tc",value:function(e){this.qu=e.Hi,this.Ku=hr();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return is.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}},{key:"ju",get:function(){return this.qu}}]),e}(),xs=function e(t,n,r){Object(p.a)(this,e),this.query=t,this.targetId=n,this.view=r},Os=function e(t){Object(p.a)(this,e),this.key=t,this.nc=!1},_s=function(){function e(t,n,r,i,a,o){Object(p.a)(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new tr((function(e){return hn(e)}),fn),this.rc=new Map,this.oc=new Set,this.uc=new Pt(re.comparator),this.cc=new Map,this.ac=new ro,this.hc={},this.lc=new Map,this.fc=Na.vn(),this.onlineState="Unknown",this.dc=void 0}return Object(v.a)(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function Ts(e,t){return Es.apply(this,arguments)}function Es(){return(Es=Object(l.a)(c.a.mark((function e(t,n){var r,i,a,o,u,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gc(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,Do(r.localStore,sn(n));case 8:return u=e.sent,r.isPrimaryClient&&mu(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Ss(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ss(e,t,n,r,i){return Is.apply(this,arguments)}function Is(){return(Is=Object(l.a)(c.a.mark((function e(t,n,r,i,a){var o,u,s,f,h,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=Object(l.a)(c.a.mark((function e(t,n,r,i){var a,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,Ro(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Ws(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Ro(t.localStore,n,!0);case 3:return o=e.sent,u=new ws(n,o.Hi),s=u.Wu(o.documents),f=yr.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),h=u.applyChanges(s,t.isPrimaryClient,f),Ws(t,r,h.Xu),d=new xs(n,r,u),e.abrupt("return",(t.ic.set(n,d),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),h.snapshot));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function js(e,t){return Cs.apply(this,arguments)}function Cs(){return(Cs=Object(l.a)(c.a.mark((function e(t,n){var r,i,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=R(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter((function(e){return!fn(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Ao(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),gu(r.remoteStore,i.targetId),Hs(r,i.targetId)})).catch(ve);case 9:e.next=14;break;case 11:return Hs(r,i.targetId),e.next=14,Ao(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ds(e,t,n){return As.apply(this,arguments)}function As(){return(As=Object(l.a)(c.a.mark((function e(t,n,r){var i,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bc(t),e.prev=1,e.next=4,function(e,t){var n,r,i=R(e),a=X.now(),o=t.reduce((function(e,t){return e.add(t.key)}),hr());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=rr(),c=hr();return i.Gi.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(c=c.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],c=Object(u.a)(t);try{for(c.s();!(o=c.n()).done;){var l=o.value,f=Bn(l,n.get(l.key).overlayedDocument);null!=f&&s.push(new Kn(l.key,f,zt(f.value.mapValue),Pn.exists(!0)))}}catch(h){c.e(h)}finally{c.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,c);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:or(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new Pt(W)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Xs(i,a.changes);case 9:return e.next=11,Ru(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=ts(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function Ns(e,t){return Rs.apply(this,arguments)}function Rs(){return(Rs=Object(l.a)(c.a.mark((function e(t,n){var r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=R(t),e.prev=1,e.next=4,Io(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(A(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?A(n.nc):e.removedDocuments.size>0&&(A(n.nc),n.nc=!1))})),e.next=8,Xs(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,ve(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function Ps(e,t,n){var r=R(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=R(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Object(u.a)(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&ds(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Ls(e,t,n){return Ms.apply(this,arguments)}function Ms(){return(Ms=Object(l.a)(c.a.mark((function e(t,n,r){var i,a,o,u,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=R(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Pt(re.comparator)).insert(o,Kt.newNoDocument(o,J.min())),s=hr().add(o),l=new vr(J.min(),new Map,new Ft(W),u,s),e.next=9,Ns(i,l);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),$s(i),e.next=16;break;case 14:return e.next=16,Ao(i.localStore,n,!1).then((function(){return Hs(i,n,r)})).catch(ve);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fs(e,t){return Vs.apply(this,arguments)}function Vs(){return(Vs=Object(l.a)(c.a.mark((function e(t,n){var r,i,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=R(t),i=n.batch.batchId,e.prev=1,e.next=4,Eo(r.localStore,n);case 4:return a=e.sent,Gs(r,i,null),Ks(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Xs(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ve(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Us(e,t,n){return Bs.apply(this,arguments)}function Bs(){return(Bs=Object(l.a)(c.a.mark((function e(t,n,r){var i,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=R(t),e.prev=1,e.next=4,function(e,t){var n=R(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return A(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Gs(i,n,r),Ks(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Xs(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ve(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function qs(e,t){return zs.apply(this,arguments)}function zs(){return(zs=Object(l.a)(c.a.mark((function e(t,n){var r,i,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ou((r=R(t)).remoteStore)||S("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=R(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.lc.get(i)||[]).push(n),r.lc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=ts(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function Ks(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function Gs(e,t,n){var r=R(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function Hs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Object(u.a)(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||Qs(e,t)}))}function Qs(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(gu(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),$s(e))}function Ws(e,t,n){var r,i=Object(u.a)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof bs?(e.ac.addReference(a.key,t),Ys(e,a)):a instanceof ks?(S("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||Qs(e,a.key)):D()}}catch(o){i.e(o)}finally{i.f()}}function Ys(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(S("SyncEngine","New document in limbo: "+n),e.oc.add(r),$s(e))}function $s(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new re(ee.fromString(t)),r=e.fc.next();e.cc.set(r,new Os(n)),e.uc=e.uc.insert(n,r),mu(e.remoteStore,new Ni(sn(tn(n.path)),r,2,je.at))}}function Xs(e,t,n){return Js.apply(this,arguments)}function Js(){return(Js=Object(l.a)(c.a.mark((function e(t,n,r){var i,a,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=R(t),a=[],o=[],s=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){s.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=ko.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.sc.Wo(a),e.next=9,function(){var e=Object(l.a)(c.a.mark((function e(t,n){var r,i,a,o,s,l,f,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=R(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return me.forEach(n,(function(t){return me.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return me.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),xe(e.t0)){e.next=10;break}throw e.t0;case 10:S("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Object(u.a)(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(l=r.qi.get(s),f=l.snapshotVersion,h=l.withLastLimboFreeSnapshotVersion(f),r.qi=r.qi.insert(s,h))}catch(c){i.e(c)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zs(e,t){return ec.apply(this,arguments)}function ec(){return(ec=Object(l.a)(c.a.mark((function e(t,n){var r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=R(t)).currentUser.isEqual(n)){e.next=11;break}return S("SyncEngine","User change. New user:",n.toKey()),e.next=5,_o(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new L(P.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Xs(r,i.ji);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tc(e,t){var n=R(e),r=n.cc.get(t);if(r&&r.nc)return hr().add(r.key);var i=hr(),a=n.rc.get(t);if(!a)return i;var o,s=Object(u.a)(a);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=n.ic.get(c);i=i.unionWith(l.view.ju)}}catch(f){s.e(f)}finally{s.f()}return i}function nc(e,t){return rc.apply(this,arguments)}function rc(){return(rc=Object(l.a)(c.a.mark((function e(t,n){var r,i,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=R(t),e.next=3,Ro(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.tc(i),e.abrupt("return",(r.isPrimaryClient&&Ws(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ic(e,t){return ac.apply(this,arguments)}function ac(){return(ac=Object(l.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=R(t),e.abrupt("return",Lo(r.localStore,n).then((function(e){return Xs(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oc(e,t,n,r){return uc.apply(this,arguments)}function uc(){return(uc=Object(l.a)(c.a.mark((function e(t,n,r,i){var a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=R(t),e.next=3,function(e,t){var n=R(e),r=R(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):me.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Ru(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Gs(a,n,i||null),Ks(a,n),function(e,t){R(R(e).mutationQueue).An(t)}(a.localStore,n)):D();case 11:return e.next=13,Xs(a,o);case 13:e.next=16;break;case 15:S("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sc(e,t){return cc.apply(this,arguments)}function cc(){return(cc=Object(l.a)(c.a.mark((function e(t,n){var r,i,a,o,s,l,f,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gc(r=R(t)),bc(r),!0!==n||!0===r.dc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,lc(r,i.toArray());case 5:return a=e.sent,r.dc=!0,e.next=9,$u(r.remoteStore,!0);case 9:o=Object(u.a)(a);try{for(o.s();!(s=o.n()).done;)l=s.value,mu(r.remoteStore,l)}catch(c){o.e(c)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.dc){e.next=25;break}return f=[],h=Promise.resolve(),r.rc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?f.push(t):h=h.then((function(){return Hs(r,t),Ao(r.localStore,t,!0)})),gu(r.remoteStore,t)})),e.next=19,h;case 19:return e.next=21,lc(r,f);case 21:return function(e){var t=R(e);t.cc.forEach((function(e,n){gu(t.remoteStore,n)})),t.ac.fs(),t.cc=new Map,t.uc=new Pt(re.comparator)}(r),r.dc=!1,e.next=25,$u(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lc(e,t,n){return fc.apply(this,arguments)}function fc(){return(fc=Object(l.a)(c.a.mark((function e(t,n,r){var i,a,o,s,l,f,h,d,p,v,y,m,g,b;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=R(t),a=[],o=[],s=Object(u.a)(n),e.prev=2,s.s();case 4:if((l=s.n()).done){e.next=45;break}if(f=l.value,h=void 0,!(d=i.rc.get(f))||0===d.length){e.next=34;break}return e.next=11,Do(i.localStore,sn(d[0]));case 11:h=e.sent,p=Object(u.a)(d),e.prev=13,p.s();case 15:if((v=p.n()).done){e.next=24;break}return y=v.value,m=i.ic.get(y),e.next=20,nc(i,m);case 20:(g=e.sent).snapshot&&o.push(g.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),p.e(e.t0);case 29:return e.prev=29,p.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Po(i.localStore,f);case 36:return b=e.sent,e.next=39,Do(i.localStore,b);case 39:return h=e.sent,e.next=42,Ss(i,hc(b),f,!1,h.resumeToken);case 42:a.push(h);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.sc.Wo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])})))).apply(this,arguments)}function hc(e){return en(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function dc(e){var t=R(e);return R(R(t.localStore).persistence).vi()}function pc(e,t,n,r){return vc.apply(this,arguments)}function vc(){return(vc=Object(l.a)(c.a.mark((function e(t,n,r,i){var a,o,u,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=R(t)).dc){e.next=3;break}return e.abrupt("return",void S("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.rc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Lo(a.localStore,vn(o[0]));case 10:return u=e.sent,s=vr.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Ve.EMPTY_BYTE_STRING),e.next=14,Xs(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Ao(a.localStore,n,!0);case 17:return Hs(a,n,i),e.abrupt("break",20);case 19:D();case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yc(e,t,n){return mc.apply(this,arguments)}function mc(){return(mc=Object(l.a)(c.a.mark((function e(t,n,r){var i,a,o,s,l,f,h,d,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=gc(t)).dc){e.next=45;break}a=Object(u.a)(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.rc.has(s)){e.next=10;break}return S("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,Po(i.localStore,s);case 12:return l=e.sent,e.next=15,Do(i.localStore,l);case 15:return f=e.sent,e.next=18,Ss(i,hc(l),f.targetId,!1,f.resumeToken);case 18:mu(i.remoteStore,f);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:h=Object(u.a)(r),e.prev=30,p=c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.value,e.t0=i.rc.has(t),!e.t0){e.next=5;break}return e.next=5,Ao(i.localStore,t,!1).then((function(){gu(i.remoteStore,t),Hs(i,t)})).catch(ve);case 5:case"end":return e.stop()}}),e)})),h.s();case 33:if((d=h.n()).done){e.next=37;break}return e.delegateYield(p(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),h.e(e.t2);case 42:return e.prev=42,h.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function gc(e){var t=R(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ns.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=tc.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ls.bind(null,t),t.sc.Wo=fs.bind(null,t.eventManager),t.sc.wc=hs.bind(null,t.eventManager),t}function bc(e){var t=R(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Fs.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Us.bind(null,t),t}function kc(e,t,n){var r=R(e);(function(){var e=Object(l.a)(c.a.mark((function e(t,n,r){var i,a,o,u,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=R(e),r=Dr(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(gs(i)),a=new ms(i,t.localStore,n.yt),e.next=15,n.mc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.mc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Xs(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=R(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(j("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var wc=function(){function e(){Object(p.a)(this,e),this.synchronizeTabs=!1}return Object(v.a)(e,[{key:"initialize",value:function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yt=au(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return Oo(this.persistence,new wo,e.initialUser,this.yt)}},{key:"yc",value:function(e){return new co(fo.Bs,this.yt)}},{key:"gc",value:function(e){return new Xo}},{key:"terminate",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),xc=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r,i){var a;return Object(p.a)(this,n),(a=t.call(this)).Ac=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Object(v.a)(n,[{key:"initialize",value:function(){var e=Object(l.a)(c.a.mark((function e(t){var r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)(Object(a.a)(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ac.initialize(this,t);case 4:return e.next=6,bc(this.Ac.syncEngine);case 6:return e.next=8,Ru(this.Ac.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){return Oo(this.persistence,new wo,e.initialUser,this.yt)}},{key:"Tc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Ua(n,e.asyncQueue,t)}},{key:"Ec",value:function(e,t){var n=new Ie(t,this.persistence);return new Se(e.asyncQueue,n)}},{key:"yc",value:function(e){var t=bo(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ta.withCacheSize(this.cacheSizeBytes):Ta.DEFAULT;return new yo(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ru(),iu(),this.yt,this.sharedClientState,!!this.forceOwnership)}},{key:"gc",value:function(e){return new Xo}}]),n}(wc),Oc=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this,e,r,!1)).Ac=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Object(v.a)(n,[{key:"initialize",value:function(){var e=Object(l.a)(c.a.mark((function e(t){var r,o=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)(Object(a.a)(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ac.syncEngine,e.t0=this.sharedClientState instanceof $o,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:oc.bind(null,r),$r:pc.bind(null,r),Br:yc.bind(null,r),vi:dc.bind(null,r),Mr:ic.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sc(o.Ac.syncEngine,t);case 2:o.gcScheduler&&(t&&!o.gcScheduler.started?o.gcScheduler.start():t||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(t&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():t||o.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"gc",value:function(e){var t=ru();if(!$o.C(t))throw new L(P.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=bo(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $o(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(xc),_c=function(){function e(){Object(p.a)(this,e)}return Object(v.a)(e,[{key:"initialize",value:function(){var e=Object(l.a)(c.a.mark((function e(t,n){var r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Ps(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Zs.bind(null,this.syncEngine),e.next=12,$u(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new os}},{key:"createDatastore",value:function(e){var t,n=au(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new nu(t));return function(e,t,n,r){return new lu(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Ps(o.syncEngine,e,0)},a=Zo.C()?new Zo:new Jo,new hu(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new _s(e,t,n,r,i,a);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Object(l.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=R(t),S("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,vu(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Tc(e,t,n){if(!n)throw new L(P.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Ec(e,t,n,r){if(!0===t&&!0===r)throw new L(P.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Sc(e){if(!re.isDocumentKey(e))throw new L(P.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ic(e){if(re.isDocumentKey(e))throw new L(P.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function jc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":D()}function Cc(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new L(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=jc(e);throw new L(P.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Dc(e,t){if(t<=0)throw new L(P.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Ac=new Map,Nc=function(){function e(t){var n;if(Object(p.a)(this,e),void 0===t.host){if(void 0!==t.ssl)throw new L(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new L(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Ec("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Object(v.a)(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Rc=function(){function e(t,n,r,i){Object(p.a)(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nc({}),this._settingsFrozen=!1}return Object(v.a)(e,[{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new L(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nc(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new V;switch(e.type){case"gapi":var t=e.client;return new z(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new L(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Ac.get(e);t&&(S("ComponentProvider","Removing Datastore"),Ac.delete(e),t.terminate())}(this),Promise.resolve()}},{key:"app",get:function(){if(!this._app)throw new L(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}}]),e}();function Pc(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Cc(e,Rc))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&j("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=x.MOCK_USER;else{o=Object(b.h)(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new L(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new x(s)}e._authCredentials=new U(new F(o,u))}}var Lc=function(){function e(t,n,r){Object(p.a)(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Object(v.a)(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}},{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Fc(this.firestore,this.converter,this._key.path.popLast())}}]),e}(),Mc=function(){function e(t,n,r){Object(p.a)(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Object(v.a)(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Fc=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r,i){var a;return Object(p.a)(this,n),(a=t.call(this,e,r,tn(i)))._path=i,a.type="collection",a}return Object(v.a)(n,[{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}},{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Lc(this.firestore,null,new re(e))}}]),n}(Mc);function Vc(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Object(b.n)(e),Tc("collection","path",t),e instanceof Rc){var a=ee.fromString.apply(ee,[t].concat(r));return Ic(a),new Fc(e,null,a)}if(!(e instanceof Lc||e instanceof Fc))throw new L(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ee.fromString.apply(ee,[t].concat(r)));return Ic(o),new Fc(e.firestore,null,o)}function Uc(e,t){if(e=Cc(e,Rc),Tc("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new L(P.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Mc(e,null,function(e){return new Zt(ee.emptyPath(),e)}(t))}function Bc(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Object(b.n)(e),1===arguments.length&&(t=Q.R()),Tc("doc","path",t),e instanceof Rc){var a=ee.fromString.apply(ee,[t].concat(r));return Sc(a),new Lc(e,null,new re(a))}if(!(e instanceof Lc||e instanceof Fc))throw new L(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ee.fromString.apply(ee,[t].concat(r)));return Sc(o),new Lc(e.firestore,e instanceof Fc?e.converter:null,new re(o))}function qc(e,t){return e=Object(b.n)(e),t=Object(b.n)(t),(e instanceof Lc||e instanceof Fc)&&(t instanceof Lc||t instanceof Fc)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function zc(e,t){return e=Object(b.n)(e),t=Object(b.n)(t),e instanceof Mc&&t instanceof Mc&&e.firestore===t.firestore&&fn(e._query,t._query)&&e.converter===t.converter}function Kc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Object(l.a)(c.a.mark((function r(){var i;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Gc=function(){function e(t){Object(p.a)(this,e),this.observer=t,this.muted=!1}return Object(v.a)(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):I("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Hc=function(){function e(t,n){var r=this;Object(p.a)(this,e),this.Pc=t,this.yt=n,this.metadata=new M,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.ku.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ku))))}),(function(e){return r.metadata.reject(e)}))}return Object(v.a)(e,[{key:"close",value:function(){return this.Pc.cancel()}},{key:"getMetadata",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mc",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Sc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.vc.decode(t),r=Number(n),isNaN(r)&&this.Dc("length string (".concat(n,") is not valid number")),e.next=9,this.Cc(r);case 9:return i=e.sent,e.abrupt("return",new vs(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Sc",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.xc()<0)){e.next=7;break}return e.next=3,this.Nc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.xc())<0&&this.Dc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){var e=Object(l.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Nc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Dc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.vc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dc",value:function(e){throw this.Pc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Nc",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Pc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Qc=function(){function e(t){Object(p.a)(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Object(v.a)(e,[{key:"lookup",value:function(){var e=Object(l.a)(c.a.mark((function e(t){var n,r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new L(P.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Object(l.a)(c.a.mark((function e(t,n){var r,i,a,o,u,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=R(t),i=Fr(r.yt)+"/documents",a={documents:n.map((function(e){return Rr(r.yt,e)}))},e.next=5,r._o("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=qr(r.yt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());A(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new $n(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=re.fromPath(t);n.mutations.push(new Xn(r,n.precondition(r)))})),e.next=7,function(){var e=Object(l.a)(c.a.mark((function e(t,n){var r,i,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=R(t),i=Fr(r.yt)+"/documents",a={writes:n.map((function(e){return zr(r.yt,e)}))},e.next=3,r.ao("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw D();t=J.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new L(P.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(J.min())?Pn.exists(!1):Pn.updateTime(t):Pn.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(J.min()))throw new L(P.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pn.updateTime(t)}return Pn.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Wc=function(){function e(t,n,r,i,a){Object(p.a)(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new ou(this.asyncQueue,"transaction_retry")}return Object(v.a)(e,[{key:"run",value:function(){this.kc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.xo.Ro(Object(l.a)(c.a.mark((function t(){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Qc(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Fc(t)}))}))})).catch((function(t){e.Fc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!Pe(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Fc",value:function(e){var t=this;this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"$c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Zn(t)}return!1}}]),e}(),Yc=function(){function e(t,n,r,i){var a=this;Object(p.a)(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=x.UNAUTHENTICATED,this.clientId=Q.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return S("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Object(v.a)(e,[{key:"getConfiguration",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new L(P.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new M;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Object(l.a)(c.a.mark((function n(){var r;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=ts(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function $c(e,t){return Xc.apply(this,arguments)}function Xc(){return(Xc=Object(l.a)(c.a.mark((function e(t,n){var r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),S("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,_o(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jc(e,t){return Zc.apply(this,arguments)}function Zc(){return(Zc=Object(l.a)(c.a.mark((function e(t,n){var r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,el(t);case 3:return r=e.sent,S("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Wu(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Wu(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function el(e){return tl.apply(this,arguments)}function tl(){return(tl=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return S("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,$c(t,new wc);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nl(e){return rl.apply(this,arguments)}function rl(){return(rl=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return S("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Jc(t,new _c);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function il(e){return el(e).then((function(e){return e.persistence}))}function al(e){return el(e).then((function(e){return e.localStore}))}function ol(e){return nl(e).then((function(e){return e.remoteStore}))}function ul(e){return nl(e).then((function(e){return e.syncEngine}))}function sl(e){return nl(e).then((function(e){return e.datastore}))}function cl(e){return ll.apply(this,arguments)}function ll(){return(ll=Object(l.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nl(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Ts.bind(null,n.syncEngine),r.onUnlisten=js.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new M;return e.asyncQueue.enqueueAndForget(Object(l.a)(c.a.mark((function i(){return c.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Gc({next:function(a){t.enqueueAndForget((function(){return cs(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new L(P.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new L(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new ps(tn(n.path),a,{includeMetadataChanges:!0,Nu:!0});return us(e,o)},i.next=3,cl(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function hl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new M;return e.asyncQueue.enqueueAndForget(Object(l.a)(c.a.mark((function i(){return c.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Gc({next:function(n){t.enqueueAndForget((function(){return cs(e,o)})),n.fromCache&&"server"===r.source?i.reject(new L(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new ps(n,a,{includeMetadataChanges:!0,Nu:!0});return us(e,o)},i.next=3,cl(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var dl=function(){function e(){var t=this;Object(p.a)(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new ou(this,"async_queue_retry"),this.Wc=function(){var e=iu();e&&S("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=iu();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return Object(v.a)(e,[{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;var t=iu();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.qc)return new Promise((function(){}));var n=new M;return this.Hc((function(){return t.qc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),xe(e.t0)){e.next=12;break}throw e.t0;case 12:S("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){throw t.Kc=e,t.Gc=!1,I("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=es.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.Uc.push(i),i}},{key:"zc",value:function(){this.Kc&&D()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=Object(u.a)(this.Uc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.Uc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Object(u.a)(t.Uc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.Uc.indexOf(e);this.Uc.splice(t,1)}},{key:"isShuttingDown",get:function(){return this.qc}}]),e}();function pl(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Object(u.a)(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var vl=function(){function e(){Object(p.a)(this,e),this._progressObserver={},this._taskCompletionResolver=new M,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Object(v.a)(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),yl=-1,ml=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r,i,a){var o;return Object(p.a)(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new dl,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return Object(v.a)(n,[{key:"_terminate",value:function(){return this._firestoreClient||bl(this),this._firestoreClient.terminate()}}]),n}(Rc);function gl(e){return e._firestoreClient||bl(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function bl(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Ce(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Yc(e._authCredentials,e._appCheckCredentials,e._queue,r)}function kl(e,t){jl(e=Cc(e,ml));var n=gl(e),r=e._freezeSettings(),i=new _c;return xl(n,i,new xc(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}function wl(e){jl(e=Cc(e,ml));var t=gl(e),n=e._freezeSettings(),r=new _c;return xl(t,r,new Oc(r,n.cacheSizeBytes))}function xl(e,t,n){var r=new M;return e.asyncQueue.enqueue(Object(l.a)(c.a.mark((function i(){var a;return c.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,$c(e,n);case 3:return i.next=5,Jc(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===P.FAILED_PRECONDITION||e.code===P.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:j("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Ol(e){if(e._initialized&&!e._terminated)throw new L(P.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new M;return e._queue.enqueueAndForgetEvenWhileRestricted(Object(l.a)(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Object(l.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(be.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,be.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(bo(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}function _l(e){return function(e){var t=new M;return e.asyncQueue.enqueueAndForget(Object(l.a)(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=qs,n.next=3,ul(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(gl(e=Cc(e,ml)))}function Tl(e){return function(e){return e.asyncQueue.enqueue(Object(l.a)(c.a.mark((function t(){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,il(e);case 2:return n=t.sent,t.next=5,ol(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=R(e);return t._u.delete(0),du(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(gl(e=Cc(e,ml)))}function El(e){return function(e){return e.asyncQueue.enqueue(Object(l.a)(c.a.mark((function t(){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,il(e);case 2:return n=t.sent,t.next=5,ol(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Object(l.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=R(t))._u.add(0),e.next=4,vu(n);case 4:n.gu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(gl(e=Cc(e,ml)))}function Sl(e,t){var n=gl(e=Cc(e,ml)),r=new vl;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Hc(e,t)}(function(e,t){if(e instanceof Uint8Array)return Kc(e,t);if(e instanceof ArrayBuffer)return Kc(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,au(t));e.asyncQueue.enqueueAndForget(Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=kc,t.next=3,ul(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Il(e,t){return function(e,t){return e.asyncQueue.enqueue(Object(l.a)(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=R(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,al(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(gl(e=Cc(e,ml)),t).then((function(t){return t?new Mc(e,null,t.query):null}))}function jl(e){if(e._initialized||e._terminated)throw new L(P.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Cl=function(){function e(t){Object(p.a)(this,e),this._byteString=t}return Object(v.a)(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Ve.fromBase64String(t))}catch(t){throw new L(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Ve.fromUint8Array(t))}}]),e}(),Dl=function(){function e(){Object(p.a)(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new L(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ne(n)}return Object(v.a)(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Al=function e(t){Object(p.a)(this,e),this._methodName=t},Nl=function(){function e(t,n){if(Object(p.a)(this,e),!isFinite(t)||t<-90||t>90)throw new L(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new L(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Object(v.a)(e,[{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return W(this._lat,e._lat)||W(this._long,e._long)}},{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}}]),e}(),Rl=/^__.*__$/,Pl=function(){function e(t,n,r){Object(p.a)(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Object(v.a)(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Kn(e,this.data,this.fieldMask,t,this.fieldTransforms):new zn(e,this.data,t,this.fieldTransforms)}}]),e}(),Ll=function(){function e(t,n,r){Object(p.a)(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Object(v.a)(e,[{key:"toMutation",value:function(e,t){return new Kn(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Ml(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw D()}}var Fl=function(){function e(t,n,r,i,a,o){Object(p.a)(this,e),this.settings=t,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Object(v.a)(e,[{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return af(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Ml(this.sa)&&Rl.test(e))throw this.ha('Document fields cannot begin and end with "__"')}},{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}}]),e}(),Vl=function(){function e(t,n,r){Object(p.a)(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.yt=r||au(t)}return Object(v.a)(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Fl({sa:e,methodName:t,fa:n,path:ne.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}]),e}();function Ul(e){var t=e._freezeSettings(),n=au(e._databaseId);return new Vl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Bl(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);ef("Data must be an object, but it was:",o,r);var s,c,l=Jl(r,o);if(a.merge)s=new Bt(o.fieldMask),c=o.fieldTransforms;else if(a.mergeFields){var f,h=[],d=Object(u.a)(a.mergeFields);try{for(d.s();!(f=d.n()).done;){var p=f.value,v=tf(t,p,n);if(!o.contains(v))throw new L(P.INVALID_ARGUMENT,"Field '".concat(v,"' is specified in your field mask but missing from your input data."));of(h,v)||h.push(v)}}catch(y){d.e(y)}finally{d.f()}s=new Bt(h),c=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,c=o.fieldTransforms;return new Pl(new qt(l),s,c)}var ql=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Al);function zl(e,t,n){return new Fl({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.yt,t.ignoreUndefinedProperties)}var Kl=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"_toFieldTransform",value:function(e){return new Nn(e.path,new Tn)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Al),Gl=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this,e))._a=r,i}return Object(v.a)(n,[{key:"_toFieldTransform",value:function(e){var t=zl(this,e,!0),n=this._a.map((function(e){return Xl(e,t)})),r=new En(n);return new Nn(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Al),Hl=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this,e))._a=r,i}return Object(v.a)(n,[{key:"_toFieldTransform",value:function(e){var t=zl(this,e,!0),n=this._a.map((function(e){return Xl(e,t)})),r=new In(n);return new Nn(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Al),Ql=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this,e)).wa=r,i}return Object(v.a)(n,[{key:"_toFieldTransform",value:function(e){var t=new Cn(e.yt,kn(e.yt,this.wa));return new Nn(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Al);function Wl(e,t,n,r){var i=e.da(1,t,n);ef("Data must be an object, but it was:",i,r);var a=[],o=qt.empty();Ne(r,(function(e,r){var u=rf(t,e,n);r=Object(b.n)(r);var s=i.ca(u);if(r instanceof ql)a.push(u);else{var c=Xl(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Bt(a);return new Ll(o,u,i.fieldTransforms)}function Yl(e,t,n,r,i,a){var o=e.da(1,t,n),u=[tf(t,r,n)],s=[i];if(a.length%2!=0)throw new L(P.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(tf(t,a[c])),s.push(a[c+1]);for(var l=[],f=qt.empty(),h=u.length-1;h>=0;--h)if(!of(l,u[h])){var d=u[h],p=s[h];p=Object(b.n)(p);var v=o.ca(d);if(p instanceof ql)l.push(d);else{var y=Xl(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Bt(l);return new Ll(f,m,o.fieldTransforms)}function $l(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Xl(n,e.da(r?4:3,t))}function Xl(e,t){if(Zl(e=Object(b.n)(e)))return ef("Unsupported field value:",t,e),Jl(e,t);if(e instanceof Al)return function(e,t){if(!Ml(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Object(u.a)(e);try{for(a.s();!(n=a.n()).done;){var o=Xl(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Object(b.n)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return kn(t.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=X.fromDate(e);return{timestampValue:Ir(t.yt,n)}}if(e instanceof X){var r=new X(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ir(t.yt,r)}}if(e instanceof Nl)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Cl)return{bytesValue:jr(t.yt,e._byteString)};if(e instanceof Lc){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Ar(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(jc(e)))}(e,t)}function Jl(e,t){var n={};return Re(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ne(e,(function(e,r){var i=Xl(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Zl(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof X||e instanceof Nl||e instanceof Cl||e instanceof Lc||e instanceof Al)}function ef(e,t,n){if(!Zl(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=jc(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function tf(e,t,n){if((t=Object(b.n)(t))instanceof Dl)return t._internalPath;if("string"==typeof t)return rf(e,t);throw af("Field path arguments must be of type string or ",e,!1,void 0,n)}var nf=new RegExp("[~\\*/\\[\\]]");function rf(e,t,n){if(t.search(nf)>=0)throw af("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Object(r.a)(Dl,Object(d.a)(t.split(".")))._internalPath}catch(i){throw af("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function af(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new L(P.INVALID_ARGUMENT,u+e+s)}function of(e,t){return e.some((function(e){return e.isEqual(t)}))}var uf=function(){function e(t,n,r,i,a){Object(p.a)(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Object(v.a)(e,[{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new sf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(cf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Lc(this._firestore,this._converter,this._key)}}]),e}(),sf=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"data",value:function(){return Object(i.a)(Object(a.a)(n.prototype),"data",this).call(this)}}]),n}(uf);function cf(e,t){return"string"==typeof t?rf(e,t):t instanceof Dl?t._internalPath:t._delegate._internalPath}function lf(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new L(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ff=function e(){Object(p.a)(this,e)},hf=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return n}(ff);function df(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof ff&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof yf})).length,n=e.filter((function(e){return e instanceof pf})).length;if(t>1||t>0&&n>0)throw new L(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,s=Object(u.a)(n);try{for(s.s();!(o=s.n()).done;){var c=o.value;e=c._apply(e)}}catch(l){s.e(l)}finally{s.f()}return e}var pf=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r,i){var a;return Object(p.a)(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return Object(v.a)(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Df(e._query,t),new Mc(e.firestore,e.converter,cn(e._query,t))}},{key:"_parse",value:function(e){var t=Ul(e.firestore);return function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new L(P.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Cf(o,a);var c,l=[],f=Object(u.a)(o);try{for(f.s();!(c=f.n()).done;){var h=c.value;l.push(jf(r,e,h))}}catch(d){f.e(d)}finally{f.f()}s={arrayValue:{values:l}}}else s=jf(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Cf(o,a),s=$l(n,"where",o,"in"===a||"not-in"===a);return yt.create(i,a,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(hf);function vf(e,t,n){var r=t,i=cf("where",e);return pf._create(i,r,n)}var yf=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return Object(v.a)(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:mt.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=t.getFlattenedFilters(),a=Object(u.a)(i);try{for(a.s();!(n=a.n()).done;){var o=n.value;Df(r,o),r=cn(r,o)}}catch(s){a.e(s)}finally{a.f()}}(e._query,t),new Mc(e.firestore,e.converter,cn(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ff);var mf=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return Object(v.a)(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new L(P.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new L(P.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Nt(t,n);return function(e,t){if(null===rn(e)){var n=an(e);null!==n&&Af(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Mc(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Zt(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(hf);function gf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=cf("orderBy",e);return mf._create(r,n)}var bf=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r,i){var a;return Object(p.a)(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return Object(v.a)(n,[{key:"_apply",value:function(e){return new Mc(e.firestore,e.converter,ln(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(hf);function kf(e){return Dc("limit",e),bf._create("limit",e,"F")}function wf(e){return Dc("limitToLast",e),bf._create("limitToLast",e,"L")}var xf=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r,i){var a;return Object(p.a)(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return Object(v.a)(n,[{key:"_apply",value:function(e){var t=If(e,this.type,this._docOrFields,this._inclusive);return new Mc(e.firestore,e.converter,function(e,t){return new Zt(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(hf);function Of(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return xf._create("startAt",t,!0)}function _f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return xf._create("startAfter",t,!1)}var Tf=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r,i){var a;return Object(p.a)(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return Object(v.a)(n,[{key:"_apply",value:function(e){var t=If(e,this.type,this._docOrFields,this._inclusive);return new Mc(e.firestore,e.converter,function(e,t){return new Zt(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(hf);function Ef(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Tf._create("endBefore",t,!1)}function Sf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Tf._create("endAt",t,!0)}function If(e,t,n,r){if(n[0]=Object(b.n)(n[0]),n[0]instanceof uf)return function(e,t,n,r,i){if(!r)throw new L(P.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=Object(u.a)(un(e));try{for(s.s();!(a=s.n()).done;){var c=a.value;if(c.field.isKeyField())o.push(et(t,r.key));else{var l=r.data.field(c.field);if(Ke(l))throw new L(P.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===l){var f=c.field.canonicalString();throw new L(P.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(f,"' (used as the orderBy) does not exist."))}o.push(l)}}}catch(h){s.e(h)}finally{s.f()}return new ht(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Ul(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new L(P.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new L(P.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!on(e)&&-1!==c.indexOf("/"))throw new L(P.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(ee.fromString(c));if(!re.isDocumentKey(l))throw new L(P.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new re(l);u.push(et(t,f))}else{var h=$l(n,r,c);u.push(h)}}return new ht(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function jf(e,t,n){if("string"==typeof(n=Object(b.n)(n))){if(""===n)throw new L(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!on(t)&&-1!==n.indexOf("/"))throw new L(P.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(ee.fromString(n));if(!re.isDocumentKey(r))throw new L(P.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return et(e,new re(r))}if(n instanceof Lc)return et(e,n._key);throw new L(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(jc(n),"."))}function Cf(e,t){if(!Array.isArray(e)||0===e.length)throw new L(P.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new L(P.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Df(e,t){if(t.isInequality()){var n=an(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new L(P.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=rn(e);null!==i&&Af(e,r,i)}var a=function(e,t){var n,r=Object(u.a)(e);try{for(r.s();!(n=r.n()).done;){var i,a=n.value,o=Object(u.a)(a.getFlattenedFilters());try{for(o.s();!(i=o.n()).done;){var s=i.value;if(t.indexOf(s.op)>=0)return s.op}}catch(c){o.e(c)}finally{o.f()}}}catch(c){r.e(c)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new L(P.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new L(P.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function Af(e,t,n){if(!n.isEqual(t))throw new L(P.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Nf=function(){function e(){Object(p.a)(this,e)}return Object(v.a)(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(We(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ze(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw D()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Ne(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Nl(qe(e.latitude),qe(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=function e(t){var n=t.mapValue.fields.__previous_value__;return Ke(n)?e(n):n}(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ge(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Be(e);return new X(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=ee.fromString(e);A(ei(n));var r=new De(n.get(1),n.get(3)),i=new re(n.popFirst(5));return r.isEqual(t)||I("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Rf(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Pf=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).firestore=e,r}return Object(v.a)(n,[{key:"convertBytes",value:function(e){return new Cl(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Lc(this.firestore,null,t)}}]),n}(Nf),Lf=function(){function e(t,n){Object(p.a)(this,e),this.hasPendingWrites=t,this.fromCache=n}return Object(v.a)(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Mf=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r,i,a,o,u){var s;return Object(p.a)(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Object(v.a)(n,[{key:"exists",value:function(){return Object(i.a)(Object(a.a)(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Ff(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(cf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(uf),Ff=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)(Object(a.a)(n.prototype),"data",this).call(this,e)}}]),n}(Mf),Vf=function(){function e(t,n,r,i){Object(p.a)(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Lf(i.hasPendingWrites,i.fromCache),this.query=r}return Object(v.a)(e,[{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Ff(n._firestore,n._userDataWriter,r.key,r,new Lf(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new L(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Ff(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Lf(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Ff(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Lf(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Uf(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}},{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}}]),e}();function Uf(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return D()}}function Bf(e,t){return e instanceof Mf&&t instanceof Mf?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Vf&&t instanceof Vf&&e._firestore===t._firestore&&zc(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function qf(e){e=Cc(e,Lc);var t=Cc(e.firestore,ml);return fl(gl(t),e._key).then((function(n){return nh(t,e,n)}))}var zf=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).firestore=e,r}return Object(v.a)(n,[{key:"convertBytes",value:function(e){return new Cl(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Lc(this.firestore,null,t)}}]),n}(Nf);function Kf(e){e=Cc(e,Lc);var t=Cc(e.firestore,ml),n=gl(t),r=new zf(t);return function(e,t){var n=new M;return e.asyncQueue.enqueueAndForget(Object(l.a)(c.a.mark((function r(){return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Object(l.a)(c.a.mark((function e(t,n,r){var i,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=R(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new L(P.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=ts(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,al(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Mf(t,r,e._key,n,new Lf(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Gf(e){e=Cc(e,Lc);var t=Cc(e.firestore,ml);return fl(gl(t),e._key,{source:"server"}).then((function(n){return nh(t,e,n)}))}function Hf(e){e=Cc(e,Mc);var t=Cc(e.firestore,ml),n=gl(t),r=new zf(t);return lf(e._query),hl(n,e._query).then((function(n){return new Vf(t,r,e,n)}))}function Qf(e){e=Cc(e,Mc);var t=Cc(e.firestore,ml),n=gl(t),r=new zf(t);return function(e,t){var n=new M;return e.asyncQueue.enqueueAndForget(Object(l.a)(c.a.mark((function r(){return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Object(l.a)(c.a.mark((function e(t,n,r){var i,a,o,u,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ro(t,n,!0);case 3:i=e.sent,a=new ws(n,i.Hi),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=ts(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,al(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Vf(t,r,e,n)}))}function Wf(e){e=Cc(e,Mc);var t=Cc(e.firestore,ml),n=gl(t),r=new zf(t);return hl(n,e._query,{source:"server"}).then((function(n){return new Vf(t,r,e,n)}))}function Yf(e,t,n){e=Cc(e,Lc);var r=Cc(e.firestore,ml),i=Rf(e.converter,t,n);return th(r,[Bl(Ul(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Pn.none())])}function $f(e,t,n){e=Cc(e,Lc);for(var r=Cc(e.firestore,ml),i=Ul(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return th(r,[("string"==typeof(t=Object(b.n)(t))||t instanceof Dl?Yl(i,"updateDoc",e._key,t,n,o):Wl(i,"updateDoc",e._key,t)).toMutation(e._key,Pn.exists(!0))])}function Xf(e){return th(Cc(e.firestore,ml),[new $n(e._key,Pn.none())])}function Jf(e,t){var n=Cc(e.firestore,ml),r=Bc(e),i=Rf(e.converter,t);return th(n,[Bl(Ul(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Pn.exists(!1))]).then((function(){return r}))}function Zf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Object(b.n)(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||pl(n[s])||(u=n[s],s++);var f,h,d,p={includeMetadataChanges:u.includeMetadataChanges};if(pl(n[s])){var v=n[s];n[s]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[s+1]=null===(a=v.error)||void 0===a?void 0:a.bind(v),n[s+2]=null===(o=v.complete)||void 0===o?void 0:o.bind(v)}if(e instanceof Lc)h=Cc(e.firestore,ml),d=tn(e._key.path),f={next:function(t){n[s]&&n[s](nh(h,e,t))},error:n[s+1],complete:n[s+2]};else{var y=Cc(e,Mc);h=Cc(y.firestore,ml),d=y._query;var m=new zf(h);f={next:function(e){n[s]&&n[s](new Vf(h,m,y,e))},error:n[s+1],complete:n[s+2]},lf(e._query)}return function(e,t,n,r){var i=new Gc(r),a=new ps(t,i,n);return e.asyncQueue.enqueueAndForget(Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=us,t.next=3,cl(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=cs,t.next=3,cl(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(gl(h),d,p,f)}function eh(e,t){return function(e,t){var n=new Gc(t);return e.asyncQueue.enqueueAndForget(Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){R(e).Ru.add(t),t.next()},t.next=3,cl(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget(Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){R(e).Ru.delete(t)},t.next=3,cl(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(gl(e=Cc(e,ml)),pl(t)?t:{next:t})}function th(e,t){return function(e,t){var n=new M;return e.asyncQueue.enqueueAndForget(Object(l.a)(c.a.mark((function r(){return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Ds,r.next=3,ul(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(gl(e),t)}function nh(e,t,n){var r=n.docs.get(t._key),i=new zf(e);return new Mf(e,i,t._key,r,new Lf(n.hasPendingWrites,n.fromCache),t.converter)}var rh={maxAttempts:5},ih=function(){function e(t,n){Object(p.a)(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ul(t)}return Object(v.a)(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=ah(e,this._firestore),i=Rf(r.converter,t,n),a=Bl(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Pn.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=ah(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Object(b.n)(t))||t instanceof Dl?Yl(this._dataReader,"WriteBatch.update",i._key,t,n,o):Wl(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Pn.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=ah(e,this._firestore);return this._mutations=this._mutations.concat(new $n(t._key,Pn.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new L(P.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function ah(e,t){if((e=Object(b.n)(e)).firestore!==t)throw new L(P.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var oh=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this,e,r))._firestore=e,i}return Object(v.a)(n,[{key:"get",value:function(e){var t=this,r=ah(e,this._firestore),o=new zf(this._firestore);return Object(i.a)(Object(a.a)(n.prototype),"get",this).call(this,e).then((function(e){return new Mf(t._firestore,o,r._key,e._document,new Lf(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Object(p.a)(this,e),this._firestore=t,this._transaction=n,this._dataReader=Ul(t)}return Object(v.a)(e,[{key:"get",value:function(e){var t=this,n=ah(e,this._firestore),r=new Pf(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return D();var i=e[0];if(i.isFoundDocument())return new uf(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new uf(t._firestore,r,n._key,null,n.converter);throw D()}))}},{key:"set",value:function(e,t,n){var r=ah(e,this._firestore),i=Rf(r.converter,t,n),a=Bl(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=ah(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Object(b.n)(t))||t instanceof Dl?Yl(this._dataReader,"Transaction.update",i._key,t,n,o):Wl(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=ah(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function uh(e,t,n){e=Cc(e,ml);var r=Object.assign(Object.assign({},rh),n);return function(e){if(e.maxAttempts<1)throw new L(P.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new M;return e.asyncQueue.enqueueAndForget(Object(l.a)(c.a.mark((function i(){var a;return c.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,sl(e);case 2:a=i.sent,new Wc(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(gl(e),(function(n){return t(new oh(e,n))}),r)}function sh(){return new ql("deleteField")}function ch(){return new Kl("serverTimestamp")}function lh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Gl("arrayUnion",t)}function fh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Hl("arrayRemove",t)}function hh(e){return new Ql("increment",e)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){O=e}(y.SDK_VERSION),Object(y._registerComponent)(new m.a("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new ml(new B(e.getProvider("auth-internal")),new G(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new L(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new De(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Object(y.registerVersion)(w,"3.8.0",e),Object(y.registerVersion)(w,"3.8.0","esm2017")}()}).call(this,n(31))},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(22);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.a)(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),i=n(27);function a(e){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(20);function u(e,t){return!t||"object"!==a(t)&&"function"!==typeof t?Object(o.a)(e):t}function s(e){return function(){var t,n=Object(r.a)(e);if(Object(i.a)()){var a=Object(r.a)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return u(this,t)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"SDK_VERSION",(function(){return N})),n.d(t,"_DEFAULT_ENTRY_NAME",(function(){return k})),n.d(t,"_addComponent",(function(){return _})),n.d(t,"_addOrOverwriteComponent",(function(){return T})),n.d(t,"_apps",(function(){return x})),n.d(t,"_clearComponents",(function(){return j})),n.d(t,"_components",(function(){return O})),n.d(t,"_getProvider",(function(){return S})),n.d(t,"_registerComponent",(function(){return E})),n.d(t,"_removeServiceInstance",(function(){return I})),n.d(t,"deleteApp",(function(){return M})),n.d(t,"getApp",(function(){return P})),n.d(t,"getApps",(function(){return L})),n.d(t,"initializeApp",(function(){return R})),n.d(t,"onLog",(function(){return U})),n.d(t,"registerVersion",(function(){return V})),n.d(t,"setLogLevel",(function(){return B}));var r=n(13),i=n(0),a=n.n(i),o=n(3),u=n(4),s=n(7),c=n(1),l=n(2),f=n(14),h=n(16),d=n(5);n.d(t,"FirebaseError",(function(){return d.c}));var p,v,y=n(28),m=function(){function e(t){Object(c.a)(this,e),this.container=t}return Object(l.a)(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var g="@firebase/app",b=new h.b("@firebase/app"),k="[DEFAULT]",w=(p={},Object(s.a)(p,g,"fire-core"),Object(s.a)(p,"@firebase/app-compat","fire-core-compat"),Object(s.a)(p,"@firebase/analytics","fire-analytics"),Object(s.a)(p,"@firebase/analytics-compat","fire-analytics-compat"),Object(s.a)(p,"@firebase/app-check","fire-app-check"),Object(s.a)(p,"@firebase/app-check-compat","fire-app-check-compat"),Object(s.a)(p,"@firebase/auth","fire-auth"),Object(s.a)(p,"@firebase/auth-compat","fire-auth-compat"),Object(s.a)(p,"@firebase/database","fire-rtdb"),Object(s.a)(p,"@firebase/database-compat","fire-rtdb-compat"),Object(s.a)(p,"@firebase/functions","fire-fn"),Object(s.a)(p,"@firebase/functions-compat","fire-fn-compat"),Object(s.a)(p,"@firebase/installations","fire-iid"),Object(s.a)(p,"@firebase/installations-compat","fire-iid-compat"),Object(s.a)(p,"@firebase/messaging","fire-fcm"),Object(s.a)(p,"@firebase/messaging-compat","fire-fcm-compat"),Object(s.a)(p,"@firebase/performance","fire-perf"),Object(s.a)(p,"@firebase/performance-compat","fire-perf-compat"),Object(s.a)(p,"@firebase/remote-config","fire-rc"),Object(s.a)(p,"@firebase/remote-config-compat","fire-rc-compat"),Object(s.a)(p,"@firebase/storage","fire-gcs"),Object(s.a)(p,"@firebase/storage-compat","fire-gcs-compat"),Object(s.a)(p,"@firebase/firestore","fire-fst"),Object(s.a)(p,"@firebase/firestore-compat","fire-fst-compat"),Object(s.a)(p,"fire-js","fire-js"),Object(s.a)(p,"firebase","fire-js-all"),p),x=new Map,O=new Map;function _(e,t){try{e.container.addComponent(t)}catch(n){b.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function T(e,t){e.container.addOrOverwriteComponent(t)}function E(e){var t=e.name;if(O.has(t))return b.debug("There were multiple attempts to register component ".concat(t,".")),!1;O.set(t,e);var n,r=Object(u.a)(x.values());try{for(r.s();!(n=r.n()).done;){_(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function S(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;S(e,t).clearInstance(n)}function j(){O.clear()}var C=(v={},Object(s.a)(v,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Object(s.a)(v,"bad-app-name","Illegal App name: '{$appName}"),Object(s.a)(v,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Object(s.a)(v,"app-deleted","Firebase App named '{$appName}' already deleted"),Object(s.a)(v,"no-options","Need to provide options, when not being deployed to hosting via source."),Object(s.a)(v,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Object(s.a)(v,"invalid-log-argument","First argument to `onLog` must be null or a function."),Object(s.a)(v,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Object(s.a)(v,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Object(s.a)(v,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Object(s.a)(v,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),v),D=new d.b("app","Firebase",C),A=function(){function e(t,n,r){var i=this;Object(c.a)(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new f.a("app",(function(){return i}),"PUBLIC"))}return Object(l.a)(e,[{key:"checkDestroyed",value:function(){if(this.isDeleted)throw D.create("app-deleted",{appName:this._name})}},{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}}]),e}(),N="9.15.0";function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:k,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw D.create("bad-app-name",{appName:String(a)});if(n||(n=Object(d.l)()),!n)throw D.create("no-options");var o=x.get(a);if(o){if(Object(d.j)(n,o.options)&&Object(d.j)(i,o.config))return o;throw D.create("duplicate-app",{appName:a})}var s,c=new f.b(a),l=Object(u.a)(O.values());try{for(l.s();!(s=l.n()).done;){var h=s.value;c.addComponent(h)}}catch(v){l.e(v)}finally{l.f()}var p=new A(n,i,c);return x.set(a,p),p}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=x.get(e);if(!t&&e===k)return R();if(!t)throw D.create("no-app",{appName:e});return t}function L(){return Array.from(x.values())}function M(e){return F.apply(this,arguments)}function F(){return(F=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!x.has(n)){e.next=6;break}return x.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t,n){var r,i=null!==(r=w[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void b.warn(u.join(" "))}E(new f.a("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function U(e,t){if(null!==e&&"function"!==typeof e)throw D.create("invalid-log-argument");Object(h.d)(e,t)}function B(e){Object(h.c)(e)}var q="firebase-heartbeat-store",z=null;function K(){return z||(z=Object(y.a)("firebase-heartbeat-database",1,{upgrade:function(e,t){switch(t){case 0:e.createObjectStore(q)}}}).catch((function(e){throw D.create("idb-open",{originalErrorMessage:e.message})}))),z}function G(e){return H.apply(this,arguments)}function H(){return(H=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K();case 3:return n=e.sent,e.abrupt("return",n.transaction(q).objectStore(q).get(Y(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof d.c?b.warn(e.t0.message):(r=D.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),b.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Q(e,t){return W.apply(this,arguments)}function W(){return(W=Object(o.a)(a.a.mark((function e(t,n){var r,i,o,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K();case 3:return r=e.sent,i=r.transaction(q,"readwrite"),o=i.objectStore(q),e.next=8,o.put(n,Y(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof d.c?b.warn(e.t0.message):(u=D.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),b.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function Y(e){return"".concat(e.name,"!").concat(e.options.appId)}var $=function(){function e(t){var n=this;Object(c.a)(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new ee(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Object(l.a)(e,[{key:"triggerHeartbeat",value:function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=X(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,r,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=X(),n=J(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,o=Object(d.e)(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function X(){return(new Date).toISOString().substring(0,10)}function J(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Object(u.a)(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),te(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),te(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(c){a.e(c)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Z,ee=function(){function e(t){Object(c.a)(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Object(l.a)(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(d.r)()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",Object(d.u)().then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,G(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Q(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return i=e.sent,e.abrupt("return",Q(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:i.lastSentHeartbeatDate,heartbeats:[].concat(Object(r.a)(i.heartbeats),Object(r.a)(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function te(e){return Object(d.e)(JSON.stringify({version:2,heartbeats:e})).length}Z="",E(new f.a("platform-logger",(function(e){return new m(e)}),"PRIVATE")),E(new f.a("heartbeat",(function(e){return new $(e)}),"PRIVATE")),V(g,"0.9.0",Z),V(g,"0.9.0","esm2017"),V("fire-js","")},function(e,t,n){"use strict";e.exports=n(36)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(21);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(25);var i=n(21);function a(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(i.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return p}));var r=n(0),i=n.n(r),a=n(13),o=n(3),u=n(12),s=n(4),c=n(1),l=n(2),f=n(5),h=function(){function e(t,n,r){Object(c.a)(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Object(l.a)(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),d=function(){function e(t,n){Object(c.a)(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Object(l.a)(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new f.a;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(l){}var t,n=Object(s.a)(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=Object(u.a)(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var c=this.getOrInitializeService({instanceIdentifier:o});a.resolve(c)}catch(l){}}}catch(f){n.e(f)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Object(a.a)(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Object(a.a)(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Object(s.a)(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var c=Object(u.a)(i.value,2),l=c[0],f=c[1],h=this.normalizeInstanceIdentifier(l);r===h&&f.resolve(a)}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Object(s.a)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,"[DEFAULT]"===t?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.component?this.component.multipleInstances?e:"[DEFAULT]":e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var p=function(){function e(t){Object(c.a)(this,e),this.name=t,this.providers=new Map}return Object(l.a)(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new d(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}()},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return y}));var r,i,a=n(4),o=n(1),u=n(2),s=n(7),c=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));var l={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},f=i.INFO,h=(r={},Object(s.a)(r,i.DEBUG,"log"),Object(s.a)(r,i.VERBOSE,"log"),Object(s.a)(r,i.INFO,"info"),Object(s.a)(r,i.WARN,"warn"),Object(s.a)(r,i.ERROR,"error"),r),d=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=h[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},p=function(){function e(t){Object(o.a)(this,e),this.name=t,this._logLevel=f,this._logHandler=d,this._userLogHandler=null,c.push(this)}return Object(u.a)(e,[{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?l[e]:e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.DEBUG].concat(t)),this._logHandler.apply(this,[this,i.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.VERBOSE].concat(t)),this._logHandler.apply(this,[this,i.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.INFO].concat(t)),this._logHandler.apply(this,[this,i.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.WARN].concat(t)),this._logHandler.apply(this,[this,i.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.ERROR].concat(t)),this._logHandler.apply(this,[this,i.ERROR].concat(t))}},{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in i))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}}]),e}();function v(e){c.forEach((function(t){t.setLogLevel(e)}))}function y(e,t){var n,r=Object(a.a)(c);try{var o=function(){var r=n.value,a=null;t&&t.level&&(a=l[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),u=2;u<r;u++)o[u-2]=arguments[u];var s=o.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==a&&void 0!==a?a:t.logLevel)&&e({level:i[n].toLowerCase(),message:s,args:o,type:t.name})}};for(r.s();!(n=r.n()).done;)o()}catch(u){r.e(u)}finally{r.f()}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return ur})),n.d(t,"b",(function(){return cr})),n.d(t,"c",(function(){return sr})),n.d(t,"d",(function(){return fr})),n.d(t,"e",(function(){return lr})),n.d(t,"f",(function(){return hr})),n.d(t,"g",(function(){return dr})),n.d(t,"h",(function(){return ar})),n.d(t,"i",(function(){return or}));var r,i=n(12),a=n(4),o=n(18),u=n(15),s=n(8),c=n(9),l=n(1),f=n(2),h="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},d={},p=p||{},v=h||self;function y(){}function m(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function g(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var b="closure_uid_"+(1e9*Math.random()>>>0),k=0;function w(e,t,n){return e.call.apply(e.bind,arguments)}function x(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function O(e,t,n){return(O=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:x).apply(null,arguments)}function _(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function T(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function E(){this.s=this.s,this.o=this.o}E.prototype.s=!1,E.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,b)&&e[b]||(e[b]=++k))},E.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var S=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function I(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function j(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(m(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function C(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!v.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{v.addEventListener("test",y,t),v.removeEventListener("test",y,t)}catch(n){}return e}();function A(e){return/^[\s\xa0]*$/.test(e)}var N=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function R(e,t){return e<t?-1:e>t?1:0}function P(){var e=v.navigator;return e&&(e=e.userAgent)?e:""}function L(e){return-1!=P().indexOf(e)}function M(e){return M[" "](e),e}M[" "]=y;var F,V=L("Opera"),U=L("Trident")||L("MSIE"),B=L("Edge"),q=B||U,z=L("Gecko")&&!(-1!=P().toLowerCase().indexOf("webkit")&&!L("Edge"))&&!(L("Trident")||L("MSIE"))&&!L("Edge"),K=-1!=P().toLowerCase().indexOf("webkit")&&!L("Edge");function G(){var e=v.document;return e?e.documentMode:void 0}e:{var H="",Q=function(){var e=P();return z?/rv:([^\);]+)(\)|;)/.exec(e):B?/Edge\/([\d\.]+)/.exec(e):U?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):K?/WebKit\/(\S+)/.exec(e):V?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Q&&(H=Q?Q[1]:""),U){var W=G();if(null!=W&&W>parseFloat(H)){F=String(W);break e}}F=H}var Y,$={};function X(){return function(e){var t=$;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=N(String(F)).split("."),n=N("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=R(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||R(0==a[2].length,0==o[2].length)||R(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(v.document&&U){var J=G();Y=J||(parseInt(F,10)||void 0)}else Y=void 0;var Z=Y;function ee(e,t){if(C.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(z){e:{try{M(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:te[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ee.X.h.call(this)}}T(ee,C);var te={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ne="closure_listenable_"+(1e6*Math.random()|0),re=0;function ie(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++re,this.ba=this.ea=!1}function ae(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function oe(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function ue(e){var t={};for(var n in e)t[n]=e[n];return t}var se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<se.length;a++)n=se[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function le(e){this.src=e,this.g={},this.h=0}function fe(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=S(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ae(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function he(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}le.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=he(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new ie(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var de="closure_lm_"+(1e6*Math.random()|0),pe={};function ve(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,a){if(Array.isArray(n)){for(var o=0;o<n.length;o++)e(t,n[o],r,i,a);return null}return r=xe(r),t&&t[ne]?t.O(n,r,g(i)?!!i.capture:!!i,a):ye(t,n,r,!0,i,a)}(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)ve(e,t[a],n,r,i);return null}return n=xe(n),e&&e[ne]?e.N(t,n,g(r)?!!r.capture:!!r,i):ye(e,t,n,!1,r,i)}function ye(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=g(i)?!!i.capture:!!i,u=ke(e);if(u||(e[de]=u=new le(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){var e=be;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ge(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function me(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[ne])fe(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ge(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ke(t))?(fe(n,e),0==n.h&&(n.src=null,t[de]=null)):ae(e)}}}function ge(e){return e in pe?pe[e]:pe[e]="on"+e}function be(e,t){if(e.ba)e=!0;else{t=new ee(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&me(e),e=n.call(r,t)}return e}function ke(e){return(e=e[de])instanceof le?e:null}var we="__closure_events_fn_"+(1e9*Math.random()>>>0);function xe(e){return"function"===typeof e?e:(e[we]||(e[we]=function(t){return e.handleEvent(t)}),e[we])}function Oe(){E.call(this),this.i=new le(this),this.P=this,this.I=null}function _e(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new C(t,e);else if(t instanceof C)t.target=t.target||e;else{var i=t;ce(t=new C(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Te(o,r,!0,t)&&i}if(i=Te(o=t.g=e,r,!0,t)&&i,i=Te(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Te(o=t.g=n[a],r,!1,t)&&i}function Te(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&fe(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}T(Oe,E),Oe.prototype[ne]=!0,Oe.prototype.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,a){if(Array.isArray(n))for(var o=0;o<n.length;o++)e(t,n[o],r,i,a);else i=g(i)?!!i.capture:!!i,r=xe(r),t&&t[ne]?(t=t.i,(n=String(n).toString())in t.g&&(-1<(r=he(o=t.g[n],r,i,a))&&(ae(o[r]),Array.prototype.splice.call(o,r,1),0==o.length&&(delete t.g[n],t.h--)))):t&&(t=ke(t))&&(n=t.g[n.toString()],t=-1,n&&(t=he(n,r,i,a)),(r=-1<t?n[t]:null)&&me(r))}(this,e,t,n,r)},Oe.prototype.M=function(){if(Oe.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ae(n[r]);delete t.g[e],t.h--}}this.I=null},Oe.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Oe.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ee=v.JSON.stringify;function Se(){var e=Pe,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ie,je=function(){function e(){Object(l.a)(this,e),this.h=this.g=null}return Object(f.a)(e,[{key:"add",value:function(e,t){var n=Ce.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Ce=new(function(){function e(t,n){Object(l.a)(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Object(f.a)(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new De}),(function(e){return e.reset()})),De=function(){function e(){Object(l.a)(this,e),this.next=this.g=this.h=null}return Object(f.a)(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Ae(e){v.setTimeout((function(){throw e}),0)}function Ne(e,t){Ie||function(){var e=v.Promise.resolve(void 0);Ie=function(){e.then(Le)}}(),Re||(Ie(),Re=!0),Pe.add(e,t)}var Re=!1,Pe=new je;function Le(){for(var e;e=Se();){try{e.h.call(e.g)}catch(n){Ae(n)}var t=Ce;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Re=!1}function Me(e,t){Oe.call(this),this.h=e||1,this.g=t||v,this.j=O(this.lb,this),this.l=Date.now()}function Fe(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function Ve(e,t,n){if("function"===typeof e)n&&(e=O(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=O(e.handleEvent,e)}return 2147483647<Number(t)?-1:v.setTimeout(e,t||0)}function Ue(e){e.g=Ve((function(){e.g=null,e.i&&(e.i=!1,Ue(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}T(Me,Oe),(r=Me.prototype).ca=!1,r.R=null,r.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),_e(this,"tick"),this.ca&&(Fe(this),this.start()))}},r.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.M=function(){Me.X.M.call(this),Fe(this),delete this.g};var Be=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i;return Object(l.a)(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Object(f.a)(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ue(this)}},{key:"M",value:function(){Object(o.a)(Object(u.a)(n.prototype),"M",this).call(this),this.g&&(v.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(E);function qe(e){E.call(this),this.h=e,this.g={}}T(qe,E);var ze=[];function Ke(e,t,n,r){Array.isArray(n)||(n&&(ze[0]=n.toString()),n=ze);for(var i=0;i<n.length;i++){var a=ve(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ge(e){oe(e.g,(function(e,t){this.g.hasOwnProperty(t)&&me(e)}),e),e.g={}}function He(){this.g=!0}function Qe(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Ee(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}qe.prototype.M=function(){qe.X.M.call(this),Ge(this)},qe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},He.prototype.Aa=function(){this.g=!1},He.prototype.info=function(){};var We={},Ye=null;function $e(){return Ye=Ye||new Oe}function Xe(e){C.call(this,We.Pa,e)}function Je(e){var t=$e();_e(t,new Xe(t))}function Ze(e,t){C.call(this,We.STAT_EVENT,e),this.stat=t}function et(e){var t=$e();_e(t,new Ze(t,e))}function tt(e,t){C.call(this,We.Qa,e),this.size=t}function nt(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return v.setTimeout((function(){e()}),t)}We.Pa="serverreachability",T(Xe,C),We.STAT_EVENT="statevent",T(Ze,C),We.Qa="timingevent",T(tt,C);var rt={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},it={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function at(){}function ot(e){return e.h||(e.h=e.i())}function ut(){}at.prototype.h=null;var st,ct={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function lt(){C.call(this,"d")}function ft(){C.call(this,"c")}function ht(){}function dt(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new qe(this),this.O=vt,e=q?125:void 0,this.T=new Me(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new pt}function pt(){this.i=null,this.g="",this.h=!1}T(lt,C),T(ft,C),T(ht,at),ht.prototype.g=function(){return new XMLHttpRequest},ht.prototype.i=function(){return{}},st=new ht;var vt=45e3,yt={},mt={};function gt(e,t,n){e.K=1,e.v=Mt(At(t)),e.s=n,e.P=!0,bt(e,null)}function bt(e,t){e.F=Date.now(),Ot(e),e.A=At(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),$t(n.i,"t",r),e.C=0,n=e.l.H,e.h=new pt,e.g=Jn(e.l,n?t:null,!e.s),0<e.N&&(e.L=new Be(O(e.La,e,e.g),e.N)),Ke(e.S,e.g,"readystatechange",e.ib),t=e.H?ue(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Je(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function kt(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function wt(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=xt(e,n))==mt){4==t&&(e.o=4,et(14),i=!1),Qe(e.j,e.m,null,"[Incomplete Response]");break}if(r==yt){e.o=4,et(15),Qe(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Qe(e.j,e.m,r,null),It(e,r)}kt(e)&&r!=mt&&r!=yt&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,et(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Kn(t),t.K=!0,et(11))):(Qe(e.j,e.m,n,"[Invalid Chunked Response]"),St(e),Et(e))}function xt(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?mt:(n=Number(t.substring(n,r)),isNaN(n)?yt:(r+=1)+n>t.length?mt:(t=t.substr(r,n),e.C=r+n,t))}function Ot(e){e.V=Date.now()+e.O,_t(e,e.O)}function _t(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=nt(O(e.gb,e),t)}function Tt(e){e.B&&(v.clearTimeout(e.B),e.B=null)}function Et(e){0==e.l.G||e.I||Qn(e.l,e)}function St(e){Tt(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Fe(e.T),Ge(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function It(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||an(n.h,e)))if(!e.J&&an(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Hn(n),Ln(n)}zn(n),et(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=nt(O(n.cb,n),6e3));if(1>=rn(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else Yn(n,11)}else if((e.J||n.g==e)&&Hn(n),!A(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(on(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,Lt(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=Xn(r,r.H?r.ka:null,r.V),d.J){un(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(Tt(p),Ot(p)),r.g=d}else qn(r);0<n.i.length&&Fn(n)}else"stop"!=a[0]&&"close"!=a[0]||Yn(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Yn(n,7):Pn(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}Je()}catch(a){}}function jt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(m(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(m(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(m(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(r=dt.prototype).setTimeout=function(e){this.O=e},r.ib=function(e){e=e.target;var t=this.L;t&&3==jn(e)?t.l():this.La(e)},r.La=function(e){try{if(e==this.g)e:{var t=jn(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||q||this.g&&(this.h.h||this.g.fa()||Cn(this.g)))){this.I||4!=t||7==n||Je(),Tt(this);var r=this.g.aa();this.Y=r;t:if(kt(this)){var i=Cn(this.g);e="";var a=i.length,o=4==jn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){St(this),Et(this);var u="";break t}this.h.i=new v.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,et(12),St(this),Et(this);break e}Qe(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,It(this,r)}this.P?(wt(this,t,u),q&&this.i&&3==t&&(Ke(this.S,this.T,"tick",this.hb),this.T.start())):(Qe(this.j,this.m,u,null),It(this,u)),4==t&&St(this),this.i&&!this.I&&(4==t?Qn(this.l,this):(this.i=!1,Ot(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,et(12)):(this.o=0,et(13)),St(this),Et(this)}}}catch(t){}},r.hb=function(){if(this.g){var e=jn(this.g),t=this.g.fa();this.C<t.length&&(Tt(this),wt(this,e,t),this.i&&4!=e&&Ot(this))}},r.cancel=function(){this.I=!0,St(this)},r.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Je(),et(17)),St(this),this.o=2,Et(this)):_t(this,this.V-e)};var Ct=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dt(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Dt){this.h=void 0!==t?t:e.h,Nt(this,e.j),this.s=e.s,this.g=e.g,Rt(this,e.m),this.l=e.l,t=e.i;var n=new Ht;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Pt(this,n),this.o=e.o}else e&&(n=String(e).match(Ct))?(this.h=!!t,Nt(this,n[1]||"",!0),this.s=Ft(n[2]||""),this.g=Ft(n[3]||"",!0),Rt(this,n[4]),this.l=Ft(n[5]||"",!0),Pt(this,n[6]||"",!0),this.o=Ft(n[7]||"")):(this.h=!!t,this.i=new Ht(null,this.h))}function At(e){return new Dt(e)}function Nt(e,t,n){e.j=n?Ft(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Rt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Pt(e,t,n){t instanceof Ht?(e.i=t,function(e,t){t&&!e.j&&(Qt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Wt(this,t),$t(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Vt(t,Kt)),e.i=new Ht(t,e.h))}function Lt(e,t,n){e.i.set(t,n)}function Mt(e){return Lt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ft(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Vt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ut),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ut(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Dt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Vt(t,Bt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Vt(t,Bt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Vt(n,"/"==n.charAt(0)?zt:qt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Vt(n,Gt)),e.join("")};var Bt=/[#\/\?@]/g,qt=/[#\?:]/g,zt=/[#\?]/g,Kt=/[#\?@]/g,Gt=/#/g;function Ht(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Qt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Wt(e,t){Qt(e),t=Xt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Yt(e,t){return Qt(e),t=Xt(e,t),e.g.has(t)}function $t(e,t,n){Wt(e,t),0<n.length&&(e.i=null,e.g.set(Xt(e,t),I(n)),e.h+=n.length)}function Xt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(r=Ht.prototype).add=function(e,t){Qt(this),this.i=null,e=Xt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},r.forEach=function(e,t){Qt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},r.oa=function(){Qt(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},r.W=function(e){Qt(this);var t=[];if("string"===typeof e)Yt(this,e)&&(t=t.concat(this.g.get(Xt(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},r.set=function(e,t){return Qt(this),this.i=null,Yt(this,e=Xt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},r.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Jt=function e(t,n){Object(l.a)(this,e),this.h=t,this.g=n};function Zt(e){this.l=e||tn,v.PerformanceNavigationTiming?e=0<(e=v.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(v.g&&v.g.Ga&&v.g.Ga()&&v.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var en,tn=10;function nn(e){return!!e.h||!!e.g&&e.g.size>=e.j}function rn(e){return e.h?1:e.g?e.g.size:0}function an(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function on(e,t){e.g?e.g.add(t):e.h=t}function un(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function sn(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Object(a.a)(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(o){r.e(o)}finally{r.f()}return n}return I(e.i)}function cn(){}function ln(){this.g=new cn}function fn(e,t,n){var r=n||"";try{jt(e,(function(e,n){var i=e;g(e)&&(i=Ee(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function hn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function dn(e){this.l=e.ac||null,this.j=e.jb||!1}function pn(e,t){Oe.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=vn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Zt.prototype.cancel=function(){if(this.i=sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Object(a.a)(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},cn.prototype.stringify=function(e){return v.JSON.stringify(e,void 0)},cn.prototype.parse=function(e){return v.JSON.parse(e,void 0)},T(dn,at),dn.prototype.g=function(){return new pn(this.l,this.j)},dn.prototype.i=(en={},function(){return en}),T(pn,Oe);var vn=0;function yn(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function mn(e){e.readyState=4,e.l=null,e.j=null,e.A=null,gn(e)}function gn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(r=pn.prototype).open=function(e,t){if(this.readyState!=vn)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,gn(this)},r.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||v).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mn(this)),this.readyState=vn},r.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,gn(this)),this.g&&(this.readyState=3,gn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof v.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yn(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},r.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?mn(this):gn(this),3==this.readyState&&yn(this)}},r.Va=function(e){this.g&&(this.response=this.responseText=e,mn(this))},r.Ua=function(e){this.g&&(this.response=e,mn(this))},r.ga=function(){this.g&&mn(this)},r.setRequestHeader=function(e,t){this.v.append(e,t)},r.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(pn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var bn=v.JSON.parse;function kn(e){Oe.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=wn,this.K=this.L=!1}T(kn,Oe);var wn="",xn=/^https?$/i,On=["POST","PUT"];function _n(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Tn(e),Sn(e)}function Tn(e){e.D||(e.D=!0,_e(e,"complete"),_e(e,"error"))}function En(e){if(e.h&&"undefined"!=typeof p&&(!e.C[1]||4!=jn(e)||2!=e.aa()))if(e.v&&4==jn(e))Ve(e.Ha,0,e);else if(_e(e,"readystatechange"),4==jn(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Ct)[1]||null;if(!a&&v.self&&v.self.location){var o=v.self.location.protocol;a=o.substr(0,o.length-1)}i=!xn.test(a?a.toLowerCase():"")}t=i}if(t)_e(e,"complete"),_e(e,"success");else{e.m=6;try{var u=2<jn(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",Tn(e)}}finally{Sn(e)}}}function Sn(e,t){if(e.g){In(e);var n=e.g,r=e.C[0]?y:null;e.g=null,e.C=null,t||_e(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function In(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(v.clearTimeout(e.A),e.A=null)}function jn(e){return e.g?e.g.readyState:0}function Cn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case wn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Dn(e){var t="";return oe(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function An(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Dn(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Lt(e,t,n))}function Nn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Rn(e){this.Ca=0,this.i=[],this.j=new He,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Nn("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Nn("baseRetryDelayMs",5e3,e),this.bb=Nn("retryDelaySeedMs",1e4,e),this.$a=Nn("forwardChannelMaxRetries",2,e),this.ta=Nn("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Zt(e&&e.concurrentRequestLimit),this.Fa=new ln,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Pn(e){if(Mn(e),3==e.G){var t=e.U++,n=At(e.F);Lt(n,"SID",e.I),Lt(n,"RID",t),Lt(n,"TYPE","terminate"),Un(e,n),(t=new dt(e,e.j,t,void 0)).K=2,t.v=Mt(At(n)),n=!1,v.navigator&&v.navigator.sendBeacon&&(n=v.navigator.sendBeacon(t.v.toString(),"")),!n&&v.Image&&((new Image).src=t.v,n=!0),n||(t.g=Jn(t.l,null),t.g.da(t.v)),t.F=Date.now(),Ot(t)}$n(e)}function Ln(e){e.g&&(Kn(e),e.g.cancel(),e.g=null)}function Mn(e){Ln(e),e.u&&(v.clearTimeout(e.u),e.u=null),Hn(e),e.h.cancel(),e.m&&("number"===typeof e.m&&v.clearTimeout(e.m),e.m=null)}function Fn(e){nn(e.h)||e.m||(e.m=!0,Ne(e.Ja,e),e.C=0)}function Vn(e,t){var n;n=t?t.m:e.U++;var r=At(e.F);Lt(r,"SID",e.I),Lt(r,"RID",n),Lt(r,"AID",e.T),Un(e,r),e.o&&e.s&&An(r,e.o,e.s),n=new dt(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=Bn(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),on(e.h,n),gt(n,r,t)}function Un(e,t){e.ia&&oe(e.ia,(function(e,n){Lt(t,n,e)})),e.l&&jt({},(function(e,n){Lt(t,n,e)}))}function Bn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?O(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{fn(l,o,"req"+c+"_")}catch(f){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function qn(e){e.g||e.u||(e.Z=1,Ne(e.Ia,e),e.A=0)}function zn(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=nt(O(e.Ia,e),Wn(e,e.A)),e.A++,!0)}function Kn(e){null!=e.B&&(v.clearTimeout(e.B),e.B=null)}function Gn(e){e.g=new dt(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=At(e.sa);Lt(t,"RID","rpc"),Lt(t,"SID",e.I),Lt(t,"CI",e.L?"0":"1"),Lt(t,"AID",e.T),Lt(t,"TYPE","xmlhttp"),Un(e,t),e.o&&e.s&&An(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=Mt(At(t)),n.s=null,n.P=!0,bt(n,e)}function Hn(e){null!=e.v&&(v.clearTimeout(e.v),e.v=null)}function Qn(e,t){var n=null;if(e.g==t){Hn(e),Kn(e),e.g=null;var r=2}else{if(!an(e.h,t))return;n=t.D,un(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;_e(r=$e(),new tt(r,n)),Fn(e)}else qn(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(rn(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=nt(O(e.Ja,e,t),Wn(e,e.C)),e.C++,!0))}(e,t)||2==r&&zn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Yn(e,5);break;case 4:Yn(e,10);break;case 3:Yn(e,6);break;default:Yn(e,2)}}function Wn(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function Yn(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=O(e.kb,e);n||(n=new Dt("//www.google.com/images/cleardot.gif"),v.location&&"http"==v.location.protocol||Nt(n,"https"),Mt(n)),function(e,t){var n=new He;if(v.Image){var r=new Image;r.onload=_(hn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=_(hn,n,r,"TestLoadImage: error",!1,t),r.onabort=_(hn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=_(hn,n,r,"TestLoadImage: timeout",!1,t),v.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else et(2);e.G=0,e.l&&e.l.va(t),$n(e),Mn(e)}function $n(e){if(e.G=0,e.la=[],e.l){var t=sn(e.h);0==t.length&&0==e.i.length||(j(e.la,t),j(e.la,e.i),e.h.i.length=0,I(e.i),e.i.length=0),e.l.ua()}}function Xn(e,t,n){var r=n instanceof Dt?At(n):new Dt(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Rt(r,r.m);else{var i=v.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Dt(null,void 0);r&&Nt(a,r),t&&(a.g=t),i&&Rt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&Lt(r,n,t),Lt(r,"VER",e.ma),Un(e,r),r}function Jn(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new kn(new dn({jb:!0})):new kn(e.ra)).Ka(e.H),t}function Zn(){}function er(){if(U&&!(10<=Number(Z)))throw Error("Environmental error: no available transport.")}function tr(e,t){Oe.call(this),this.g=new Rn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!A(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!A(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ir(this)}function nr(e){lt.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function rr(){ft.call(this),this.status=1}function ir(e){this.g=e}(r=kn.prototype).Ka=function(e){this.L=e},r.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():st.g(),this.C=this.u?ot(this.u):ot(st),this.g.onreadystatechange=O(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(c){return void _n(this,c)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var u,s=Object(a.a)(r.keys());try{for(s.s();!(u=s.n()).done;){var c=u.value;n.set(c,r.get(c))}}catch(y){s.e(y)}finally{s.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),o=v.FormData&&e instanceof v.FormData,!(0<=S(On,t))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var l,f=Object(a.a)(n);try{for(f.s();!(l=f.n()).done;){var h=Object(i.a)(l.value,2),d=h[0],p=h[1];this.g.setRequestHeader(d,p)}}catch(y){f.e(y)}finally{f.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{In(this),0<this.B&&((this.K=function(e){return U&&X()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=O(this.qa,this)):this.A=Ve(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(c){_n(this,c)}},r.qa=function(){"undefined"!=typeof p&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_e(this,"timeout"),this.abort(8))},r.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,_e(this,"complete"),_e(this,"abort"),Sn(this))},r.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Sn(this,!0)),kn.X.M.call(this)},r.Ha=function(){this.s||(this.F||this.v||this.l?En(this):this.fb())},r.fb=function(){En(this)},r.aa=function(){try{return 2<jn(this)?this.g.status:-1}catch(en){return-1}},r.fa=function(){try{return this.g?this.g.responseText:""}catch(en){return""}},r.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),bn(t)}},r.Ea=function(){return this.m},r.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(r=Rn.prototype).ma=8,r.G=1,r.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new dt(this,this.j,e,void 0),n=this.s;if(this.S&&(n?ce(n=ue(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Bn(this,t,r),Lt(i=At(this.F),"RID",e),Lt(i,"CVER",22),this.D&&Lt(i,"X-HTTP-Session-Id",this.D),Un(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(Dn(n)))+"&"+r:this.o&&An(i,this.o,n)),on(this.h,t),this.Ya&&Lt(i,"TYPE","init"),this.O?(Lt(i,"$req",r),Lt(i,"SID","null"),t.Z=!0,gt(t,i,null)):gt(t,i,r),this.G=2}}else 3==this.G&&(e?Vn(this,e):0==this.i.length||nn(this.h)||Vn(this))},r.Ia=function(){if(this.u=null,Gn(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=nt(O(this.eb,this),e)}},r.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,et(10),Ln(this),Gn(this))},r.cb=function(){null!=this.v&&(this.v=null,Ln(this),zn(this),et(19))},r.kb=function(e){e?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))},(r=Zn.prototype).xa=function(){},r.wa=function(){},r.va=function(){},r.ua=function(){},r.Ra=function(){},er.prototype.g=function(e,t){return new tr(e,t)},T(tr,Oe),tr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;et(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Xn(e,null,e.V),Fn(e)},tr.prototype.close=function(){Pn(this.g)},tr.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ee(e),e=n);t.i.push(new Jt(t.ab++,e)),3==t.G&&Fn(t)},tr.prototype.M=function(){this.g.l=null,delete this.j,Pn(this.g),delete this.g,tr.X.M.call(this)},T(nr,lt),T(rr,ft),T(ir,Zn),ir.prototype.xa=function(){_e(this.g,"a")},ir.prototype.wa=function(e){_e(this.g,new nr(e))},ir.prototype.va=function(e){_e(this.g,new rr)},ir.prototype.ua=function(){_e(this.g,"b")},er.prototype.createWebChannel=er.prototype.g,tr.prototype.send=tr.prototype.u,tr.prototype.open=tr.prototype.m,tr.prototype.close=tr.prototype.close,rt.NO_ERROR=0,rt.TIMEOUT=8,rt.HTTP_ERROR=6,it.COMPLETE="complete",ut.EventType=ct,ct.OPEN="a",ct.CLOSE="b",ct.ERROR="c",ct.MESSAGE="d",Oe.prototype.listen=Oe.prototype.N,kn.prototype.listenOnce=kn.prototype.O,kn.prototype.getLastError=kn.prototype.Oa,kn.prototype.getLastErrorCode=kn.prototype.Ea,kn.prototype.getStatus=kn.prototype.aa,kn.prototype.getResponseJson=kn.prototype.Sa,kn.prototype.getResponseText=kn.prototype.fa,kn.prototype.send=kn.prototype.da,kn.prototype.setWithCredentials=kn.prototype.Ka;var ar=d.createWebChannelTransport=function(){return new er},or=d.getStatEventTarget=function(){return $e()},ur=d.ErrorCode=rt,sr=d.EventType=it,cr=d.Event=We,lr=d.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},fr=d.FetchXmlHttpFactory=dn,hr=d.WebChannel=ut,dr=d.XhrIo=kn}).call(this,n(30))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(15);function i(e,t,n){return(i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(r.a)(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r,i=n(7),a=n(1),o=n(2),u=n(5),s=n(14),c=n(10),l=n(16),f=function(){function e(t,n){var r=this;Object(a.a)(this,e),this._delegate=t,this.firebase=n,Object(c._addComponent)(t,new s.a("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Object(o.a)(e,[{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Object(c.deleteApp)(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c._DEFAULT_ENTRY_NAME;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c._DEFAULT_ENTRY_NAME;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Object(c._addComponent)(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Object(c._addOrOverwriteComponent)(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}},{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}}]),e}(),h=(r={},Object(i.a)(r,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Object(i.a)(r,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),r),d=new u.b("app-compat","Firebase",h);var p=function e(){var t=function(e){var t={},n={__esModule:!0,initializeApp:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=c.initializeApp(r,i);if(Object(u.g)(t,a.name))return t[a.name];var o=new e(a,n);return t[a.name]=o,o},app:r,registerVersion:c.registerVersion,setLogLevel:c.setLogLevel,onLog:c.onLog,apps:null,SDK_VERSION:c.SDK_VERSION,INTERNAL:{registerComponent:function(t){var i=t.name,a=i.replace("-compat","");if(c._registerComponent(t)&&"PUBLIC"===t.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();if("function"!==typeof e[a])throw d.create("invalid-app-argument",{appName:i});return e[a]()};void 0!==t.serviceProps&&Object(u.k)(o,t.serviceProps),n[a]=o,e.prototype[a]=function(){for(var e=this._getService.bind(this,i),n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e.apply(this,t.multipleInstances?r:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){if("serverAuth"===t)return null;return t},modularAPIs:c}};function r(e){if(e=e||c._DEFAULT_ENTRY_NAME,!Object(u.g)(t,e))throw d.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),r.App=e,n}(f);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Object(u.k)(t,e)},createSubscribe:u.i,ErrorFactory:u.b,deepExtend:u.k}),t}(),v=new l.b("@firebase/app-compat");if(Object(u.p)()&&void 0!==self.firebase){v.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&v.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var m,g=p;Object(c.registerVersion)("@firebase/app-compat","0.2.0",m)},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(25);function i(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(22),i=n(27);function a(e,t,n){return(a=Object(i.a)()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&Object(r.a)(a,n.prototype),a}).apply(null,arguments)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(7);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(19);n.d(t,"a",(function(){return r.a}));r.a.registerVersion("firebase","9.15.0","app-compat")},function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r,i,a=n(24),o=n(0),u=n.n(o),s=n(3);var c=new WeakMap,l=new WeakMap,f=new WeakMap,h=new WeakMap,d=new WeakMap;var p={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return l.get(e);if("objectStoreNames"===t)return e.objectStoreNames||f.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return m(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function v(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(g(this),n),m(c.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return m(e.apply(g(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[g(this),t].concat(r));return f.set(a,t.sort?t.sort():[t]),m(a)}}function y(e){return"function"===typeof e?v(e):(e instanceof IDBTransaction&&function(e){if(!l.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));l.set(e,t)}}(e),t=e,(r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,p):e);var t}function m(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(m(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&c.set(t,e)})).catch((function(){})),d.set(t,e),t}(e);if(h.has(e))return h.get(e);var t=y(e);return t!==e&&(h.set(e,t),d.set(t,e)),t}var g=function(e){return d.get(e)};function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=m(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(m(u.result),e.oldVersion,e.newVersion,m(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}var k=["get","getKey","getAll","getAllKeys","count"],w=["put","add","delete","clear"],x=new Map;function O(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(x.get(t))return x.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=w.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||k.includes(n))){var a=function(){var e=Object(s.a)(u.a.mark((function e(t){var a,o,s,c,l,f,h=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,c=h.length,l=new Array(c>1?c-1:0),f=1;f<c;f++)l[f-1]=h[f];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,l),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return x.set(t,a),a}}}p=function(e){return Object(a.a)(Object(a.a)({},e),{},{get:function(t,n,r){return O(t,n)||e.get(t,n,r)},has:function(t,n){return!!O(t,n)||e.has(t,n)}})}(p)},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,u,s=o(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(s[l]=n[l]);if(r){u=r(n);for(var f=0;f<u.length;f++)a.call(n,u[f])&&(s[u[f]]=n[u[f]])}}return s}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var s,c=[],l=!1,f=-1;function h(){l&&s&&(l=!1,s.length?c=s.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=u(h);l=!0;for(var t=c.length;t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||u(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}}(),e.exports=n(37)},function(e,t,n){"use strict";n.d(t,"a",(function(){return vt}));var r,i=n(12),a=n(4),o=n(1),u=n(2),s=n(7),c=n(0),l=n.n(c),f=n(3),h=n(10),d=n(16),p=n(5),v=n(14),y=n(13),m=n(28),g="w:".concat("0.6.0"),b=(r={},Object(s.a)(r,"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),Object(s.a)(r,"not-registered","Firebase Installation is not registered."),Object(s.a)(r,"installation-not-found","Firebase Installation not found."),Object(s.a)(r,"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),Object(s.a)(r,"app-offline","Could not process request. Application offline."),Object(s.a)(r,"delete-pending-registration","Can't delete installation while there is a pending registration request."),r),k=new p.b("installations","Installations",b);function w(e){return e instanceof p.c&&e.code.includes("request-failed")}function x(e){var t=e.projectId;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function O(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function _(e,t){return T.apply(this,arguments)}function T(){return(T=Object(f.a)(l.a.mark((function e(t,n){var r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:return r=e.sent,i=r.error,e.abrupt("return",k.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function S(e,t){var n=t.refreshToken,r=E(e);return r.append("Authorization",function(e){return"".concat("FIS_v2"," ").concat(e)}(n)),r}function I(e){return j.apply(this,arguments)}function j(){return(j=Object(f.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(!((n=e.sent).status>=500&&n.status<600)){e.next=5;break}return e.abrupt("return",t());case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){return D.apply(this,arguments)}function D(){return(D=Object(f.a)(l.a.mark((function e(t,n){var r,i,a,o,u,s,c,f,h,d,p,v;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=n.fid,o=x(r),u=E(r),!(s=i.getImmediate({optional:!0}))){e.next=10;break}return e.next=8,s.getHeartbeatsHeader();case 8:(c=e.sent)&&u.append("x-firebase-client",c);case 10:return f={fid:a,authVersion:"FIS_v2",appId:r.appId,sdkVersion:g},h={method:"POST",headers:u,body:JSON.stringify(f)},e.next=14,I((function(){return fetch(o,h)}));case 14:if(!(d=e.sent).ok){e.next=23;break}return e.next=18,d.json();case 18:return p=e.sent,v={fid:p.fid||a,registrationStatus:2,refreshToken:p.refreshToken,authToken:O(p.authToken)},e.abrupt("return",v);case 23:return e.next=25,_("Create Installation",d);case 25:throw e.sent;case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return new Promise((function(t){setTimeout(t,e)}))}var N=/^[cdef][\w-]{21}$/;function R(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,Object(y.a)(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return N.test(t)?t:""}catch(n){return""}}function P(e){return"".concat(e.appName,"!").concat(e.appId)}var L=new Map;function M(e,t){var n=P(e);F(n,t),function(e,t){var n=U();n&&n.postMessage({key:e,fid:t});B()}(n,t)}function F(e,t){var n=L.get(e);if(n){var r,i=Object(a.a)(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)(t)}}catch(o){i.e(o)}finally{i.f()}}}var V=null;function U(){return!V&&"BroadcastChannel"in self&&((V=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){F(e.data.key,e.data.fid)}),V}function B(){0===L.size&&V&&(V.close(),V=null)}var q="firebase-installations-store",z=null;function K(){return z||(z=Object(m.a)("firebase-installations-database",1,{upgrade:function(e,t){switch(t){case 0:e.createObjectStore(q)}}})),z}function G(e,t){return H.apply(this,arguments)}function H(){return(H=Object(f.a)(l.a.mark((function e(t,n){var r,i,a,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=P(t),e.next=3,K();case 3:return i=e.sent,a=i.transaction(q,"readwrite"),o=a.objectStore(q),e.next=8,o.get(r);case 8:return u=e.sent,e.next=11,o.put(n,r);case 11:return e.next=13,a.done;case 13:return u&&u.fid===n.fid||M(t,n.fid),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return W.apply(this,arguments)}function W(){return(W=Object(f.a)(l.a.mark((function e(t){var n,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=P(t),e.next=3,K();case 3:return r=e.sent,i=r.transaction(q,"readwrite"),e.next=7,i.objectStore(q).delete(n);case 7:return e.next=9,i.done;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t){return $.apply(this,arguments)}function $(){return($=Object(f.a)(l.a.mark((function e(t,n){var r,i,a,o,u,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=P(t),e.next=3,K();case 3:return i=e.sent,a=i.transaction(q,"readwrite"),o=a.objectStore(q),e.next=8,o.get(r);case 8:if(u=e.sent,void 0!==(s=n(u))){e.next=15;break}return e.next=13,o.delete(r);case 13:e.next=17;break;case 15:return e.next=17,o.put(s,r);case 17:return e.next=19,a.done;case 19:return!s||u&&u.fid===s.fid||M(t,s.fid),e.abrupt("return",s);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return J.apply(this,arguments)}function J(){return(J=Object(f.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(t.appConfig,(function(e){var r=Z(e),i=ee(t,r);return n=i.registrationPromise,i.installationEntry}));case 2:if(""!==(r=e.sent).fid){e.next=8;break}return e.next=6,n;case 6:return e.t0=e.sent,e.abrupt("return",{installationEntry:e.t0});case 8:return e.abrupt("return",{installationEntry:r,registrationPromise:n});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return ae(e||{fid:R(),registrationStatus:0})}function ee(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(k.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return te.apply(this,arguments)}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:ne(e)}:{installationEntry:t}}function te(){return(te=Object(f.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C(t,n);case 3:return r=e.sent,e.abrupt("return",G(t.appConfig,r));case 7:if(e.prev=7,e.t0=e.catch(0),!w(e.t0)||409!==e.t0.customData.serverCode){e.next=14;break}return e.next=12,Q(t.appConfig);case 12:e.next=16;break;case 14:return e.next=16,G(t.appConfig,{fid:n.fid,registrationStatus:0});case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ne(e){return re.apply(this,arguments)}function re(){return(re=Object(f.a)(l.a.mark((function e(t){var n,r,i,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(t.appConfig);case 2:n=e.sent;case 3:if(1!==n.registrationStatus){e.next=11;break}return e.next=6,A(100);case 6:return e.next=8,ie(t.appConfig);case 8:n=e.sent,e.next=3;break;case 11:if(0!==n.registrationStatus){e.next=22;break}return e.next=14,X(t);case 14:if(r=e.sent,i=r.installationEntry,!(a=r.registrationPromise)){e.next=21;break}return e.abrupt("return",a);case 21:return e.abrupt("return",i);case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e){return Y(e,(function(e){if(!e)throw k.create("installation-not-found");return ae(e)}))}function ae(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function oe(e,t){return ue.apply(this,arguments)}function ue(){return(ue=Object(f.a)(l.a.mark((function e(t,n){var r,i,a,o,u,s,c,f,h,d,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=se(r,n),o=S(r,n),!(u=i.getImmediate({optional:!0}))){e.next=9;break}return e.next=7,u.getHeartbeatsHeader();case 7:(s=e.sent)&&o.append("x-firebase-client",s);case 9:return c={installation:{sdkVersion:g,appId:r.appId}},f={method:"POST",headers:o,body:JSON.stringify(c)},e.next=13,I((function(){return fetch(a,f)}));case 13:if(!(h=e.sent).ok){e.next=22;break}return e.next=17,h.json();case 17:return d=e.sent,p=O(d),e.abrupt("return",p);case 22:return e.next=24,_("Generate Auth Token",h);case 24:throw e.sent;case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e,t){var n=t.fid;return"".concat(x(e),"/").concat(n,"/authTokens:generate")}function ce(e){return le.apply(this,arguments)}function le(){return(le=Object(f.a)(l.a.mark((function e(t){var n,r,i,a,o=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],e.next=3,Y(t.appConfig,(function(e){if(!ye(e))throw k.create("not-registered");var i=e.authToken;if(!n&&me(i))return e;if(1===i.requestStatus)return r=fe(t,n),e;if(!navigator.onLine)throw k.create("app-offline");var a=ge(e);return r=pe(t,a),a}));case 3:if(i=e.sent,!r){e.next=10;break}return e.next=7,r;case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=i.authToken;case 11:return a=e.t0,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e,t){return he.apply(this,arguments)}function he(){return(he=Object(f.a)(l.a.mark((function e(t,n){var r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(t.appConfig);case 2:r=e.sent;case 3:if(1!==r.authToken.requestStatus){e.next=11;break}return e.next=6,A(100);case 6:return e.next=8,de(t.appConfig);case 8:r=e.sent,e.next=3;break;case 11:if(0!==(i=r.authToken).requestStatus){e.next=16;break}return e.abrupt("return",ce(t,n));case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e){return Y(e,(function(e){if(!ye(e))throw k.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e}))}function pe(e,t){return ve.apply(this,arguments)}function ve(){return(ve=Object(f.a)(l.a.mark((function e(t,n){var r,i,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe(t,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{authToken:r}),e.next=7,G(t.appConfig,i);case 7:return e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(0),!w(e.t0)||401!==e.t0.customData.serverCode&&404!==e.t0.customData.serverCode){e.next=17;break}return e.next=15,Q(t.appConfig);case 15:e.next=20;break;case 17:return a=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.next=20,G(t.appConfig,a);case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function ye(e){return void 0!==e&&2===e.registrationStatus}function me(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(e)}function ge(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function be(){return(be=Object(f.a)(l.a.mark((function e(t){var n,r,i,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,X(n);case 3:return r=e.sent,i=r.installationEntry,(a=r.registrationPromise)?a.catch(console.error):ce(n).catch(console.error),e.abrupt("return",i.fid);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(){return(ke=Object(f.a)(l.a.mark((function e(t){var n,r,i,a=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],r=t,e.next=4,we(r);case 4:return e.next=6,ce(r,n);case 6:return i=e.sent,e.abrupt("return",i.token);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e){return xe.apply(this,arguments)}function xe(){return(xe=Object(f.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(t);case 2:if(n=e.sent,!(r=n.registrationPromise)){e.next=7;break}return e.next=7,r;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e){return k.create("missing-app-config-values",{valueName:e})}var _e,Te=function(e){var t=e.getProvider("app").getImmediate();return{app:t,appConfig:function(e){if(!e||!e.options)throw Oe("App Configuration");if(!e.name)throw Oe("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw Oe(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),heartbeatServiceProvider:Object(h._getProvider)(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},Ee=function(e){var t=e.getProvider("app").getImmediate(),n=Object(h._getProvider)(t,"installations").getImmediate();return{getId:function(){return function(e){return be.apply(this,arguments)}(n)},getToken:function(e){return function(e){return ke.apply(this,arguments)}(n,e)}}};Object(h._registerComponent)(new v.a("installations",Te,"PUBLIC")),Object(h._registerComponent)(new v.a("installations-internal",Ee,"PRIVATE")),Object(h.registerVersion)("@firebase/installations","0.6.0"),Object(h.registerVersion)("@firebase/installations","0.6.0","esm2017");var Se="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ie="https://www.googletagmanager.com/gtag/js",je=new d.b("@firebase/analytics");function Ce(e){return Promise.all(e.map((function(e){return e.catch((function(e){return e}))})))}function De(e,t){var n=document.createElement("script");n.src="".concat(Ie,"?l=").concat(e,"&id=").concat(t),n.async=!0,document.head.appendChild(n)}function Ae(e,t,n,r,i,a){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(f.a)(l.a.mark((function e(t,n,r,i,a,o){var u,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=i[a],e.prev=1,!u){e.next=7;break}return e.next=5,n[u];case 5:e.next=14;break;case 7:return e.next=9,Ce(r);case 9:if(s=e.sent,!(c=s.find((function(e){return e.measurementId===a})))){e.next=14;break}return e.next=14,n[c.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),je.error(e.t0);case 19:t("config",a,o);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}function Re(e,t,n,r,i){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(f.a)(l.a.mark((function e(t,n,r,i,o){var u,s,c,f,h,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u=[],!o||!o.send_to){e.next=26;break}return s=o.send_to,Array.isArray(s)||(s=[s]),e.next=7,Ce(r);case 7:c=e.sent,f=Object(a.a)(s),e.prev=9,d=function(){var e=h.value,t=c.find((function(t){return t.measurementId===e})),r=t&&n[t.appId];if(!r)return u=[],"break";u.push(r)},f.s();case 12:if((h=f.n()).done){e.next=18;break}if("break"!==d()){e.next=16;break}return e.abrupt("break",18);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),f.e(e.t0);case 23:return e.prev=23,f.f(),e.finish(23);case 26:return 0===u.length&&(u=Object.values(n)),e.next=29,Promise.all(u);case 29:t("event",i,o||{}),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),je.error(e.t1);case 35:case"end":return e.stop()}}),e,null,[[0,32],[9,20,23,26]])})))).apply(this,arguments)}function Le(e,t,n,r,i){var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(a=window[i]),window[i]=function(e,t,n,r){function i(){return(i=Object(f.a)(l.a.mark((function i(a,o,u){return l.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,"event"!==a){i.next=6;break}return i.next=4,Re(e,t,n,o,u);case 4:i.next=12;break;case 6:if("config"!==a){i.next=11;break}return i.next=9,Ae(e,t,n,r,o,u);case 9:i.next=12;break;case 11:"consent"===a?e("consent","update",u):e("set",o);case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(0),je.error(i.t0);case 17:case"end":return i.stop()}}),i,null,[[0,14]])})))).apply(this,arguments)}return function(e,t,n){return i.apply(this,arguments)}}(a,e,t,n),{gtagCore:a,wrappedGtag:window[i]}}function Me(e){for(var t=window.document.getElementsByTagName("script"),n=0,r=Object.values(t);n<r.length;n++){var i=r[n];if(i.src&&i.src.includes(Ie)&&i.src.includes(e))return i}return null}var Fe=(_e={},Object(s.a)(_e,"already-exists","A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),Object(s.a)(_e,"already-initialized","initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance."),Object(s.a)(_e,"already-initialized-settings","Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),Object(s.a)(_e,"interop-component-reg-failed","Firebase Analytics Interop Component failed to instantiate: {$reason}"),Object(s.a)(_e,"invalid-analytics-context","Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),Object(s.a)(_e,"indexeddb-unavailable","IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),Object(s.a)(_e,"fetch-throttle","The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),Object(s.a)(_e,"config-fetch-failed","Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),Object(s.a)(_e,"no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),Object(s.a)(_e,"no-app-id",'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),_e),Ve=new p.b("analytics","Analytics",Fe),Ue=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;Object(o.a)(this,e),this.throttleMetadata=t,this.intervalMillis=n}return Object(u.a)(e,[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}]),e}());function Be(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function qe(e){return ze.apply(this,arguments)}function ze(){return(ze=Object(f.a)(l.a.mark((function e(t){var n,r,i,a,o,u,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appId,i=t.apiKey,a={method:"GET",headers:Be(i)},o=Se.replace("{app-id}",r),e.next=5,fetch(o,a);case 5:if(200===(u=e.sent).status||304===u.status){e.next=18;break}return s="",e.prev=8,e.next=11,u.json();case 11:c=e.sent,(null===(n=c.error)||void 0===n?void 0:n.message)&&(s=c.error.message),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(8);case 17:throw Ve.create("config-fetch-failed",{httpStatus:u.status,responseMessage:s});case 18:return e.abrupt("return",u.json());case 19:case"end":return e.stop()}}),e,null,[[8,15]])})))).apply(this,arguments)}function Ke(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(f.a)(l.a.mark((function e(t){var n,r,i,a,o,u,s,c,h=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:Ue,r=h.length>2?h[2]:void 0,i=t.options,a=i.appId,o=i.apiKey,u=i.measurementId,a){e.next=5;break}throw Ve.create("no-app-id");case 5:if(o){e.next=9;break}if(!u){e.next=8;break}return e.abrupt("return",{measurementId:u,appId:a});case 8:throw Ve.create("no-api-key");case 9:return s=n.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new Je,setTimeout(Object(f.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.abort();case 1:case"end":return e.stop()}}),e)}))),void 0!==r?r:6e4),e.abrupt("return",He({appId:a,apiKey:o,measurementId:u},s,c,n));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e,t,n){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(f.a)(l.a.mark((function e(t,n,r){var i,a,o,u,s,c,f,h,d,v,y=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.throttleEndTimeMillis,a=n.backoffCount,o=y.length>3&&void 0!==y[3]?y[3]:Ue,s=t.appId,c=t.measurementId,e.prev=3,e.next=6,We(r,i);case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),!c){e.next=13;break}return je.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(c)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===e.t0||void 0===e.t0?void 0:e.t0.message,"]")),e.abrupt("return",{appId:s,measurementId:c});case 13:throw e.t0;case 14:return e.prev=14,e.next=17,qe(t);case 17:return f=e.sent,o.deleteThrottleMetadata(s),e.abrupt("return",f);case 22:if(e.prev=22,e.t1=e.catch(14),Ye(h=e.t1)){e.next=33;break}if(o.deleteThrottleMetadata(s),!c){e.next=32;break}return je.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(c)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===h||void 0===h?void 0:h.message,"]")),e.abrupt("return",{appId:s,measurementId:c});case 32:throw e.t1;case 33:return d=503===Number(null===(u=null===h||void 0===h?void 0:h.customData)||void 0===u?void 0:u.httpStatus)?Object(p.f)(a,o.intervalMillis,30):Object(p.f)(a,o.intervalMillis),v={throttleEndTimeMillis:Date.now()+d,backoffCount:a+1},o.setThrottleMetadata(s,v),je.debug("Calling attemptFetch again in ".concat(d," millis")),e.abrupt("return",He(t,v,r,o));case 38:case"end":return e.stop()}}),e,null,[[3,8],[14,22]])})))).apply(this,arguments)}function We(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((function(){clearTimeout(a),r(Ve.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function Ye(e){if(!(e instanceof p.c)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var $e,Xe,Je=function(){function e(){Object(o.a)(this,e),this.listeners=[]}return Object(u.a)(e,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach((function(e){return e()}))}}]),e}();function Ze(){return(Ze=Object(f.a)(l.a.mark((function e(t,n,r,i,a){var o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!a.global){e.next=5;break}return t("event",r,i),e.abrupt("return");case 5:return e.next=7,n;case 7:o=e.sent,u=Object.assign(Object.assign({},i),{send_to:o}),t("event",r,u);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e){Xe=e}function tt(e){$e=e}function nt(){return rt.apply(this,arguments)}function rt(){return(rt=Object(f.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(p.r)()){e.next=5;break}return je.warn(Ve.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,Object(p.u)();case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),je.warn(Ve.create("indexeddb-unavailable",{errorInfo:null===e.t0||void 0===e.t0?void 0:e.t0.toString()}).message),e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,null,[[5,10]])})))).apply(this,arguments)}function it(){return(it=Object(f.a)(l.a.mark((function e(t,n,r,a,o,u,s){var c,f,h,d,p,v,y,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(f=Ke(t)).then((function(e){r[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&je.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(e.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return je.error(e)})),n.push(f),h=nt().then((function(e){return e?a.getId():void 0})),e.next=6,Promise.all([f,h]);case 6:return d=e.sent,p=Object(i.a)(d,2),v=p[0],y=p[1],Me(u)||De(u,v.measurementId),Xe&&(o("consent","default",Xe),et(void 0)),o("js",new Date),(m=null!==(c=null===s||void 0===s?void 0:s.config)&&void 0!==c?c:{}).origin="firebase",m.update=!0,null!=y&&(m.firebase_id=y),o("config",v.measurementId,m),$e&&(o("set",$e),tt(void 0)),e.abrupt("return",v.measurementId);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var at,ot,ut=function(){function e(t){Object(o.a)(this,e),this.app=t}return Object(u.a)(e,[{key:"_delete",value:function(){return delete st[this.app.options.appId],Promise.resolve()}}]),e}(),st={},ct=[],lt={},ft="dataLayer",ht="gtag",dt=!1;function pt(e,t,n){!function(){var e=[];if(Object(p.q)()&&e.push("This is a browser extension environment."),Object(p.d)()||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"(".concat(t+1,") ").concat(e)})).join(" "),n=Ve.create("invalid-analytics-context",{errorInfo:t});je.warn(n.message)}}();var r=e.options.appId;if(!r)throw Ve.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Ve.create("no-api-key");je.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=st[r])throw Ve.create("already-exists",{id:r});if(!dt){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(ft);var i=Le(st,ct,lt,ft,ht),a=i.wrappedGtag,o=i.gtagCore;ot=a,at=o,dt=!0}return st[r]=function(e,t,n,r,i,a,o){return it.apply(this,arguments)}(e,ct,lt,t,at,ft,n),new ut(e)}function vt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(h.getApp)();e=Object(p.n)(e);var t=Object(h._getProvider)(e,"analytics");return t.isInitialized()?t.getImmediate():yt(e)}function yt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(h._getProvider)(e,"analytics");if(n.isInitialized()){var r=n.getImmediate();if(Object(p.j)(t,n.getOptions()))return r;throw Ve.create("already-initialized")}var i=n.initialize({options:t});return i}function mt(e,t,n,r){e=Object(p.n)(e),function(e,t,n,r,i){return Ze.apply(this,arguments)}(ot,st[e.app.options.appId],t,n,r).catch((function(e){return je.error(e)}))}Object(h._registerComponent)(new v.a("analytics",(function(e,t){var n=t.options;return pt(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),Object(h._registerComponent)(new v.a("analytics-internal",(function(e){try{var t=e.getProvider("analytics").getImmediate();return{logEvent:function(e,n,r){return mt(t,e,n,r)}}}catch(n){throw Ve.create("interop-component-reg-failed",{reason:n})}}),"PRIVATE")),Object(h.registerVersion)("@firebase/analytics","0.9.0"),Object(h.registerVersion)("@firebase/analytics","0.9.0","esm2017")},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(15),i=n(22);var a=n(23);function o(e){var t="function"===typeof Map?new Map:void 0;return(o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return Object(a.a)(e,arguments,Object(r.a)(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Object(i.a)(o,e)})(e)}},,function(e,t,n){"use strict";var r=n(29),i="function"===typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,u=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,y="function"===typeof Symbol&&Symbol.iterator;function m(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function k(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||g}function w(){}function x(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||g}k.prototype.isReactComponent={},k.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(m(85));this.updater.enqueueSetState(this,e,t,"setState")},k.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=k.prototype;var O=x.prototype=new w;O.constructor=x,r(O,k.prototype),O.isPureReactComponent=!0;var _={current:null},T=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,i={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)T.call(t,r)&&!E.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:a,type:e,key:o,ref:u,props:i,_owner:_.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var j=/\/+/g,C=[];function D(e,t,n,r){if(C.length){var i=C.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function A(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>C.length&&C.push(e)}function N(e,t,n){return null==e?0:function e(t,n,r,i){var u=typeof t;"undefined"!==u&&"boolean"!==u||(t=null);var s=!1;if(null===t)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case a:case o:s=!0}}if(s)return r(i,t,""===n?"."+R(t,0):n),1;if(s=0,n=""===n?".":n+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=n+R(u=t[c],c);s+=e(u,l,r,i)}else if(null===t||"object"!==typeof t?l=null:l="function"===typeof(l=y&&t[y]||t["@@iterator"])?l:null,"function"===typeof l)for(t=l.call(t),c=0;!(u=t.next()).done;)s+=e(u=u.value,l=n+R(u,c++),r,i);else if("object"===u)throw r=""+t,Error(m(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return s}(e,"",t,n)}function R(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function P(e,t){e.func.call(e.context,t,e.count++)}function L(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?M(e,r,n,(function(e){return e})):null!=e&&(I(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(j,"$&/")+"/")+n)),r.push(e))}function M(e,t,n,r,i){var a="";null!=n&&(a=(""+n).replace(j,"$&/")+"/"),N(e,L,t=D(t,a,r,i)),A(t)}var F={current:null};function V(){var e=F.current;if(null===e)throw Error(m(321));return e}var U={ReactCurrentDispatcher:F,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:_,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return M(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;N(e,P,t=D(null,null,t,n)),A(t)},count:function(e){return N(e,(function(){return null}),null)},toArray:function(e){var t=[];return M(e,t,null,(function(e){return e})),t},only:function(e){if(!I(e))throw Error(m(143));return e}},t.Component=k,t.Fragment=u,t.Profiler=c,t.PureComponent=x,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(m(267,e));var i=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=_.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)T.call(t,l)&&!E.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:a,type:e.type,key:o,ref:u,props:i,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:h,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:v,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return V().useCallback(e,t)},t.useContext=function(e,t){return V().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return V().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return V().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return V().useLayoutEffect(e,t)},t.useMemo=function(e,t){return V().useMemo(e,t)},t.useReducer=function(e,t,n){return V().useReducer(e,t,n)},t.useRef=function(e){return V().useRef(e)},t.useState=function(e){return V().useState(e)},t.version="16.13.1"},function(e,t,n){"use strict";var r=n(11),i=n(29),a=n(38);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));function u(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var s=!1,c=null,l=!1,f=null,h={onError:function(e){s=!0,c=e}};function d(e,t,n,r,i,a,o,l,f){s=!1,c=null,u.apply(h,arguments)}var p=null,v=null,y=null;function m(e,t,n){var r=e.type||"unknown-event";e.currentTarget=y(n),function(e,t,n,r,i,a,u,h,p){if(d.apply(this,arguments),s){if(!s)throw Error(o(198));var v=c;s=!1,c=null,l||(l=!0,f=v)}}(r,t,void 0,e),e.currentTarget=null}var g=null,b={};function k(){if(g)for(var e in b){var t=b[e],n=g.indexOf(e);if(!(-1<n))throw Error(o(96,e));if(!x[n]){if(!t.extractEvents)throw Error(o(97,e));for(var r in x[n]=t,n=t.eventTypes){var i=void 0,a=n[r],u=t,s=r;if(O.hasOwnProperty(s))throw Error(o(99,s));O[s]=a;var c=a.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&w(c[i],u,s);i=!0}else a.registrationName?(w(a.registrationName,u,s),i=!0):i=!1;if(!i)throw Error(o(98,r,e))}}}}function w(e,t,n){if(_[e])throw Error(o(100,e));_[e]=t,T[e]=t.eventTypes[n].dependencies}var x=[],O={},_={},T={};function E(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!b.hasOwnProperty(t)||b[t]!==r){if(b[t])throw Error(o(102,t));b[t]=r,n=!0}}n&&k()}var S=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),I=null,j=null,C=null;function D(e){if(e=v(e)){if("function"!==typeof I)throw Error(o(280));var t=e.stateNode;t&&(t=p(t),I(e.stateNode,e.type,t))}}function A(e){j?C?C.push(e):C=[e]:j=e}function N(){if(j){var e=j,t=C;if(C=j=null,D(e),t)for(e=0;e<t.length;e++)D(t[e])}}function R(e,t){return e(t)}function P(e,t,n,r,i){return e(t,n,r,i)}function L(){}var M=R,F=!1,V=!1;function U(){null===j&&null===C||(L(),N())}function B(e,t,n){if(V)return e(t,n);V=!0;try{return M(e,t,n)}finally{V=!1,U()}}var q=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,z=Object.prototype.hasOwnProperty,K={},G={};function H(e,t,n,r,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a}var Q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){Q[e]=new H(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];Q[t]=new H(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){Q[e]=new H(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){Q[e]=new H(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){Q[e]=new H(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){Q[e]=new H(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){Q[e]=new H(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){Q[e]=new H(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){Q[e]=new H(e,5,!1,e.toLowerCase(),null,!1)}));var W=/[\-:]([a-z])/g;function Y(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(W,Y);Q[t]=new H(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(W,Y);Q[t]=new H(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(W,Y);Q[t]=new H(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){Q[e]=new H(e,1,!1,e.toLowerCase(),null,!1)})),Q.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){Q[e]=new H(e,1,!1,e.toLowerCase(),null,!0)}));var $=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function X(e,t,n,r){var i=Q.hasOwnProperty(t)?Q[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!z.call(G,e)||!z.call(K,e)&&(q.test(e)?G[e]=!0:(K[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}$.hasOwnProperty("ReactCurrentDispatcher")||($.ReactCurrentDispatcher={current:null}),$.hasOwnProperty("ReactCurrentBatchConfig")||($.ReactCurrentBatchConfig={suspense:null});var J=/^(.*)[\\\/]/,Z="function"===typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ne=Z?Symbol.for("react.fragment"):60107,re=Z?Symbol.for("react.strict_mode"):60108,ie=Z?Symbol.for("react.profiler"):60114,ae=Z?Symbol.for("react.provider"):60109,oe=Z?Symbol.for("react.context"):60110,ue=Z?Symbol.for("react.concurrent_mode"):60111,se=Z?Symbol.for("react.forward_ref"):60112,ce=Z?Symbol.for("react.suspense"):60113,le=Z?Symbol.for("react.suspense_list"):60120,fe=Z?Symbol.for("react.memo"):60115,he=Z?Symbol.for("react.lazy"):60116,de=Z?Symbol.for("react.block"):60121,pe="function"===typeof Symbol&&Symbol.iterator;function ve(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function ye(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case ce:return"Suspense";case le:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case oe:return"Context.Consumer";case ae:return"Context.Provider";case se:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case fe:return ye(e.type);case de:return ye(e.render);case he:if(e=1===e._status?e._result:null)return ye(e)}return null}function me(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,a=ye(e.type);n=null,r&&(n=ye(r.type)),r=a,a="",i?a=" (at "+i.fileName.replace(J,"")+":"+i.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+a}t+=n,e=e.return}while(e);return t}function ge(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function be(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ke(e){e._valueTracker||(e._valueTracker=function(e){var t=be(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function we(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=be(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function xe(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Oe(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ge(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function _e(e,t){null!=(t=t.checked)&&X(e,"checked",t,!1)}function Te(e,t){_e(e,t);var n=ge(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Se(e,t.type,n):t.hasOwnProperty("defaultValue")&&Se(e,t.type,ge(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ee(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Se(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ie(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function je(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ge(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Ce(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function De(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ge(n)}}function Ae(e,t){var n=ge(t.value),r=ge(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Ne(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Re="http://www.w3.org/1999/xhtml",Pe="http://www.w3.org/2000/svg";function Le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Me(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Fe,Ve=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==Pe||"innerHTML"in e)e.innerHTML=t;else{for((Fe=Fe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function Ue(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Be(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var qe={animationend:Be("Animation","AnimationEnd"),animationiteration:Be("Animation","AnimationIteration"),animationstart:Be("Animation","AnimationStart"),transitionend:Be("Transition","TransitionEnd")},ze={},Ke={};function Ge(e){if(ze[e])return ze[e];if(!qe[e])return e;var t,n=qe[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ke)return ze[e]=n[t];return e}S&&(Ke=document.createElement("div").style,"AnimationEvent"in window||(delete qe.animationend.animation,delete qe.animationiteration.animation,delete qe.animationstart.animation),"TransitionEvent"in window||delete qe.transitionend.transition);var He=Ge("animationend"),Qe=Ge("animationiteration"),We=Ge("animationstart"),Ye=Ge("transitionend"),$e="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xe=new("function"===typeof WeakMap?WeakMap:Map);function Je(e){var t=Xe.get(e);return void 0===t&&(t=new Map,Xe.set(e,t)),t}function Ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function et(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function tt(e){if(Ze(e)!==e)throw Error(o(188))}function nt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ze(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return tt(i),e;if(a===r)return tt(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function rt(e,t){if(null==t)throw Error(o(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function it(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var at=null;function ot(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)m(e,t[r],n[r]);else t&&m(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function ut(e){if(null!==e&&(at=rt(at,e)),e=at,at=null,e){if(it(e,ot),at)throw Error(o(95));if(l)throw e=f,l=!1,f=null,e}}function st(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ct(e){if(!S)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var lt=[];function ft(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>lt.length&&lt.push(e)}function ht(e,t,n,r){if(lt.length){var i=lt.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function dt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Sn(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=st(e.nativeEvent);r=e.topLevelType;var a=e.nativeEvent,o=e.eventSystemFlags;0===n&&(o|=64);for(var u=null,s=0;s<x.length;s++){var c=x[s];c&&(c=c.extractEvents(r,t,a,i,o))&&(u=rt(u,c))}ut(u)}}function pt(e,t,n){if(!n.has(e)){switch(e){case"scroll":Wt(t,"scroll",!0);break;case"focus":case"blur":Wt(t,"focus",!0),Wt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ct(e)&&Wt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===$e.indexOf(e)&&Qt(e,t)}n.set(e,null)}}var vt,yt,mt,gt=!1,bt=[],kt=null,wt=null,xt=null,Ot=new Map,_t=new Map,Tt=[],Et="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),St="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function It(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function jt(e,t){switch(e){case"focus":case"blur":kt=null;break;case"dragenter":case"dragleave":wt=null;break;case"mouseover":case"mouseout":xt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_t.delete(t.pointerId)}}function Ct(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=It(t,n,r,i,a),null!==t&&(null!==(t=In(t))&&yt(t)),e):(e.eventSystemFlags|=r,e)}function Dt(e){var t=Sn(e.target);if(null!==t){var n=Ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=et(n)))return e.blockedOn=t,void a.unstable_runWithPriority(e.priority,(function(){mt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function At(e){if(null!==e.blockedOn)return!1;var t=Jt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=In(t);return null!==n&&yt(n),e.blockedOn=t,!1}return!0}function Nt(e,t,n){At(e)&&n.delete(t)}function Rt(){for(gt=!1;0<bt.length;){var e=bt[0];if(null!==e.blockedOn){null!==(e=In(e.blockedOn))&&vt(e);break}var t=Jt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:bt.shift()}null!==kt&&At(kt)&&(kt=null),null!==wt&&At(wt)&&(wt=null),null!==xt&&At(xt)&&(xt=null),Ot.forEach(Nt),_t.forEach(Nt)}function Pt(e,t){e.blockedOn===t&&(e.blockedOn=null,gt||(gt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Rt)))}function Lt(e){function t(t){return Pt(t,e)}if(0<bt.length){Pt(bt[0],e);for(var n=1;n<bt.length;n++){var r=bt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==kt&&Pt(kt,e),null!==wt&&Pt(wt,e),null!==xt&&Pt(xt,e),Ot.forEach(t),_t.forEach(t),n=0;n<Tt.length;n++)(r=Tt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Tt.length&&null===(n=Tt[0]).blockedOn;)Dt(n),null===n.blockedOn&&Tt.shift()}var Mt={},Ft=new Map,Vt=new Map,Ut=["abort","abort",He,"animationEnd",Qe,"animationIteration",We,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ye,"transitionEnd","waiting","waiting"];function Bt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],a="on"+(i[0].toUpperCase()+i.slice(1));a={phasedRegistrationNames:{bubbled:a,captured:a+"Capture"},dependencies:[r],eventPriority:t},Vt.set(r,t),Ft.set(r,a),Mt[i]=a}}Bt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Bt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Bt(Ut,2);for(var qt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),zt=0;zt<qt.length;zt++)Vt.set(qt[zt],0);var Kt=a.unstable_UserBlockingPriority,Gt=a.unstable_runWithPriority,Ht=!0;function Qt(e,t){Wt(t,e,!1)}function Wt(e,t,n){var r=Vt.get(t);switch(void 0===r?2:r){case 0:r=Yt.bind(null,t,1,e);break;case 1:r=$t.bind(null,t,1,e);break;default:r=Xt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Yt(e,t,n,r){F||L();var i=Xt,a=F;F=!0;try{P(i,e,t,n,r)}finally{(F=a)||U()}}function $t(e,t,n,r){Gt(Kt,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){if(Ht)if(0<bt.length&&-1<Et.indexOf(e))e=It(null,e,t,n,r),bt.push(e);else{var i=Jt(e,t,n,r);if(null===i)jt(e,r);else if(-1<Et.indexOf(e))e=It(i,e,t,n,r),bt.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return kt=Ct(kt,e,t,n,r,i),!0;case"dragenter":return wt=Ct(wt,e,t,n,r,i),!0;case"mouseover":return xt=Ct(xt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ot.set(a,Ct(Ot.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,_t.set(a,Ct(_t.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){jt(e,r),e=ht(e,r,null,t);try{B(dt,e)}finally{ft(e)}}}}function Jt(e,t,n,r){if(null!==(n=Sn(n=st(r)))){var i=Ze(n);if(null===i)n=null;else{var a=i.tag;if(13===a){if(null!==(n=et(i)))return n;n=null}else if(3===a){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=ht(e,r,n,t);try{B(dt,e)}finally{ft(e)}return null}var Zt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},en=["Webkit","ms","Moz","O"];function tn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||Zt.hasOwnProperty(e)&&Zt[e]?(""+t).trim():t+"px"}function nn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=tn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Zt).forEach((function(e){en.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zt[t]=Zt[e]}))}));var rn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function an(e,t){if(t){if(rn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62,""))}}function on(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var un=Re;function sn(e,t){var n=Je(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=T[t];for(var r=0;r<t.length;r++)pt(t[r],e,n)}function cn(){}function ln(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function fn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hn(e,t){var n,r=fn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=fn(r)}}function dn(){for(var e=window,t=ln();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ln((e=t.contentWindow).document)}return t}function pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var vn=null,yn=null;function mn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function gn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var bn="function"===typeof setTimeout?setTimeout:void 0,kn="function"===typeof clearTimeout?clearTimeout:void 0;function wn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function xn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var On=Math.random().toString(36).slice(2),_n="__reactInternalInstance$"+On,Tn="__reactEventHandlers$"+On,En="__reactContainere$"+On;function Sn(e){var t=e[_n];if(t)return t;for(var n=e.parentNode;n;){if(t=n[En]||n[_n]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=xn(e);null!==e;){if(n=e[_n])return n;e=xn(e)}return t}n=(e=n).parentNode}return null}function In(e){return!(e=e[_n]||e[En])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function jn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Cn(e){return e[Tn]||null}function Dn(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function An(e,t){var n=e.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}function Nn(e,t,n){(t=An(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=rt(n._dispatchListeners,t),n._dispatchInstances=rt(n._dispatchInstances,e))}function Rn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Dn(t);for(t=n.length;0<t--;)Nn(n[t],"captured",e);for(t=0;t<n.length;t++)Nn(n[t],"bubbled",e)}}function Pn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=An(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=rt(n._dispatchListeners,t),n._dispatchInstances=rt(n._dispatchInstances,e))}function Ln(e){e&&e.dispatchConfig.registrationName&&Pn(e._targetInst,null,e)}function Mn(e){it(e,Rn)}var Fn=null,Vn=null,Un=null;function Bn(){if(Un)return Un;var e,t,n=Vn,r=n.length,i="value"in Fn?Fn.value:Fn.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Un=i.slice(e,1<t?1-t:void 0)}function qn(){return!0}function zn(){return!1}function Kn(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?qn:zn,this.isPropagationStopped=zn,this}function Gn(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Hn(e){if(!(e instanceof this))throw Error(o(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Qn(e){e.eventPool=[],e.getPooled=Gn,e.release=Hn}i(Kn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=qn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=qn)},persist:function(){this.isPersistent=qn},isPersistent:zn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=zn,this._dispatchInstances=this._dispatchListeners=null}}),Kn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Kn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var a=new t;return i(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Qn(n),n},Qn(Kn);var Wn=Kn.extend({data:null}),Yn=Kn.extend({data:null}),$n=[9,13,27,32],Xn=S&&"CompositionEvent"in window,Jn=null;S&&"documentMode"in document&&(Jn=document.documentMode);var Zn=S&&"TextEvent"in window&&!Jn,er=S&&(!Xn||Jn&&8<Jn&&11>=Jn),tr=String.fromCharCode(32),nr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},rr=!1;function ir(e,t){switch(e){case"keyup":return-1!==$n.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function ar(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var or=!1;var ur={eventTypes:nr,extractEvents:function(e,t,n,r){var i;if(Xn)e:{switch(e){case"compositionstart":var a=nr.compositionStart;break e;case"compositionend":a=nr.compositionEnd;break e;case"compositionupdate":a=nr.compositionUpdate;break e}a=void 0}else or?ir(e,n)&&(a=nr.compositionEnd):"keydown"===e&&229===n.keyCode&&(a=nr.compositionStart);return a?(er&&"ko"!==n.locale&&(or||a!==nr.compositionStart?a===nr.compositionEnd&&or&&(i=Bn()):(Vn="value"in(Fn=r)?Fn.value:Fn.textContent,or=!0)),a=Wn.getPooled(a,t,n,r),i?a.data=i:null!==(i=ar(n))&&(a.data=i),Mn(a),i=a):i=null,(e=Zn?function(e,t){switch(e){case"compositionend":return ar(t);case"keypress":return 32!==t.which?null:(rr=!0,tr);case"textInput":return(e=t.data)===tr&&rr?null:e;default:return null}}(e,n):function(e,t){if(or)return"compositionend"===e||!Xn&&ir(e,t)?(e=Bn(),Un=Vn=Fn=null,or=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return er&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=Yn.getPooled(nr.beforeInput,t,n,r)).data=e,Mn(t)):t=null,null===i?t:null===t?i:[i,t]}},sr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!sr[e.type]:"textarea"===t}var lr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function fr(e,t,n){return(e=Kn.getPooled(lr.change,e,t,n)).type="change",A(n),Mn(e),e}var hr=null,dr=null;function pr(e){ut(e)}function vr(e){if(we(jn(e)))return e}function yr(e,t){if("change"===e)return t}var mr=!1;function gr(){hr&&(hr.detachEvent("onpropertychange",br),dr=hr=null)}function br(e){if("value"===e.propertyName&&vr(dr))if(e=fr(dr,e,st(e)),F)ut(e);else{F=!0;try{R(pr,e)}finally{F=!1,U()}}}function kr(e,t,n){"focus"===e?(gr(),dr=n,(hr=t).attachEvent("onpropertychange",br)):"blur"===e&&gr()}function wr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return vr(dr)}function xr(e,t){if("click"===e)return vr(t)}function Or(e,t){if("input"===e||"change"===e)return vr(t)}S&&(mr=ct("input")&&(!document.documentMode||9<document.documentMode));var _r={eventTypes:lr,_isInputEventSupported:mr,extractEvents:function(e,t,n,r){var i=t?jn(t):window,a=i.nodeName&&i.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===i.type)var o=yr;else if(cr(i))if(mr)o=Or;else{o=wr;var u=kr}else(a=i.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=xr);if(o&&(o=o(e,t)))return fr(o,n,r);u&&u(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Se(i,"number",i.value)}},Tr=Kn.extend({view:null,detail:null}),Er={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Er[e])&&!!t[e]}function Ir(){return Sr}var jr=0,Cr=0,Dr=!1,Ar=!1,Nr=Tr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ir,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=jr;return jr=e.screenX,Dr?"mousemove"===e.type?e.screenX-t:0:(Dr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Cr;return Cr=e.screenY,Ar?"mousemove"===e.type?e.screenY-t:0:(Ar=!0,0)}}),Rr=Nr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Pr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Lr={eventTypes:Pr,extractEvents:function(e,t,n,r,i){var a="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(a&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!o&&!a)return null;(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,o)?(o=t,null!==(t=(t=n.relatedTarget||n.toElement)?Sn(t):null)&&(t!==Ze(t)||5!==t.tag&&6!==t.tag)&&(t=null)):o=null;if(o===t)return null;if("mouseout"===e||"mouseover"===e)var u=Nr,s=Pr.mouseLeave,c=Pr.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(u=Rr,s=Pr.pointerLeave,c=Pr.pointerEnter,l="pointer");if(e=null==o?a:jn(o),a=null==t?a:jn(t),(s=u.getPooled(s,o,n,r)).type=l+"leave",s.target=e,s.relatedTarget=a,(n=u.getPooled(c,t,n,r)).type=l+"enter",n.target=a,n.relatedTarget=e,l=t,(r=o)&&l)e:{for(c=l,o=0,e=u=r;e;e=Dn(e))o++;for(e=0,t=c;t;t=Dn(t))e++;for(;0<o-e;)u=Dn(u),o--;for(;0<e-o;)c=Dn(c),e--;for(;o--;){if(u===c||u===c.alternate)break e;u=Dn(u),c=Dn(c)}u=null}else u=null;for(c=u,u=[];r&&r!==c&&(null===(o=r.alternate)||o!==c);)u.push(r),r=Dn(r);for(r=[];l&&l!==c&&(null===(o=l.alternate)||o!==c);)r.push(l),l=Dn(l);for(l=0;l<u.length;l++)Pn(u[l],"bubbled",s);for(l=r.length;0<l--;)Pn(r[l],"captured",n);return 0===(64&i)?[s]:[s,n]}};var Mr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Fr=Object.prototype.hasOwnProperty;function Vr(e,t){if(Mr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Fr.call(t,n[r])||!Mr(e[n[r]],t[n[r]]))return!1;return!0}var Ur=S&&"documentMode"in document&&11>=document.documentMode,Br={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},qr=null,zr=null,Kr=null,Gr=!1;function Hr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Gr||null==qr||qr!==ln(n)?null:("selectionStart"in(n=qr)&&pn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Kr&&Vr(Kr,n)?null:(Kr=n,(e=Kn.getPooled(Br.select,zr,e,t)).type="select",e.target=qr,Mn(e),e))}var Qr={eventTypes:Br,extractEvents:function(e,t,n,r,i,a){if(!(a=!(i=a||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Je(i),a=T.onSelect;for(var o=0;o<a.length;o++)if(!i.has(a[o])){i=!1;break e}i=!0}a=!i}if(a)return null;switch(i=t?jn(t):window,e){case"focus":(cr(i)||"true"===i.contentEditable)&&(qr=i,zr=t,Kr=null);break;case"blur":Kr=zr=qr=null;break;case"mousedown":Gr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Gr=!1,Hr(n,r);case"selectionchange":if(Ur)break;case"keydown":case"keyup":return Hr(n,r)}return null}},Wr=Kn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Yr=Kn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$r=Tr.extend({relatedTarget:null});function Xr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Jr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ei=Tr.extend({key:function(e){if(e.key){var t=Jr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Xr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Zr[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ir,charCode:function(e){return"keypress"===e.type?Xr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Xr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ti=Nr.extend({dataTransfer:null}),ni=Tr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ir}),ri=Kn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ii=Nr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),ai={eventTypes:Mt,extractEvents:function(e,t,n,r){var i=Ft.get(e);if(!i)return null;switch(e){case"keypress":if(0===Xr(n))return null;case"keydown":case"keyup":e=ei;break;case"blur":case"focus":e=$r;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Nr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ti;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=ni;break;case He:case Qe:case We:e=Wr;break;case Ye:e=ri;break;case"scroll":e=Tr;break;case"wheel":e=ii;break;case"copy":case"cut":case"paste":e=Yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Rr;break;default:e=Kn}return Mn(t=e.getPooled(i,t,n,r)),t}};if(g)throw Error(o(101));g=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),k(),p=Cn,v=In,y=jn,E({SimpleEventPlugin:ai,EnterLeaveEventPlugin:Lr,ChangeEventPlugin:_r,SelectEventPlugin:Qr,BeforeInputEventPlugin:ur});var oi=[],ui=-1;function si(e){0>ui||(e.current=oi[ui],oi[ui]=null,ui--)}function ci(e,t){ui++,oi[ui]=e.current,e.current=t}var li={},fi={current:li},hi={current:!1},di=li;function pi(e,t){var n=e.type.contextTypes;if(!n)return li;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function vi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function yi(){si(hi),si(fi)}function mi(e,t,n){if(fi.current!==li)throw Error(o(168));ci(fi,t),ci(hi,n)}function gi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,ye(t)||"Unknown",a));return i({},n,{},r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||li,di=fi.current,ci(fi,e),ci(hi,hi.current),!0}function ki(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=gi(e,t,di),r.__reactInternalMemoizedMergedChildContext=e,si(hi),si(fi),ci(fi,e)):si(hi),ci(hi,n)}var wi=a.unstable_runWithPriority,xi=a.unstable_scheduleCallback,Oi=a.unstable_cancelCallback,_i=a.unstable_requestPaint,Ti=a.unstable_now,Ei=a.unstable_getCurrentPriorityLevel,Si=a.unstable_ImmediatePriority,Ii=a.unstable_UserBlockingPriority,ji=a.unstable_NormalPriority,Ci=a.unstable_LowPriority,Di=a.unstable_IdlePriority,Ai={},Ni=a.unstable_shouldYield,Ri=void 0!==_i?_i:function(){},Pi=null,Li=null,Mi=!1,Fi=Ti(),Vi=1e4>Fi?Ti:function(){return Ti()-Fi};function Ui(){switch(Ei()){case Si:return 99;case Ii:return 98;case ji:return 97;case Ci:return 96;case Di:return 95;default:throw Error(o(332))}}function Bi(e){switch(e){case 99:return Si;case 98:return Ii;case 97:return ji;case 96:return Ci;case 95:return Di;default:throw Error(o(332))}}function qi(e,t){return e=Bi(e),wi(e,t)}function zi(e,t,n){return e=Bi(e),xi(e,t,n)}function Ki(e){return null===Pi?(Pi=[e],Li=xi(Si,Hi)):Pi.push(e),Ai}function Gi(){if(null!==Li){var e=Li;Li=null,Oi(e)}Hi()}function Hi(){if(!Mi&&null!==Pi){Mi=!0;var e=0;try{var t=Pi;qi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Pi=null}catch(n){throw null!==Pi&&(Pi=Pi.slice(e+1)),xi(Si,Gi),n}finally{Mi=!1}}}function Qi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Wi(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Yi={current:null},$i=null,Xi=null,Ji=null;function Zi(){Ji=Xi=$i=null}function ea(e){var t=Yi.current;si(Yi),e.type._context._currentValue=t}function ta(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function na(e,t){$i=e,Ji=Xi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Co=!0),e.firstContext=null)}function ra(e,t){if(Ji!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(Ji=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Xi){if(null===$i)throw Error(o(308));Xi=t,$i.dependencies={expirationTime:0,firstContext:t,responders:null}}else Xi=Xi.next=t;return e._currentValue}var ia=!1;function aa(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function ua(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function sa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ca(e,t){var n=e.alternate;null!==n&&oa(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function la(e,t,n,r){var a=e.updateQueue;ia=!1;var o=a.baseQueue,u=a.shared.pending;if(null!==u){if(null!==o){var s=o.next;o.next=u.next,u.next=s}o=u,a.shared.pending=null,null!==(s=e.alternate)&&(null!==(s=s.updateQueue)&&(s.baseQueue=u))}if(null!==o){s=o.next;var c=a.baseState,l=0,f=null,h=null,d=null;if(null!==s)for(var p=s;;){if((u=p.expirationTime)<r){var v={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===d?(h=d=v,f=c):d=d.next=v,u>l&&(l=u)}else{null!==d&&(d=d.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),as(u,p.suspenseConfig);e:{var y=e,m=p;switch(u=t,v=n,m.tag){case 1:if("function"===typeof(y=m.payload)){c=y.call(v,c,u);break e}c=y;break e;case 3:y.effectTag=-4097&y.effectTag|64;case 0:if(null===(u="function"===typeof(y=m.payload)?y.call(v,c,u):y)||void 0===u)break e;c=i({},c,u);break e;case 2:ia=!0}}null!==p.callback&&(e.effectTag|=32,null===(u=a.effects)?a.effects=[p]:u.push(p))}if(null===(p=p.next)||p===s){if(null===(u=a.shared.pending))break;p=o.next=u.next,u.next=s,a.baseQueue=o=u,a.shared.pending=null}}null===d?f=c:d.next=h,a.baseState=f,a.baseQueue=d,os(l),e.expirationTime=l,e.memoizedState=c}}function fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var ha=$.ReactCurrentBatchConfig,da=(new r.Component).refs;function pa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var va={isMounted:function(e){return!!(e=e._reactInternalFiber)&&Ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Hu(),i=ha.suspense;(i=ua(r=Qu(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),sa(e,i),Wu(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Hu(),i=ha.suspense;(i=ua(r=Qu(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),sa(e,i),Wu(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Hu(),r=ha.suspense;(r=ua(n=Qu(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),sa(e,r),Wu(e,n)}};function ya(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!Vr(n,r)||!Vr(i,a))}function ma(e,t,n){var r=!1,i=li,a=t.contextType;return"object"===typeof a&&null!==a?a=ra(a):(i=vi(t)?di:fi.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?pi(e,i):li),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=va,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&va.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=da,aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=ra(a):(a=vi(t)?di:fi.current,i.context=pi(e,a)),la(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(pa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&va.enqueueReplaceState(i,i.state,null),la(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var ka=Array.isArray;function wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===da&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function xa(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Oa(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Es(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function u(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=js(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=wa(e,t,n),r.return=e,r):((r=Ss(n.type,n.key,n.props,null,e.mode,r)).ref=wa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Cs(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Is(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=js(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Ss(t.type,t.key,t.props,null,e.mode,n)).ref=wa(e,null,t),n.return=e,n;case te:return(t=Cs(t,e.mode,n)).return=e,t}if(ka(t)||ve(t))return(t=Is(t,e.mode,n,null)).return=e,t;xa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case te:return n.key===i?l(e,t,n,r):null}if(ka(n)||ve(n))return null!==i?null:f(e,t,n,r,null);xa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case te:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ka(r)||ve(r))return f(t,e=e.get(n)||null,r,i,null);xa(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,u,s,c){var l=ve(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var b=d(i,v,g.value,c);if(null===b){null===v&&(v=m);break}e&&v&&null===b.alternate&&t(i,v),u=a(b,u,y),null===f?l=b:f.sibling=b,f=b,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===ne&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case ee:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(a.type===ne){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}break;default:if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=wa(e,c,a),r.return=e,e=r;break e}}n(e,c);break}t(e,c),c=c.sibling}a.type===ne?((r=Is(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Ss(a.type,a.key,a.props,null,e.mode,s)).ref=wa(e,r,a),s.return=e,e=s)}return u(e);case te:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Cs(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=js(a,e.mode,s)).return=e,e=r),u(e);if(ka(a))return v(e,r,a,s);if(ve(a))return y(e,r,a,s);if(l&&xa(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(o(152,e.displayName||e.name||"Component"))}return n(e,r)}}var _a=Oa(!0),Ta=Oa(!1),Ea={},Sa={current:Ea},Ia={current:Ea},ja={current:Ea};function Ca(e){if(e===Ea)throw Error(o(174));return e}function Da(e,t){switch(ci(ja,t),ci(Ia,e),ci(Sa,Ea),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Me(null,"");break;default:t=Me(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}si(Sa),ci(Sa,t)}function Aa(){si(Sa),si(Ia),si(ja)}function Na(e){Ca(ja.current);var t=Ca(Sa.current),n=Me(t,e.type);t!==n&&(ci(Ia,e),ci(Sa,n))}function Ra(e){Ia.current===e&&(si(Sa),si(Ia))}var Pa={current:0};function La(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Ma(e,t){return{responder:e,props:t}}var Fa=$.ReactCurrentDispatcher,Va=$.ReactCurrentBatchConfig,Ua=0,Ba=null,qa=null,za=null,Ka=!1;function Ga(){throw Error(o(321))}function Ha(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Mr(e[n],t[n]))return!1;return!0}function Qa(e,t,n,r,i,a){if(Ua=a,Ba=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Fa.current=null===e||null===e.memoizedState?mo:go,e=n(r,i),t.expirationTime===Ua){a=0;do{if(t.expirationTime=0,!(25>a))throw Error(o(301));a+=1,za=qa=null,t.updateQueue=null,Fa.current=bo,e=n(r,i)}while(t.expirationTime===Ua)}if(Fa.current=yo,t=null!==qa&&null!==qa.next,Ua=0,za=qa=Ba=null,Ka=!1,t)throw Error(o(300));return e}function Wa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===za?Ba.memoizedState=za=e:za=za.next=e,za}function Ya(){if(null===qa){var e=Ba.alternate;e=null!==e?e.memoizedState:null}else e=qa.next;var t=null===za?Ba.memoizedState:za.next;if(null!==t)za=t,qa=e;else{if(null===e)throw Error(o(310));e={memoizedState:(qa=e).memoizedState,baseState:qa.baseState,baseQueue:qa.baseQueue,queue:qa.queue,next:null},null===za?Ba.memoizedState=za=e:za=za.next=e}return za}function $a(e,t){return"function"===typeof t?t(e):t}function Xa(e){var t=Ya(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=qa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.expirationTime;if(l<Ua){var f={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,l>Ba.expirationTime&&(Ba.expirationTime=l,os(l))}else null!==s&&(s=s.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),as(l,c.suspenseConfig),r=c.eagerReducer===e?c.eagerState:e(r,c.action);c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,Mr(r,t.memoizedState)||(Co=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function Ja(e){var t=Ya(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);Mr(a,t.memoizedState)||(Co=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Za(e){var t=Wa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:$a,lastRenderedState:e}).dispatch=vo.bind(null,Ba,e),[t.memoizedState,e]}function eo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ba.updateQueue)?(t={lastEffect:null},Ba.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function to(){return Ya().memoizedState}function no(e,t,n,r){var i=Wa();Ba.effectTag|=e,i.memoizedState=eo(1|t,n,void 0,void 0===r?null:r)}function ro(e,t,n,r){var i=Ya();r=void 0===r?null:r;var a=void 0;if(null!==qa){var o=qa.memoizedState;if(a=o.destroy,null!==r&&Ha(r,o.deps))return void eo(t,n,a,r)}Ba.effectTag|=e,i.memoizedState=eo(1|t,n,a,r)}function io(e,t){return no(516,4,e,t)}function ao(e,t){return ro(516,4,e,t)}function oo(e,t){return ro(4,2,e,t)}function uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function so(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ro(4,2,uo.bind(null,t,e),n)}function co(){}function lo(e,t){return Wa().memoizedState=[e,void 0===t?null:t],e}function fo(e,t){var n=Ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ha(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ho(e,t){var n=Ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ha(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function po(e,t,n){var r=Ui();qi(98>r?98:r,(function(){e(!0)})),qi(97<r?97:r,(function(){var r=Va.suspense;Va.suspense=void 0===t?null:t;try{e(!1),n()}finally{Va.suspense=r}}))}function vo(e,t,n){var r=Hu(),i=ha.suspense;i={expirationTime:r=Qu(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var a=t.pending;if(null===a?i.next=i:(i.next=a.next,a.next=i),t.pending=i,a=e.alternate,e===Ba||null!==a&&a===Ba)Ka=!0,i.expirationTime=Ua,Ba.expirationTime=Ua;else{if(0===e.expirationTime&&(null===a||0===a.expirationTime)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.eagerReducer=a,i.eagerState=u,Mr(u,o))return}catch(s){}Wu(e,r)}}var yo={readContext:ra,useCallback:Ga,useContext:Ga,useEffect:Ga,useImperativeHandle:Ga,useLayoutEffect:Ga,useMemo:Ga,useReducer:Ga,useRef:Ga,useState:Ga,useDebugValue:Ga,useResponder:Ga,useDeferredValue:Ga,useTransition:Ga},mo={readContext:ra,useCallback:lo,useContext:ra,useEffect:io,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,no(4,2,uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return no(4,2,e,t)},useMemo:function(e,t){var n=Wa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Wa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=vo.bind(null,Ba,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Wa().memoizedState=e},useState:Za,useDebugValue:co,useResponder:Ma,useDeferredValue:function(e,t){var n=Za(e),r=n[0],i=n[1];return io((function(){var n=Va.suspense;Va.suspense=void 0===t?null:t;try{i(e)}finally{Va.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Za(!1),n=t[0];return t=t[1],[lo(po.bind(null,t,e),[t,e]),n]}},go={readContext:ra,useCallback:fo,useContext:ra,useEffect:ao,useImperativeHandle:so,useLayoutEffect:oo,useMemo:ho,useReducer:Xa,useRef:to,useState:function(){return Xa($a)},useDebugValue:co,useResponder:Ma,useDeferredValue:function(e,t){var n=Xa($a),r=n[0],i=n[1];return ao((function(){var n=Va.suspense;Va.suspense=void 0===t?null:t;try{i(e)}finally{Va.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Xa($a),n=t[0];return t=t[1],[fo(po.bind(null,t,e),[t,e]),n]}},bo={readContext:ra,useCallback:fo,useContext:ra,useEffect:ao,useImperativeHandle:so,useLayoutEffect:oo,useMemo:ho,useReducer:Ja,useRef:to,useState:function(){return Ja($a)},useDebugValue:co,useResponder:Ma,useDeferredValue:function(e,t){var n=Ja($a),r=n[0],i=n[1];return ao((function(){var n=Va.suspense;Va.suspense=void 0===t?null:t;try{i(e)}finally{Va.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Ja($a),n=t[0];return t=t[1],[fo(po.bind(null,t,e),[t,e]),n]}},ko=null,wo=null,xo=!1;function Oo(e,t){var n=_s(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function _o(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function To(e){if(xo){var t=wo;if(t){var n=t;if(!_o(e,t)){if(!(t=wn(n.nextSibling))||!_o(e,t))return e.effectTag=-1025&e.effectTag|2,xo=!1,void(ko=e);Oo(ko,n)}ko=e,wo=wn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,xo=!1,ko=e}}function Eo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ko=e}function So(e){if(e!==ko)return!1;if(!xo)return Eo(e),xo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!gn(t,e.memoizedProps))for(t=wo;t;)Oo(e,t),t=wn(t.nextSibling);if(Eo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){wo=wn(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}wo=null}}else wo=ko?wn(e.stateNode.nextSibling):null;return!0}function Io(){wo=ko=null,xo=!1}var jo=$.ReactCurrentOwner,Co=!1;function Do(e,t,n,r){t.child=null===e?Ta(t,null,n,r):_a(t,e.child,n,r)}function Ao(e,t,n,r,i){n=n.render;var a=t.ref;return na(t,i),r=Qa(e,t,n,r,a,i),null===e||Co?(t.effectTag|=1,Do(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Wo(e,t,i))}function No(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Ts(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ss(n.type,null,r,null,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ro(e,t,o,r,i,a))}return o=e.child,i<a&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:Vr)(i,r)&&e.ref===t.ref)?Wo(e,t,a):(t.effectTag|=1,(e=Es(o,r)).ref=t.ref,e.return=t,t.child=e)}function Ro(e,t,n,r,i,a){return null!==e&&Vr(e.memoizedProps,r)&&e.ref===t.ref&&(Co=!1,i<a)?(t.expirationTime=e.expirationTime,Wo(e,t,a)):Lo(e,t,n,r,a)}function Po(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Lo(e,t,n,r,i){var a=vi(n)?di:fi.current;return a=pi(t,a),na(t,i),n=Qa(e,t,n,r,a,i),null===e||Co?(t.effectTag|=1,Do(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Wo(e,t,i))}function Mo(e,t,n,r,i){if(vi(n)){var a=!0;bi(t)}else a=!1;if(na(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),ma(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=ra(c):c=pi(t,c=vi(n)?di:fi.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ga(t,o,r,c),ia=!1;var h=t.memoizedState;o.state=h,la(t,r,o,i),s=t.memoizedState,u!==r||h!==s||hi.current||ia?("function"===typeof l&&(pa(t,n,l,r),s=t.memoizedState),(u=ia||ya(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.effectTag|=4)):("function"===typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,oa(e,t),u=t.memoizedProps,o.props=t.type===t.elementType?u:Wi(t.type,u),s=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=ra(c):c=pi(t,c=vi(n)?di:fi.current),(f="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ga(t,o,r,c),ia=!1,s=t.memoizedState,o.state=s,la(t,r,o,i),h=t.memoizedState,u!==r||s!==h||hi.current||ia?("function"===typeof l&&(pa(t,n,l,r),h=t.memoizedState),(l=ia||ya(t,n,u,r,s,h,c))?(f||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,c)),"function"===typeof o.componentDidUpdate&&(t.effectTag|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),r=!1);return Fo(e,t,n,r,a,i)}function Fo(e,t,n,r,i,a){Po(e,t);var o=0!==(64&t.effectTag);if(!r&&!o)return i&&ki(t,n,!1),Wo(e,t,a);r=t.stateNode,jo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=_a(t,e.child,null,a),t.child=_a(t,null,u,a)):Do(e,t,u,a),t.memoizedState=r.state,i&&ki(t,n,!0),t.child}function Vo(e){var t=e.stateNode;t.pendingContext?mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&mi(0,t.context,!1),Da(e,t.containerInfo)}var Uo,Bo,qo,zo={dehydrated:null,retryTime:0};function Ko(e,t,n){var r,i=t.mode,a=t.pendingProps,o=Pa.current,u=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&o)&&(null===e||null!==e.memoizedState)),r?(u=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=1),ci(Pa,1&o),null===e){if(void 0!==a.fallback&&To(t),u){if(u=a.fallback,(a=Is(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=Is(u,i,n,null)).return=t,a.sibling=n,t.memoizedState=zo,t.child=a,n}return i=a.children,t.memoizedState=null,t.child=Ta(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,u){if(a=a.fallback,(n=Es(e,e.pendingProps)).return=t,0===(2&t.mode)&&(u=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=u;null!==u;)u.return=n,u=u.sibling;return(i=Es(i,a)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=zo,t.child=n,i}return n=_a(t,e.child,a.children,n),t.memoizedState=null,t.child=n}if(e=e.child,u){if(u=a.fallback,(a=Is(null,i,0,null)).return=t,a.child=e,null!==e&&(e.return=a),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=Is(u,i,n,null)).return=t,a.sibling=n,n.effectTag|=2,a.childExpirationTime=0,t.memoizedState=zo,t.child=a,n}return t.memoizedState=null,t.child=_a(t,e,a.children,n)}function Go(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),ta(e.return,t)}function Ho(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailExpiration=0,o.tailMode=i,o.lastEffect=a)}function Qo(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Do(e,t,r.children,n),0!==(2&(r=Pa.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Go(e,n);else if(19===e.tag)Go(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ci(Pa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===La(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ho(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===La(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ho(t,!0,n,null,a,t.lastEffect);break;case"together":Ho(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Wo(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&os(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Es(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Es(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Yo(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $o(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return vi(t.type)&&yi(),null;case 3:return Aa(),si(hi),si(fi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!So(t)||(t.effectTag|=4),null;case 5:Ra(t),n=Ca(ja.current);var a=t.type;if(null!==e&&null!=t.stateNode)Bo(e,t,a,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ca(Sa.current),So(t)){r=t.stateNode,a=t.type;var u=t.memoizedProps;switch(r[_n]=t,r[Tn]=u,a){case"iframe":case"object":case"embed":Qt("load",r);break;case"video":case"audio":for(e=0;e<$e.length;e++)Qt($e[e],r);break;case"source":Qt("error",r);break;case"img":case"image":case"link":Qt("error",r),Qt("load",r);break;case"form":Qt("reset",r),Qt("submit",r);break;case"details":Qt("toggle",r);break;case"input":Oe(r,u),Qt("invalid",r),sn(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Qt("invalid",r),sn(n,"onChange");break;case"textarea":De(r,u),Qt("invalid",r),sn(n,"onChange")}for(var s in an(a,u),e=null,u)if(u.hasOwnProperty(s)){var c=u[s];"children"===s?"string"===typeof c?r.textContent!==c&&(e=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(e=["children",""+c]):_.hasOwnProperty(s)&&null!=c&&sn(n,s)}switch(a){case"input":ke(r),Ee(r,u,!0);break;case"textarea":ke(r),Ne(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=cn)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(s=9===n.nodeType?n:n.ownerDocument,e===un&&(e=Le(a)),e===un?"script"===a?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(a,{is:r.is}):(e=s.createElement(a),"select"===a&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,a),e[_n]=t,e[Tn]=r,Uo(e,t),t.stateNode=e,s=on(a,r),a){case"iframe":case"object":case"embed":Qt("load",e),c=r;break;case"video":case"audio":for(c=0;c<$e.length;c++)Qt($e[c],e);c=r;break;case"source":Qt("error",e),c=r;break;case"img":case"image":case"link":Qt("error",e),Qt("load",e),c=r;break;case"form":Qt("reset",e),Qt("submit",e),c=r;break;case"details":Qt("toggle",e),c=r;break;case"input":Oe(e,r),c=xe(e,r),Qt("invalid",e),sn(n,"onChange");break;case"option":c=Ie(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),Qt("invalid",e),sn(n,"onChange");break;case"textarea":De(e,r),c=Ce(e,r),Qt("invalid",e),sn(n,"onChange");break;default:c=r}an(a,c);var l=c;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?nn(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&Ve(e,f):"children"===u?"string"===typeof f?("textarea"!==a||""!==f)&&Ue(e,f):"number"===typeof f&&Ue(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(_.hasOwnProperty(u)?null!=f&&sn(n,u):null!=f&&X(e,u,f,s))}switch(a){case"input":ke(e),Ee(e,r,!1);break;case"textarea":ke(e),Ne(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ge(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?je(e,!!r.multiple,n,!1):null!=r.defaultValue&&je(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof c.onClick&&(e.onclick=cn)}mn(a,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)qo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ca(ja.current),Ca(Sa.current),So(t)?(n=t.stateNode,r=t.memoizedProps,n[_n]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[_n]=t,t.stateNode=n)}return null;case 13:return si(Pa),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&So(t):(r=null!==(a=e.memoizedState),n||null===a||null!==(a=e.child.sibling)&&(null!==(u=t.firstEffect)?(t.firstEffect=a,a.nextEffect=u):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Pa.current)?Su===ku&&(Su=wu):(Su!==ku&&Su!==wu||(Su=xu),0!==Au&&null!==_u&&(Ns(_u,Eu),Rs(_u,Au)))),(n||r)&&(t.effectTag|=4),null);case 4:return Aa(),null;case 10:return ea(t),null;case 17:return vi(t.type)&&yi(),null;case 19:if(si(Pa),null===(r=t.memoizedState))return null;if(a=0!==(64&t.effectTag),null===(u=r.rendering)){if(a)Yo(r,!1);else if(Su!==ku||null!==e&&0!==(64&e.effectTag))for(u=t.child;null!==u;){if(null!==(e=La(u))){for(t.effectTag|=64,Yo(r,!1),null!==(a=e.updateQueue)&&(t.updateQueue=a,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)u=n,(a=r).effectTag&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(e=a.alternate)?(a.childExpirationTime=0,a.expirationTime=u,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null):(a.childExpirationTime=e.childExpirationTime,a.expirationTime=e.expirationTime,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,u=e.dependencies,a.dependencies=null===u?null:{expirationTime:u.expirationTime,firstContext:u.firstContext,responders:u.responders}),r=r.sibling;return ci(Pa,1&Pa.current|2),t.child}u=u.sibling}}else{if(!a)if(null!==(e=La(u))){if(t.effectTag|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),Yo(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Vi()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,a=!0,Yo(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Vi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Vi(),n.sibling=null,t=Pa.current,ci(Pa,a?1&t|2:1&t),n):null}throw Error(o(156,t.tag))}function Xo(e){switch(e.tag){case 1:vi(e.type)&&yi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Aa(),si(hi),si(fi),0!==(64&(t=e.effectTag)))throw Error(o(285));return e.effectTag=-4097&t|64,e;case 5:return Ra(e),null;case 13:return si(Pa),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return si(Pa),null;case 4:return Aa(),null;case 10:return ea(e),null;default:return null}}function Jo(e,t){return{value:e,source:t,stack:me(t)}}Uo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Bo=function(e,t,n,r,a){var o=e.memoizedProps;if(o!==r){var u,s,c=t.stateNode;switch(Ca(Sa.current),e=null,n){case"input":o=xe(c,o),r=xe(c,r),e=[];break;case"option":o=Ie(c,o),r=Ie(c,r),e=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":o=Ce(c,o),r=Ce(c,r),e=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(c.onclick=cn)}for(u in an(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u)for(s in c=o[u])c.hasOwnProperty(s)&&(n||(n={}),n[s]="");else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(_.hasOwnProperty(u)?e||(e=[]):(e=e||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(e||(e=[]),e.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(e=e||[]).push(u,l)):"children"===u?c===l||"string"!==typeof l&&"number"!==typeof l||(e=e||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(_.hasOwnProperty(u)?(null!=l&&sn(a,u),e||c===l||(e=[])):(e=e||[]).push(u,l))}n&&(e=e||[]).push("style",n),a=e,(t.updateQueue=a)&&(t.effectTag|=4)}},qo=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var Zo="function"===typeof WeakSet?WeakSet:Set;function eu(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=me(n)),null!==n&&ye(n.type),t=t.value,null!==e&&1===e.tag&&ye(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function tu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){gs(e,n)}else t.current=null}function nu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Wi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(o(163))}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void iu(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:Wi(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&fa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}fa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&mn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Lt(n)))));case 19:case 17:case 20:case 21:return}throw Error(o(163))}function ou(e,t,n){switch("function"===typeof xs&&xs(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;qi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(a){gs(i,a)}}e=e.next}while(e!==r)}))}break;case 1:tu(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){gs(e,n)}}(t,n);break;case 5:tu(t);break;case 4:lu(e,t,n)}}function uu(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&uu(t)}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function cu(e){e:{for(var t=e.return;null!==t;){if(su(t)){var n=t;break e}t=t.return}throw Error(o(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.effectTag&&(Ue(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||su(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?function e(t,n,r){var i=t.tag,a=5===i||6===i;if(a)t=a?t.stateNode:t.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=cn));else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t):function e(t,n,r){var i=t.tag,a=5===i||6===i;if(a)t=a?t.stateNode:t.stateNode.instance,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t)}function lu(e,t,n){for(var r,i,a=t,u=!1;;){if(!u){u=a.return;e:for(;;){if(null===u)throw Error(o(160));switch(r=u.stateNode,u.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}u=u.return}u=!0}if(5===a.tag||6===a.tag){e:for(var s=e,c=a,l=n,f=c;;)if(ou(s,f,l),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===c)break e;for(;null===f.sibling;){if(null===f.return||f.return===c)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(s=r,c=a.stateNode,8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)):r.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(ou(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(u=!1)}a.sibling.return=a.return,a=a.sibling}}function fu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void ru(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Tn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&_e(n,r),on(e,i),t=on(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?nn(n,s):"dangerouslySetInnerHTML"===u?Ve(n,s):"children"===u?Ue(n,s):X(n,u,s,t)}switch(e){case"input":Te(n,r);break;case"textarea":Ae(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?je(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?je(n,!!r.multiple,r.defaultValue,!0):je(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Lt(t.containerInfo)));case 12:return;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Ru=Vi()),null!==n)e:for(e=n;;){if(5===e.tag)a=e.stateNode,r?"function"===typeof(a=a.style).setProperty?a.setProperty("display","none","important"):a.display="none":(a=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,a.style.display=tn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(a=e.child.sibling).return=e,e=a;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void hu(t);case 19:return void hu(t);case 17:return}throw Error(o(163))}function hu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zo),t.forEach((function(t){var r=ks.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=ua(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Lu||(Lu=!0,Mu=r),eu(e,t)},n}function vu(e,t,n){(n=ua(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return eu(e,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Fu?Fu=new Set([this]):Fu.add(this),eu(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var yu,mu=Math.ceil,gu=$.ReactCurrentDispatcher,bu=$.ReactCurrentOwner,ku=0,wu=3,xu=4,Ou=0,_u=null,Tu=null,Eu=0,Su=ku,Iu=null,ju=1073741823,Cu=1073741823,Du=null,Au=0,Nu=!1,Ru=0,Pu=null,Lu=!1,Mu=null,Fu=null,Vu=!1,Uu=null,Bu=90,qu=null,zu=0,Ku=null,Gu=0;function Hu(){return 0!==(48&Ou)?1073741821-(Vi()/10|0):0!==Gu?Gu:Gu=1073741821-(Vi()/10|0)}function Qu(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Ui();if(0===(4&t))return 99===r?1073741823:1073741822;if(0!==(16&Ou))return Eu;if(null!==n)e=Qi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Qi(e,150,100);break;case 97:case 96:e=Qi(e,5e3,250);break;case 95:e=2;break;default:throw Error(o(326))}return null!==_u&&e===Eu&&--e,e}function Wu(e,t){if(50<zu)throw zu=0,Ku=null,Error(o(185));if(null!==(e=Yu(e,t))){var n=Ui();1073741823===t?0!==(8&Ou)&&0===(48&Ou)?Zu(e):(Xu(e),0===Ou&&Gi()):Xu(e),0===(4&Ou)||98!==n&&99!==n||(null===qu?qu=new Map([[e,t]]):(void 0===(n=qu.get(e))||n>t)&&qu.set(e,t))}}function Yu(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(_u===i&&(os(t),Su===xu&&Ns(i,Eu)),Rs(i,t)),i}function $u(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!As(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function Xu(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Ki(Zu.bind(null,e));else{var t=$u(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=Hu();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Ai&&Oi(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Ki(Zu.bind(null,e)):zi(r,Ju.bind(null,e),{timeout:10*(1073741821-t)-Vi()}),e.callbackNode=t}}}function Ju(e,t){if(Gu=0,t)return Ps(e,t=Hu()),Xu(e),null;var n=$u(e);if(0!==n){if(t=e.callbackNode,0!==(48&Ou))throw Error(o(327));if(vs(),e===_u&&n===Eu||ns(e,n),null!==Tu){var r=Ou;Ou|=16;for(var i=is();;)try{ss();break}catch(s){rs(e,s)}if(Zi(),Ou=r,gu.current=i,1===Su)throw t=Iu,ns(e,n),Ns(e,n),Xu(e),t;if(null===Tu)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Su,_u=null,r){case ku:case 1:throw Error(o(345));case 2:Ps(e,2<n?2:n);break;case wu:if(Ns(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=fs(i)),1073741823===ju&&10<(i=Ru+500-Vi())){if(Nu){var a=e.lastPingedTime;if(0===a||a>=n){e.lastPingedTime=n,ns(e,n);break}}if(0!==(a=$u(e))&&a!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=bn(hs.bind(null,e),i);break}hs(e);break;case xu:if(Ns(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=fs(i)),Nu&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,ns(e,n);break}if(0!==(i=$u(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Cu?r=10*(1073741821-Cu)-Vi():1073741823===ju?r=0:(r=10*(1073741821-ju)-5e3,0>(r=(i=Vi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mu(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=bn(hs.bind(null,e),r);break}hs(e);break;case 5:if(1073741823!==ju&&null!==Du){a=ju;var u=Du;if(0>=(r=0|u.busyMinDurationMs)?r=0:(i=0|u.busyDelayMs,r=(a=Vi()-(10*(1073741821-a)-(0|u.timeoutMs||5e3)))<=i?0:i+r-a),10<r){Ns(e,n),e.timeoutHandle=bn(hs.bind(null,e),r);break}}hs(e);break;default:throw Error(o(329))}if(Xu(e),e.callbackNode===t)return Ju.bind(null,e)}}return null}function Zu(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!==(48&Ou))throw Error(o(327));if(vs(),e===_u&&t===Eu||ns(e,t),null!==Tu){var n=Ou;Ou|=16;for(var r=is();;)try{us();break}catch(i){rs(e,i)}if(Zi(),Ou=n,gu.current=r,1===Su)throw n=Iu,ns(e,t),Ns(e,t),Xu(e),n;if(null!==Tu)throw Error(o(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,_u=null,hs(e),Xu(e)}return null}function es(e,t){var n=Ou;Ou|=1;try{return e(t)}finally{0===(Ou=n)&&Gi()}}function ts(e,t){var n=Ou;Ou&=-2,Ou|=8;try{return e(t)}finally{0===(Ou=n)&&Gi()}}function ns(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,kn(n)),null!==Tu)for(n=Tu.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&yi();break;case 3:Aa(),si(hi),si(fi);break;case 5:Ra(r);break;case 4:Aa();break;case 13:case 19:si(Pa);break;case 10:ea(r)}n=n.return}_u=e,Tu=Es(e.current,null),Eu=t,Su=ku,Iu=null,Cu=ju=1073741823,Du=null,Au=0,Nu=!1}function rs(e,t){for(;;){try{if(Zi(),Fa.current=yo,Ka)for(var n=Ba.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Ua=0,za=qa=Ba=null,Ka=!1,null===Tu||null===Tu.return)return Su=1,Iu=t,Tu=null;e:{var i=e,a=Tu.return,o=Tu,u=t;if(t=Eu,o.effectTag|=2048,o.firstEffect=o.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var s=u;if(0===(2&o.mode)){var c=o.alternate;c?(o.updateQueue=c.updateQueue,o.memoizedState=c.memoizedState,o.expirationTime=c.expirationTime):(o.updateQueue=null,o.memoizedState=null)}var l=0!==(1&Pa.current),f=a;do{var h;if(h=13===f.tag){var d=f.memoizedState;if(null!==d)h=null!==d.dehydrated;else{var p=f.memoizedProps;h=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!l)}}if(h){var v=f.updateQueue;if(null===v){var y=new Set;y.add(s),f.updateQueue=y}else v.add(s);if(0===(2&f.mode)){if(f.effectTag|=64,o.effectTag&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var m=ua(1073741823,null);m.tag=2,sa(o,m)}o.expirationTime=1073741823;break e}u=void 0,o=t;var g=i.pingCache;if(null===g?(g=i.pingCache=new du,u=new Set,g.set(s,u)):void 0===(u=g.get(s))&&(u=new Set,g.set(s,u)),!u.has(o)){u.add(o);var b=bs.bind(null,i,s,o);s.then(b,b)}f.effectTag|=4096,f.expirationTime=t;break e}f=f.return}while(null!==f);u=Error((ye(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+me(o))}5!==Su&&(Su=2),u=Jo(u,o),f=a;do{switch(f.tag){case 3:s=u,f.effectTag|=4096,f.expirationTime=t,ca(f,pu(f,s,t));break e;case 1:s=u;var k=f.type,w=f.stateNode;if(0===(64&f.effectTag)&&("function"===typeof k.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Fu||!Fu.has(w)))){f.effectTag|=4096,f.expirationTime=t,ca(f,vu(f,s,t));break e}}f=f.return}while(null!==f)}Tu=ls(Tu)}catch(x){t=x;continue}break}}function is(){var e=gu.current;return gu.current=yo,null===e?yo:e}function as(e,t){e<ju&&2<e&&(ju=e),null!==t&&e<Cu&&2<e&&(Cu=e,Du=t)}function os(e){e>Au&&(Au=e)}function us(){for(;null!==Tu;)Tu=cs(Tu)}function ss(){for(;null!==Tu&&!Ni();)Tu=cs(Tu)}function cs(e){var t=yu(e.alternate,e,Eu);return e.memoizedProps=e.pendingProps,null===t&&(t=ls(e)),bu.current=null,t}function ls(e){Tu=e;do{var t=Tu.alternate;if(e=Tu.return,0===(2048&Tu.effectTag)){if(t=$o(t,Tu,Eu),1===Eu||1!==Tu.childExpirationTime){for(var n=0,r=Tu.child;null!==r;){var i=r.expirationTime,a=r.childExpirationTime;i>n&&(n=i),a>n&&(n=a),r=r.sibling}Tu.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Tu.firstEffect),null!==Tu.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Tu.firstEffect),e.lastEffect=Tu.lastEffect),1<Tu.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Tu:e.firstEffect=Tu,e.lastEffect=Tu))}else{if(null!==(t=Xo(Tu)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Tu.sibling))return t;Tu=e}while(null!==Tu);return Su===ku&&(Su=5),null}function fs(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function hs(e){var t=Ui();return qi(99,ds.bind(null,e,t)),null}function ds(e,t){do{vs()}while(null!==Uu);if(0!==(48&Ou))throw Error(o(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=fs(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===_u&&(Tu=_u=null,Eu=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var a=Ou;Ou|=32,bu.current=null,vn=Ht;var u=dn();if(pn(u)){if("selectionStart"in u)var s={start:u.selectionStart,end:u.selectionEnd};else e:{var c=(s=(s=u.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(c&&0!==c.rangeCount){s=c.anchorNode;var l=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{s.nodeType,f.nodeType}catch(E){s=null;break e}var h=0,d=-1,p=-1,v=0,y=0,m=u,g=null;t:for(;;){for(var b;m!==s||0!==l&&3!==m.nodeType||(d=h+l),m!==f||0!==c&&3!==m.nodeType||(p=h+c),3===m.nodeType&&(h+=m.nodeValue.length),null!==(b=m.firstChild);)g=m,m=b;for(;;){if(m===u)break t;if(g===s&&++v===l&&(d=h),g===f&&++y===c&&(p=h),null!==(b=m.nextSibling))break;g=(m=g).parentNode}m=b}s=-1===d||-1===p?null:{start:d,end:p}}else s=null}s=s||{start:0,end:0}}else s=null;yn={activeElementDetached:null,focusedElem:u,selectionRange:s},Ht=!1,Pu=i;do{try{ps()}catch(E){if(null===Pu)throw Error(o(330));gs(Pu,E),Pu=Pu.nextEffect}}while(null!==Pu);Pu=i;do{try{for(u=e,s=t;null!==Pu;){var k=Pu.effectTag;if(16&k&&Ue(Pu.stateNode,""),128&k){var w=Pu.alternate;if(null!==w){var x=w.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&k){case 2:cu(Pu),Pu.effectTag&=-3;break;case 6:cu(Pu),Pu.effectTag&=-3,fu(Pu.alternate,Pu);break;case 1024:Pu.effectTag&=-1025;break;case 1028:Pu.effectTag&=-1025,fu(Pu.alternate,Pu);break;case 4:fu(Pu.alternate,Pu);break;case 8:lu(u,l=Pu,s),uu(l)}Pu=Pu.nextEffect}}catch(E){if(null===Pu)throw Error(o(330));gs(Pu,E),Pu=Pu.nextEffect}}while(null!==Pu);if(x=yn,w=dn(),k=x.focusedElem,s=x.selectionRange,w!==k&&k&&k.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(k.ownerDocument.documentElement,k)){null!==s&&pn(k)&&(w=s.start,void 0===(x=s.end)&&(x=w),"selectionStart"in k?(k.selectionStart=w,k.selectionEnd=Math.min(x,k.value.length)):(x=(w=k.ownerDocument||document)&&w.defaultView||window).getSelection&&(x=x.getSelection(),l=k.textContent.length,u=Math.min(s.start,l),s=void 0===s.end?u:Math.min(s.end,l),!x.extend&&u>s&&(l=s,s=u,u=l),l=hn(k,u),f=hn(k,s),l&&f&&(1!==x.rangeCount||x.anchorNode!==l.node||x.anchorOffset!==l.offset||x.focusNode!==f.node||x.focusOffset!==f.offset)&&((w=w.createRange()).setStart(l.node,l.offset),x.removeAllRanges(),u>s?(x.addRange(w),x.extend(f.node,f.offset)):(w.setEnd(f.node,f.offset),x.addRange(w))))),w=[];for(x=k;x=x.parentNode;)1===x.nodeType&&w.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<w.length;k++)(x=w[k]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Ht=!!vn,yn=vn=null,e.current=n,Pu=i;do{try{for(k=e;null!==Pu;){var O=Pu.effectTag;if(36&O&&au(k,Pu.alternate,Pu),128&O){w=void 0;var _=Pu.ref;if(null!==_){var T=Pu.stateNode;switch(Pu.tag){case 5:w=T;break;default:w=T}"function"===typeof _?_(w):_.current=w}}Pu=Pu.nextEffect}}catch(E){if(null===Pu)throw Error(o(330));gs(Pu,E),Pu=Pu.nextEffect}}while(null!==Pu);Pu=null,Ri(),Ou=a}else e.current=n;if(Vu)Vu=!1,Uu=e,Bu=t;else for(Pu=i;null!==Pu;)t=Pu.nextEffect,Pu.nextEffect=null,Pu=t;if(0===(t=e.firstPendingTime)&&(Fu=null),1073741823===t?e===Ku?zu++:(zu=0,Ku=e):zu=0,"function"===typeof ws&&ws(n.stateNode,r),Xu(e),Lu)throw Lu=!1,e=Mu,Mu=null,e;return 0!==(8&Ou)||Gi(),null}function ps(){for(;null!==Pu;){var e=Pu.effectTag;0!==(256&e)&&nu(Pu.alternate,Pu),0===(512&e)||Vu||(Vu=!0,zi(97,(function(){return vs(),null}))),Pu=Pu.nextEffect}}function vs(){if(90!==Bu){var e=97<Bu?97:Bu;return Bu=90,qi(e,ys)}}function ys(){if(null===Uu)return!1;var e=Uu;if(Uu=null,0!==(48&Ou))throw Error(o(331));var t=Ou;for(Ou|=32,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:ru(5,n),iu(5,n)}}catch(r){if(null===e)throw Error(o(330));gs(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return Ou=t,Gi(),!0}function ms(e,t,n){sa(e,t=pu(e,t=Jo(n,t),1073741823)),null!==(e=Yu(e,1073741823))&&Xu(e)}function gs(e,t){if(3===e.tag)ms(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){ms(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Fu||!Fu.has(r))){sa(n,e=vu(n,e=Jo(t,e),1073741823)),null!==(n=Yu(n,1073741823))&&Xu(n);break}}n=n.return}}function bs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),_u===e&&Eu===n?Su===xu||Su===wu&&1073741823===ju&&Vi()-Ru<500?ns(e,Eu):Nu=!0:As(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,Xu(e)))}function ks(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=Qu(t=Hu(),e,null)),null!==(e=Yu(e,t))&&Xu(e)}yu=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||hi.current)Co=!0;else{if(r<n){switch(Co=!1,t.tag){case 3:Vo(t),Io();break;case 5:if(Na(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:vi(t.type)&&bi(t);break;case 4:Da(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,ci(Yi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Ko(e,t,n):(ci(Pa,1&Pa.current),null!==(t=Wo(e,t,n))?t.sibling:null);ci(Pa,1&Pa.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return Qo(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),ci(Pa,Pa.current),!r)return null}return Wo(e,t,n)}Co=!1}}else Co=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=pi(t,fi.current),na(t,n),i=Qa(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,vi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,aa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&pa(t,r,u,e),i.updater=va,t.stateNode=i,i._reactInternalFiber=t,ba(t,r,e,n),t=Fo(null,t,r,!0,a,n)}else t.tag=0,Do(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,a=t.tag=function(e){if("function"===typeof e)return Ts(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===se)return 11;if(e===fe)return 14}return 2}(i),e=Wi(i,e),a){case 0:t=Lo(null,t,i,e,n);break e;case 1:t=Mo(null,t,i,e,n);break e;case 11:t=Ao(null,t,i,e,n);break e;case 14:t=No(null,t,i,Wi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Lo(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Mo(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 3:if(Vo(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,oa(e,t),la(t,r,null,n),(r=t.memoizedState.element)===i)Io(),t=Wo(e,t,n);else{if((i=t.stateNode.hydrate)&&(wo=wn(t.stateNode.containerInfo.firstChild),ko=t,i=xo=!0),i)for(n=Ta(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Do(e,t,r,n),Io();t=t.child}return t;case 5:return Na(t),null===e&&To(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,gn(r,i)?u=null:null!==a&&gn(r,a)&&(t.effectTag|=16),Po(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Do(e,t,u,n),t=t.child),t;case 6:return null===e&&To(t),null;case 13:return Ko(e,t,n);case 4:return Da(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_a(t,null,r,n):Do(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ao(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 7:return Do(e,t,t.pendingProps,n),t.child;case 8:case 12:return Do(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(ci(Yi,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=Mr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!hi.current){t=Wo(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=ua(n,null)).tag=2,sa(s,l)),s.expirationTime<n&&(s.expirationTime=n),null!==(l=s.alternate)&&l.expirationTime<n&&(l.expirationTime=n),ta(s.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Do(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,na(t,n),r=r(i=ra(i,a.unstable_observedBits)),t.effectTag|=1,Do(e,t,r,n),t.child;case 14:return a=Wi(i=t.type,t.pendingProps),No(e,t,i,a=Wi(i.type,a),r,n);case 15:return Ro(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,vi(r)?(e=!0,bi(t)):e=!1,na(t,n),ma(t,r,i),ba(t,r,i,n),Fo(null,t,r,!0,e,n);case 19:return Qo(e,t,n)}throw Error(o(156,t.tag))};var ws=null,xs=null;function Os(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function _s(e,t,n,r){return new Os(e,t,n,r)}function Ts(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Es(e,t){var n=e.alternate;return null===n?((n=_s(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ss(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Ts(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case ne:return Is(n.children,i,a,t);case ue:u=8,i|=7;break;case re:u=8,i|=1;break;case ie:return(e=_s(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=a,e;case ce:return(e=_s(13,n,t,i)).type=ce,e.elementType=ce,e.expirationTime=a,e;case le:return(e=_s(19,n,t,i)).elementType=le,e.expirationTime=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case ae:u=10;break e;case oe:u=9;break e;case se:u=11;break e;case fe:u=14;break e;case he:u=16,r=null;break e;case de:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=_s(u,n,t,i)).elementType=e,t.type=r,t.expirationTime=a,t}function Is(e,t,n,r){return(e=_s(7,e,r,t)).expirationTime=n,e}function js(e,t,n){return(e=_s(6,e,null,t)).expirationTime=n,e}function Cs(e,t,n){return(t=_s(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ds(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function As(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Ns(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Rs(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Ps(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Ls(e,t,n,r){var i=t.current,a=Hu(),u=ha.suspense;a=Qu(a,i,u);e:if(n){t:{if(Ze(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(vi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(vi(c)){n=gi(n,c,s);break e}}n=s}else n=li;return null===t.context?t.context=n:t.pendingContext=n,(t=ua(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),sa(i,t),Wu(i,a),a}function Ms(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Fs(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Vs(e,t){Fs(e,t),(e=e.alternate)&&Fs(e,t)}function Us(e,t,n){var r=new Ds(e,t,n=null!=n&&!0===n.hydrate),i=_s(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,aa(i),e[En]=r.current,n&&0!==t&&function(e,t){var n=Je(t);Et.forEach((function(e){pt(e,t,n)})),St.forEach((function(e){pt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function Bs(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function qs(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=Ms(o);u.call(e)}}Ls(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Us(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=Ms(o);s.call(e)}}ts((function(){Ls(t,o,e,i)}))}return Ms(o)}function zs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Ks(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Bs(t))throw Error(o(200));return zs(e,t,null,n)}Us.prototype.render=function(e){Ls(e,this._internalRoot,null,null)},Us.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Ls(null,e,null,(function(){t[En]=null}))},vt=function(e){if(13===e.tag){var t=Qi(Hu(),150,100);Wu(e,t),Vs(e,t)}},yt=function(e){13===e.tag&&(Wu(e,3),Vs(e,3))},mt=function(e){if(13===e.tag){var t=Hu();Wu(e,t=Qu(t,e,null)),Vs(e,t)}},I=function(e,t,n){switch(t){case"input":if(Te(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Cn(r);if(!i)throw Error(o(90));we(r),Te(r,i)}}}break;case"textarea":Ae(e,n);break;case"select":null!=(t=n.value)&&je(e,!!n.multiple,t,!1)}},R=es,P=function(e,t,n,r,i){var a=Ou;Ou|=4;try{return qi(98,e.bind(null,t,n,r,i))}finally{0===(Ou=a)&&Gi()}},L=function(){0===(49&Ou)&&(function(){if(null!==qu){var e=qu;qu=null,e.forEach((function(e,t){Ps(t,e),Xu(t)})),Gi()}}(),vs())},M=function(e,t){var n=Ou;Ou|=2;try{return e(t)}finally{0===(Ou=n)&&Gi()}};var Gs={Events:[In,jn,Cn,E,O,Mn,function(e){it(e,Ln)},A,N,Xt,ut,vs,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);ws=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},xs=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=nt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Sn,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gs,t.createPortal=Ks,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=nt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!==(48&Ou))throw Error(o(187));var n=Ou;Ou|=1;try{return qi(99,e.bind(null,t))}finally{Ou=n,Gi()}},t.hydrate=function(e,t,n){if(!Bs(t))throw Error(o(200));return qs(null,e,t,!0,n)},t.render=function(e,t,n){if(!Bs(t))throw Error(o(200));return qs(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Bs(e))throw Error(o(40));return!!e._reactRootContainer&&(ts((function(){qs(null,null,e,!1,(function(){e._reactRootContainer=null,e[En]=null}))})),!0)},t.unstable_batchedUpdates=es,t.unstable_createPortal=function(e,t){return Ks(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Bs(n))throw Error(o(200));if(null==e||void 0===e._reactInternalFiber)throw Error(o(38));return qs(e,t,n,!1,r)},t.version="16.13.1"},function(e,t,n){"use strict";e.exports=n(39)},function(e,t,n){"use strict";var r,i,a,o,u;if("undefined"===typeof window||"function"!==typeof MessageChannel){var s=null,c=null,l=function e(){if(null!==s)try{var n=t.unstable_now();s(!0,n),s=null}catch(r){throw setTimeout(e,0),r}},f=Date.now();t.unstable_now=function(){return Date.now()-f},r=function(e){null!==s?setTimeout(r,0,e):(s=e,setTimeout(l,0))},i=function(e,t){c=setTimeout(e,t)},a=function(){clearTimeout(c)},o=function(){return!1},u=t.unstable_forceFrameRate=function(){}}else{var h=window.performance,d=window.Date,p=window.setTimeout,v=window.clearTimeout;if("undefined"!==typeof console){var y=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof y&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof h&&"function"===typeof h.now)t.unstable_now=function(){return h.now()};else{var m=d.now();t.unstable_now=function(){return d.now()-m}}var g=!1,b=null,k=-1,w=5,x=0;o=function(){return t.unstable_now()>=x},u=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):w=0<e?Math.floor(1e3/e):5};var O=new MessageChannel,_=O.port2;O.port1.onmessage=function(){if(null!==b){var e=t.unstable_now();x=e+w;try{b(!0,e)?_.postMessage(null):(g=!1,b=null)}catch(n){throw _.postMessage(null),n}}else g=!1},r=function(e){b=e,g||(g=!0,_.postMessage(null))},i=function(e,n){k=p((function(){e(t.unstable_now())}),n)},a=function(){v(k),k=-1}}function T(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<I(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>I(o,n))void 0!==s&&0>I(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>I(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function I(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var j=[],C=[],D=1,A=null,N=3,R=!1,P=!1,L=!1;function M(e){for(var t=E(C);null!==t;){if(null===t.callback)S(C);else{if(!(t.startTime<=e))break;S(C),t.sortIndex=t.expirationTime,T(j,t)}t=E(C)}}function F(e){if(L=!1,M(e),!P)if(null!==E(j))P=!0,r(V);else{var t=E(C);null!==t&&i(F,t.startTime-e)}}function V(e,n){P=!1,L&&(L=!1,a()),R=!0;var r=N;try{for(M(n),A=E(j);null!==A&&(!(A.expirationTime>n)||e&&!o());){var u=A.callback;if(null!==u){A.callback=null,N=A.priorityLevel;var s=u(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?A.callback=s:A===E(j)&&S(j),M(n)}else S(j);A=E(j)}if(null!==A)var c=!0;else{var l=E(C);null!==l&&i(F,l.startTime-n),c=!1}return c}finally{A=null,N=r,R=!1}}function U(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var B=u;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||R||(P=!0,r(V))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return E(j)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=B,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,n,o){var u=t.unstable_now();if("object"===typeof o&&null!==o){var s=o.delay;s="number"===typeof s&&0<s?u+s:u,o="number"===typeof o.timeout?o.timeout:U(e)}else o=U(e),s=u;return e={id:D++,callback:n,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>u?(e.sortIndex=s,T(C,e),null===E(j)&&e===E(C)&&(L?a():L=!0,i(F,s-u))):(e.sortIndex=o,T(j,e),P||R||(P=!0,r(V))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();M(e);var n=E(j);return n!==A&&null!==A&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<A.expirationTime||o()},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},,function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(E){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=k(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};p[i]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(_([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var r;this._invoke=function(i,a){function o(){return new t((function(r,o){!function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"===typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function k(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function _(e){if(e){var t=e[i];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=m.constructor=d,d.constructor=h,h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(b.prototype),b.prototype[a]=function(){return this},e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(m),u(m,o,"Generator"),m[i]=function(){return this},m.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";var r=n(10);Object(r.registerVersion)("firebase","9.15.0","app")},,function(e,t,n){"use strict";var r=n(1),i=n(2),a=n(19),o=n(13),u=n(0),s=n.n(u),c=n(3),l=n(12),f=n(4),h=n(20),d=n(8),p=n(9),v=n(10),y=n(5),m=n(14),g=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e,i){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(r.a)(this,n),(a=t.call(this,b(e),"Firebase Storage: ".concat(i," (").concat(b(e),")"))).status_=o,a.customData={serverResponse:null},a._baseMessage=a.message,Object.setPrototypeOf(Object(h.a)(a),n.prototype),a}return Object(i.a)(n,[{key:"_codeEquals",value:function(e){return b(e)===this.code}},{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(y.c);function b(e){return"storage/"+e}function k(){return new g("unknown","An unknown error occurred, please check the error payload for server response.")}function w(){return new g("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function x(){return new g("canceled","User canceled the upload/download.")}function O(){return new g("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function _(e){return new g("invalid-argument",e)}function T(){return new g("app-deleted","The Firebase app was deleted.")}function E(e){return new g("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function S(e,t){return new g("invalid-format","String does not match format '"+e+"': "+t)}function I(e){throw new g("internal-error","Internal error: "+e)}var j,C=function(){function e(t,n){Object(r.a)(this,e),this.bucket=t,this.path_=n}return Object(i.a)(e,[{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}},{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new g("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null;var i=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}for(var o=n.replace(/[.]/g,"\\."),u=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat("([A-Za-z0-9.\\-_]+)","/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://".concat("firebasestorage.googleapis.com"===n?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat("([A-Za-z0-9.\\-_]+)","/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:a}],s=0;s<u.length;s++){var c=u[s],l=c.regex.exec(t);if(l){var f=l[c.indices.bucket],h=l[c.indices.path];h||(h=""),r=new e(f,h),c.postModify(r);break}}if(null==r)throw function(e){return new g("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),D=function(){function e(t){Object(r.a)(this,e),this.promise_=Promise.reject(t)}return Object(i.a)(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function A(e){return"string"===typeof e||e instanceof String}function N(e){return R()&&e instanceof Blob}function R(){return"undefined"!==typeof Blob&&!Object(y.s)()}function P(e,t,n,r){if(r<t)throw _("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw _("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function L(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function M(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function F(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(j||(j={}));var V=function(){function e(t,n,i,a,o,u,s,c,l,f,h){var d=this,p=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];Object(r.a)(this,e),this.url_=t,this.method_=n,this.headers_=i,this.body_=a,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=s,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=f,this.connectionFactory_=h,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){d.resolve_=e,d.reject_=t,d.start_()}))}return Object(i.a)(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());void 0!==o?r(o):r()}catch(s){i(s)}else if(null!==a){var u=k();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?T():x());else i(w())}};this.canceled_?t(0,new U(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a,d=s()||o;if(d)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new U(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===j.NO_ERROR,a=r.getStatus();if(n&&!F(a,e.additionalRetryCodes_)||!e.retry){var o=-1!==e.successCodes_.indexOf(a);t(!0,new U(o,r))}else{var u=r.getErrorCode()===j.ABORT;t(!1,new U(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),U=function e(t,n,i){Object(r.a)(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!i};function B(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function q(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}function z(e,t){t&&(e["X-Firebase-GMPID"]=t)}function K(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function G(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=M(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return z(c,t),B(c,n),q(c,a),K(c,r),new V(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}function H(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Q(){for(var e=H(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(R())return new Blob(n);throw new g("unsupported-environment","This browser doesn't seem to support creating Blobs")}function W(e){if("undefined"===typeof atob)throw new g("unsupported-environment","".concat("base-64"," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));return atob(e)}var Y={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},$=function e(t,n){Object(r.a)(this,e),this.data=t,this.contentType=n||null};function X(e,t){switch(e){case Y.RAW:return new $(J(t));case Y.BASE64:case Y.BASE64URL:return new $(Z(e,t));case Y.DATA_URL:return new $(function(e){var t=new ee(e);return t.base64?Z(Y.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw S(Y.DATA_URL,"Malformed data URL.")}return J(t)}(t.rest)}(t),new ee(t).contentType)}throw k()}function J(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Z(e,t){switch(e){case Y.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw S(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Y.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw S(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=W(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw S(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var ee=function e(t){Object(r.a)(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw S(Y.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var i=n[1]||null;null!=i&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)};var te=function(){function e(t,n){Object(r.a)(this,e);var i=0,a="";N(t)?(this.data_=t,i=t.size,a=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=a}return Object(i.a)(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(N(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(R()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(Q.apply(null,i))}var a=n.map((function(e){return A(e)?X(Y.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function ne(e){var t,n;try{t=JSON.parse(e)}catch(r){return null}return"object"!==typeof(n=t)||Array.isArray(n)?null:t}function re(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function ie(e,t){return t}var ae=function e(t,n,i,a){Object(r.a)(this,e),this.server=t,this.local=n||t,this.writable=!!i,this.xform=a||ie},oe=null;function ue(){if(oe)return oe;var e=[];e.push(new ae("bucket")),e.push(new ae("generation")),e.push(new ae("metageneration")),e.push(new ae("name","fullPath",!0));var t=new ae("name");t.xform=function(e,t){return function(e){return!A(e)||e.length<2?e:re(e)}(t)},e.push(t);var n=new ae("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new ae("timeCreated")),e.push(new ae("updated")),e.push(new ae("md5Hash",null,!0)),e.push(new ae("cacheControl",null,!0)),e.push(new ae("contentDisposition",null,!0)),e.push(new ae("contentEncoding",null,!0)),e.push(new ae("contentLanguage",null,!0)),e.push(new ae("contentType",null,!0)),e.push(new ae("metadata","customMetadata",!0)),oe=e}function se(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new C(n,r);return t._makeStorageReference(i)}})}(r,e),r}function ce(e,t,n){var r=ne(t);return null===r?null:se(e,r,n)}function le(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function fe(e,t,n){var r=ne(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=Object(f.a)(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new C(t,o));r.prefixes.push(u)}}catch(d){a.e(d)}finally{a.f()}}if(n.items){var s,c=Object(f.a)(n.items);try{for(c.s();!(s=c.n()).done;){var l=s.value,h=e._makeStorageReference(new C(t,l.name));r.items.push(h)}}catch(d){c.e(d)}finally{c.f()}}return r}(e,t,r)}var he=function e(t,n,i,a){Object(r.a)(this,e),this.url=t,this.method=n,this.handler=i,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function de(e){if(!e)throw k()}function pe(e,t){return function(n,r){var i=ce(e,r,t);return de(null!==i),i}}function ve(e,t){return function(n,r){var i=ce(e,r,t);return de(null!==i),function(e,t,n,r){var i=ne(t);if(null===i)return null;if(!A(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return L("/b/"+o(i)+"/o/"+o(a),n,r)+M({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function ye(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new g("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new g("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new g("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new g("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function me(e){var t=ye(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new g("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function ge(e,t,n){var r=L(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new he(r,"GET",pe(e,n),i);return a.errorHandler=me(t),a}function be(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=L(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new he(o,"GET",function(e,t){return function(n,r){var i=fe(e,t,r);return de(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=ye(t),s}function ke(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function we(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=ke(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+le(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=te.getBlob(c,r,l);if(null===f)throw O();var h={name:s.fullPath},d=L(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new he(d,"POST",pe(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=ye(t),v}var xe=function e(t,n,i,a){Object(r.a)(this,e),this.current=t,this.total=n,this.finalized=!!i,this.metadata=a||null};function Oe(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){de(!1)}return de(!!n&&-1!==(t||["active"]).indexOf(n)),n}function _e(e,t,n,r,i,a,o,u){var s=new xe(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new g("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw O();var v=t.maxUploadRetryTime,y=new he(n,"POST",(function(e,n){var i,o=Oe(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?pe(t,a)(e,n):null,new xe(u,c,"final"===o,i)}),v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=u||null,y.errorHandler=ye(e),y}var Te={STATE_CHANGED:"state_changed"},Ee={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Se(e){switch(e){case"running":case"pausing":case"canceling":return Ee.RUNNING;case"paused":return Ee.PAUSED;case"success":return Ee.SUCCESS;case"canceled":return Ee.CANCELED;case"error":default:return Ee.ERROR}}var Ie=function e(t,n,i){if(Object(r.a)(this,e),"function"===typeof t||null!=n||null!=i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==i&&void 0!==i?i:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}};function je(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var Ce=function(){function e(){var t=this;Object(r.a)(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=j.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=j.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=j.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return Object(i.a)(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw I("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw I("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw I("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw I("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw I("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),De=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(Ce);function Ae(){return new De}var Ne=function(){function e(t,n){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(r.a)(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=a,this._mappings=ue(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(i._request=void 0,i._chunkMultiplier=1,e._codeEquals("canceled"))i._needToFetchStatus=!0,i.completeTransitions_();else{var t=i.isExponentialBackoffExpired();if(F(e.status,[])){if(!t)return i.sleepTime=Math.max(2*i.sleepTime,1e3),i._needToFetchStatus=!0,void i.completeTransitions_();e=w()}i._error=e,i._transition("error")}},this._metadataErrorHandler=function(e){i._request=void 0,e._codeEquals("canceled")?i.completeTransitions_():(i._error=e,i._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){i._resolve=e,i._reject=t,i._start()})),this._promise.then(null,(function(){}))}return Object(i.a)(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=Object(l.a)(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=ke(t,r,i),u={name:o.fullPath},s=L(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=le(o,n),f=e.maxUploadRetryTime,h=new he(s,"POST",(function(e){var t;Oe(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){de(!1)}return de(A(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=ye(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Ae,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new he(n,"POST",(function(e){var t=Oe(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){de(!1)}n||de(!1);var i=Number(n);return de(!isNaN(i)),new xe(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=ye(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,Ae,n,r);e._request=a,a.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=262144*this._chunkMultiplier,n=new xe(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=_e(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,Ae,i,a,!1);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(262144*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=ge(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,Ae,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=we(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Ae,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=x(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"on",value:function(e,t,n,r){var i=this,a=new Ie(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(Se(this._state)){case Ee.SUCCESS:je(this._resolve.bind(null,this.snapshot))();break;case Ee.CANCELED:case Ee.ERROR:je(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(Se(this._state)){case Ee.RUNNING:case Ee.PAUSED:e.next&&je(e.next.bind(e,this.snapshot))();break;case Ee.SUCCESS:e.complete&&je(e.complete.bind(e))();break;case Ee.CANCELED:case Ee.ERROR:e.error&&je(e.error.bind(e,this._error))();break;default:e.error&&je(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}},{key:"snapshot",get:function(){var e=Se(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}}]),e}(),Re=function(){function e(t,n){Object(r.a)(this,e),this._service=t,this._location=n instanceof C?n:C.makeFromUrl(n,t.host)}return Object(i.a)(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw E(e)}},{key:"root",get:function(){var e=new C(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return re(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new C(this._location.bucket,t);return new e(this._service,n)}}]),e}();function Pe(e,t,n){return Le.apply(this,arguments)}function Le(){return(Le=Object(c.a)(s.a.mark((function e(t,n,r){var i,a,u,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u={pageToken:r},e.next=3,Me(t,u);case 3:if(c=e.sent,(i=n.prefixes).push.apply(i,Object(o.a)(c.prefixes)),(a=n.items).push.apply(a,Object(o.a)(c.items)),null==c.nextPageToken){e.next=9;break}return e.next=9,Pe(t,n,c.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(e,t){null!=t&&"number"===typeof t.maxResults&&P("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=be(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,Ae)}function Fe(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=L(t.fullServerUrl(),e.host,e._protocol),a=le(n,r),o=e.maxOperationRetryTime,u=new he(i,"PATCH",pe(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=me(t),u}(e.storage,e._location,t,ue());return e.storage.makeRequestWithTokens(n,Ae)}function Ve(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=L(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new he(r,"GET",ve(e,n),i);return a.errorHandler=me(t),a}(e.storage,e._location,ue());return e.storage.makeRequestWithTokens(t,Ae).then((function(e){if(null===e)throw new g("no-download-url","The given file does not have any download URLs.");return e}))}function Ue(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=L(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new he(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=me(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Ae)}function Be(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new C(e._location.bucket,n);return new Re(e.storage,r)}function qe(e,t){if(e instanceof He){var n=e;if(null==n._bucket)throw new g("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Re(n,n._bucket);return null!=t?qe(r,t):r}return void 0!==t?Be(e,t):e}function ze(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof He)return new Re(e,t);throw _("To use ref(service, url), the first argument must be a Storage instance.")}return qe(e,t)}function Ke(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:C.makeFromBucketSpec(n,e)}function Ge(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:Object(y.h)(i,e.app.options.projectId))}var He=function(){function e(t,n,i,a,o){Object(r.a)(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=a,this._firebaseVersion=o,this._bucket=null,this._host="firebasestorage.googleapis.com",this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=a?C.makeFromBucketSpec(a,this._host):Ke(this._host,this.app.options)}return Object(i.a)(e,[{key:"_getAuthToken",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new Re(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new D(T());var o=G(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n){var r,i,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=Object(l.a)(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=C.makeFromBucketSpec(this._url,e):this._bucket=Ke(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){P("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){P("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}}]),e}();function Qe(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Ne(e,new te(t),n)}(e=Object(y.n)(e),t,n)}function We(e){return function(e){e._throwIfRoot("getMetadata");var t=ge(e.storage,e._location,ue());return e.storage.makeRequestWithTokens(t,Ae)}(e=Object(y.n)(e))}function Ye(e){return function(e){var t={prefixes:[],items:[]};return Pe(e,t).then((function(){return t}))}(e=Object(y.n)(e))}function $e(e,t){return ze(e=Object(y.n)(e),t)}function Xe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Ge(e,t,n,r)}function Je(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new He(r,i,a,n,v.SDK_VERSION)}Object(v._registerComponent)(new m.a("storage",Je,"PUBLIC").setMultipleInstances(!0)),Object(v.registerVersion)("@firebase/storage","0.10.0",""),Object(v.registerVersion)("@firebase/storage","0.10.0","esm2017");var Ze=function(){function e(t,n,i){Object(r.a)(this,e),this._delegate=t,this.task=n,this.ref=i}return Object(i.a)(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),et=function(){function e(t,n){Object(r.a)(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object(i.a)(e,[{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new Ze(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new Ze(e,i,i._ref))}:{next:t.next?function(e){return t.next(new Ze(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}},{key:"snapshot",get:function(){return new Ze(this._delegate.snapshot,this,this._ref)}}]),e}(),tt=function(){function e(t,n){Object(r.a)(this,e),this._delegate=t,this._service=n}return Object(i.a)(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new nt(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new nt(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),nt=function(){function e(t,n){Object(r.a)(this,e),this._delegate=t,this.storage=n}return Object(i.a)(e,[{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){return new e(function(e,t){return Be(e,t)}(this._delegate,t),this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new et(Qe(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=X(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new et(new Ne(this._delegate,new te(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return Ye(this._delegate).then((function(t){return new tt(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return Me(e=Object(y.n)(e),t)}(this._delegate,e||void 0).then((function(e){return new tt(e,t.storage)}))}},{key:"getMetadata",value:function(){return We(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return Fe(e=Object(y.n)(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return e=this._delegate,Ve(e=Object(y.n)(e));var e}},{key:"delete",value:function(){return this._throwIfRoot("delete"),e=this._delegate,Ue(e=Object(y.n)(e));var e}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw E(e)}},{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}}]),e}(),rt=function(){function e(t,n){Object(r.a)(this,e),this.app=t,this._delegate=n}return Object(i.a)(e,[{key:"ref",value:function(e){if(it(e))throw _("ref() expected a child path but got a URL, use refFromURL instead.");return new nt($e(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!it(e))throw _("refFromURL() expected a full URL but got a child path, use ref() instead.");try{C.makeFromUrl(e,this._delegate.host)}catch(t){throw _("refFromUrl() expected a valid full URL but got an invalid one.")}return new nt($e(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Xe(this._delegate,e,t,n)}},{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}}]),e}();function it(e){return/^[A-Za-z]+:\/\//.test(e)}function at(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new rt(r,i)}!function(e){var t={TaskState:Ee,TaskEvent:Te,StringFormat:Y,Storage:rt,Reference:nt};e.INTERNAL.registerComponent(new m.a("storage-compat",at,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.2.0")}(a.a)},function(e,t,n){"use strict";var r=n(23),i=n(8),a=n(9),o=n(4),u=n(1),s=n(2),c=n(19),l=n(6),f=n(5),h=n(14);function d(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new l.g("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function p(){if("undefined"===typeof Uint8Array)throw new l.g("unimplemented","Uint8Arrays are not available in this environment.")}function v(){if(!Object(l.r)())throw new l.g("unimplemented","Blobs are unavailable in Firestore in this environment.")}var y=function(){function e(t){Object(u.a)(this,e),this._delegate=t}return Object(s.a)(e,[{key:"toBase64",value:function(){return v(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return p(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return v(),new e(l.b.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return p(),new e(l.b.fromUint8Array(t))}}]),e}();function m(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Object(o.a)(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(u){i.e(u)}finally{i.f()}return!1}(e,["next","error","complete"])}var g=function(){function e(){Object(u.a)(this,e)}return Object(s.a)(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return Object(l.F)(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return Object(l.G)(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return Object(l.x)(e._delegate)}}]),e}(),b=function(){function e(t,n,r){var i=this;Object(u.a)(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof l.m||(this._appCompat=t)}return Object(s.a)(e,[{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Object(l.s)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(l.A)(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Object(l.H)(this._delegate)}},{key:"disableNetwork",value:function(){return Object(l.D)(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Object(l.t)("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return Object(l.lb)(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Object(l.Y)(this._delegate,e)}},{key:"collection",value:function(e){try{return new N(this,Object(l.y)(this._delegate,e))}catch(t){throw T(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new _(this,Object(l.E)(this._delegate,e))}catch(t){throw T(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new C(this,Object(l.z)(this._delegate,e))}catch(t){throw T(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Object(l.db)(this._delegate,(function(n){return e(new w(t,n))}))}},{key:"batch",value:function(){var e=this;return Object(l.K)(this._delegate),new x(new l.l(this._delegate,(function(t){return Object(l.L)(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Object(l.V)(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Object(l.W)(this._delegate,e).then((function(e){return e?new C(t,e):null}))}},{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"app",get:function(){if(!this._appCompat)throw new l.g("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}}]),e}(),k=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this)).firestore=e,r}return Object(s.a)(n,[{key:"convertBytes",value:function(e){return new y(new l.b(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return _.forKey(t,this.firestore,null)}}]),n}(l.a);var w=function(){function e(t,n){Object(u.a)(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new k(t)}return Object(s.a)(e,[{key:"get",value:function(e){var t=this,n=R(e);return this._delegate.get(n).then((function(e){return new I(t._firestore,new l.e(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=R(e);return n?(d("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=R(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=R(e);return this._delegate.delete(t),this}}]),e}(),x=function(){function e(t){Object(u.a)(this,e),this._delegate=t}return Object(s.a)(e,[{key:"set",value:function(e,t,n){var r=R(e);return n?(d("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=R(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=R(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),O=function(){function e(t,n,r){Object(u.a)(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Object(s.a)(e,[{key:"fromFirestore",value:function(e,t){var n=new l.i(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new j(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new k(t),n),i.set(n,a)),a}}]),e}();O.INSTANCES=new WeakMap;var _=function(){function e(t,n){Object(u.a)(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new k(t)}return Object(s.a)(e,[{key:"collection",value:function(e){try{return new N(this.firestore,Object(l.y)(this._delegate,e))}catch(t){throw T(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Object(f.n)(e))instanceof l.d&&Object(l.cb)(this._delegate,e)}},{key:"set",value:function(e,t){t=d("DocumentReference.set",t);try{return t?Object(l.fb)(this._delegate,e,t):Object(l.fb)(this._delegate,e)}catch(n){throw T(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Object(l.kb)(this._delegate,e):l.kb.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw T(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return Object(l.B)(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=E(n),a=S(n,(function(t){return new I(e.firestore,new l.e(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Object(l.X)(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Object(l.N)(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?Object(l.O)(this._delegate):Object(l.M)(this._delegate)).then((function(e){return new I(t.firestore,new l.e(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(O.getInstance(this.firestore,t)):this._delegate.withConverter(null))}},{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new N(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new l.g("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new l.d(n._delegate,r,new l.n(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new l.d(n._delegate,r,t))}}]),e}();function T(e,t,n){return e.message=e.message.replace(t,n),e}function E(e){var t,n=Object(o.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!m(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function S(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=m(e[0])?e[0]:m(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var I=function(){function e(t,n){Object(u.a)(this,e),this._firestore=t,this._delegate=n}return Object(s.a)(e,[{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Object(l.hb)(this._delegate,e._delegate)}},{key:"ref",get:function(){return new _(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}}]),e}(),j=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return Object(l.q)(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t}}]),n}(I),C=function(){function e(t,n){Object(u.a)(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new k(t)}return Object(s.a)(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Object(l.ab)(this._delegate,Object(l.mb)(t,n,r)))}catch(i){throw T(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Object(l.ab)(this._delegate,Object(l.Z)(t,n)))}catch(r){throw T(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Object(l.ab)(this._delegate,Object(l.T)(t)))}catch(n){throw T(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Object(l.ab)(this._delegate,Object(l.U)(t)))}catch(n){throw T(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Object(l.ab)(this._delegate,l.jb.apply(void 0,arguments)))}catch(t){throw T(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Object(l.ab)(this._delegate,l.ib.apply(void 0,arguments)))}catch(t){throw T(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Object(l.ab)(this._delegate,l.J.apply(void 0,arguments)))}catch(t){throw T(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Object(l.ab)(this._delegate,l.I.apply(void 0,arguments)))}catch(t){throw T(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Object(l.bb)(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Object(l.Q)(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?Object(l.R)(this._delegate):Object(l.P)(this._delegate)).then((function(e){return new A(t.firestore,new l.j(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=E(n),a=S(n,(function(t){return new A(e.firestore,new l.j(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Object(l.X)(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(O.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),D=function(){function e(t,n){Object(u.a)(this,e),this._firestore=t,this._delegate=n}return Object(s.a)(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new j(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),A=function(){function e(t,n){Object(u.a)(this,e),this._firestore=t,this._delegate=n}return Object(s.a)(e,[{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new D(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new j(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Object(l.hb)(this._delegate,e._delegate)}},{key:"query",get:function(){return new C(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new j(e._firestore,t)}))}}]),e}(),N=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e,r){var i;return Object(u.a)(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Object(s.a)(n,[{key:"doc",value:function(e){try{return new _(this.firestore,void 0===e?Object(l.E)(this._delegate):Object(l.E)(this._delegate,e))}catch(t){throw T(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return Object(l.u)(this._delegate,e).then((function(e){return new _(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Object(l.cb)(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(O.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new _(this.firestore,e):null}}]),n}(C);function R(e){return Object(l.p)(e,l.d)}var P=function(){function e(){Object(u.a)(this,e);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];this._delegate=Object(r.a)(l.f,n)}return Object(s.a)(e,[{key:"isEqual",value:function(e){return(e=Object(f.n)(e))instanceof l.f&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(l.o.keyField().canonicalString())}}]),e}(),L=function(){function e(t){Object(u.a)(this,e),this._delegate=t}return Object(s.a)(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=Object(l.eb)();return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=Object(l.C)();return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=l.w.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=l.v.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=Object(l.S)(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),M={Firestore:b,GeoPoint:l.h,Timestamp:l.k,Blob:y,Transaction:w,WriteBatch:x,DocumentReference:_,DocumentSnapshot:I,Query:C,QueryDocumentSnapshot:j,QuerySnapshot:A,CollectionReference:N,FieldPath:P,FieldValue:L,setLogLevel:function(e){Object(l.gb)(e)},CACHE_SIZE_UNLIMITED:l.c};!function(e){var t;t=function(e,t){return new b(e,t,new g)},e.INTERNAL.registerComponent(new h.a("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},M))),e.registerVersion("@firebase/firestore-compat","0.3.0")}(c.a)}]]);
//# sourceMappingURL=2.d0ebc572.chunk.js.map